var ke=Object.defineProperty,Te=Object.defineProperties;var De=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var me=(e,s,o)=>s in e?ke(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,h=(e,s)=>{for(var o in s||(s={}))Ne.call(s,o)&&me(e,o,s[o]);if(ue)for(var o of ue(s))xe.call(s,o)&&me(e,o,s[o]);return e},x=(e,s)=>Te(e,De(s));import{J as Ce,F as Ae,m as b,u as pe,a as B,b as he,r as v,c,d as t,e as y,w as g,t as _,f as M,g as Z,o as d,p as U,h as I,i as u,j as ye,k as f,l as re,n as ie,q,I as T,C as k,A as K,s as z,v as Se,x as le,T as m,y as L,z as R,B as O,D as _e,E as oe,G as $e,H as Ue,K as Ie,L as ee,M as Ee,N as Be,O as Me,P as Re,V as Oe,Q as Pe}from"./vendor.b436ea8d.js";const Fe=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=o(a);fetch(a.href,i)}};Fe();function F(){function e(n){return n===137?"Polygon":n===10?"Optimism":n===69?"Optimism Testnet":n===77?"Gnosis Testnet":n===100?"Gnosis Chain":n===137?"Polygon":n===42161?"Arbitrum":n===421611?"Arbitrum Testnet":n===80001?"Polygon Testnet":n===3?"Ropsten":n===4?"Rinkeby":"Unsupported Network"}function s(n){let a;if(n===137?a=["https://polygon-rpc.com/","https://polygon-mainnet.g.alchemy.com/v2/nRv9l5eQT_J9m7c5PsEkdM7d6awIcijw"]:n===80001?a=["https://matic-mumbai.chainstacklabs.com"]:n===10?a=["https://mainnet.optimism.io"]:n===100?a=["https://rpc.xdaichain.com","https://rpc.gnosischain.com"]:n===42161&&(a=["https://arb1.arbitrum.io/rpc"]),a){const i=a.map(r=>new Ce(r));return new Ae(i,1)}else return null}function o(n){let a,i;return n=="Ropsten"?(a="wallet_switchEthereumChain",i=[{chainId:"0x3"}]):n=="Rinkeby"?(a="wallet_switchEthereumChain",i=[{chainId:"0x4"}]):n=="Polygon Testnet"?(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://mumbai.polygonscan.com"],chainId:"0x13881",chainName:"Mumbai Testnet",nativeCurrency:{decimals:18,name:"Matic",symbol:"MATIC"},rpcUrls:["https://matic-mumbai.chainstacklabs.com"]}]):n=="Arbitrum Testnet"?(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://testnet.arbiscan.io"],chainId:"0x66EEB",chainName:"Arbitrum Testnet",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:["https://rinkeby.arbitrum.io/rpc"]}]):n=="Arbitrum"?(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://arbiscan.io"],chainId:"0xA4B1",chainName:"Arbitrum One",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:["https://arb1.arbitrum.io/rpc"]}]):n=="Optimism"?(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://optimistic.etherscan.io/"],chainId:"0xA",chainName:"Optimism",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:["https://mainnet.optimism.io"]}]):n=="Optimism Testnet"?(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://kovan-optimistic.etherscan.io/"],chainId:"0x45",chainName:"Optimism Testnet",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:["https://kovan.optimism.io"]}]):n=="Polygon"?(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://polygonscan.com"],chainId:"0x89",chainName:"Polygon PoS Chain",nativeCurrency:{decimals:18,name:"MATIC",symbol:"MATIC"},rpcUrls:["https://polygon-rpc.com/"]}]):n=="Gnosis Testnet"?(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://blockscout.com/poa/sokol"],chainId:"0x4D",chainName:"Gnosis Testnet",nativeCurrency:{decimals:18,name:"SPOA",symbol:"SPOA"},rpcUrls:["https://sokol.poa.network"]}]):n=="Gnosis Chain"&&(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://blockscout.com/xdai/mainnet"],chainId:"0x64",chainName:"Gnosis Chain",nativeCurrency:{decimals:18,name:"XDAI",symbol:"XDAI"},rpcUrls:["https://rpc.gnosischain.com"]}]),{method:a,params:i}}return{getChainName:e,getFallbackProvider:s,switchNetwork:o}}var Le="/assets/KlimaDAO-NS-LOGO.bcd966d2.png";var D=(e,s)=>{for(const[o,n]of s)e[o]=n;return e};const Ke={name:"Navbar",computed:x(h(h({},b("user",["getUserShortAddress","getUserSelectedName"])),b("network",["getNetworkName","getSupportedNetworks","getSupportedNetworkNames"])),{getNameOrAddress(){return this.getUserSelectedName?this.getUserSelectedName:this.getUserShortAddress}}),methods:{changeNetwork(e){const s=this.switchNetwork(e);window.ethereum.request({method:s.method,params:s.params})},logout(){this.disconnect(),localStorage.clear(),localStorage.setItem("connected","null")},openUrl(e){window.open(e,"_blank").focus()}},setup(){const{open:e}=he(),{disconnect:s}=pe(),{isActivated:o}=B(),{switchNetwork:n}=F();return{isActivated:o,disconnect:s,open:e,switchNetwork:n}}},We=e=>(U("data-v-1e481f5e"),e=e(),I(),e),Ve={class:"navbar sticky-top navbar-expand-lg navbar-light"},He={class:"container-fluid"},je=We(()=>t("img",{src:Le,alt:"KlimaDAO Name Service",height:"105",width:"275",class:"d-inline-block align-bottom navbar-img"},null,-1)),qe={class:"legend-div"},Je=u(" YOUR PROFILE "),Ye=u(" ABOUT KNS "),Ge=u(" HOW KNS WORKS "),Xe={class:"collapse navbar-collapse",id:"navbarSupportedContent"},ze={class:"d-flex flex-row ms-auto"},Qe={key:0,class:""},Ze={class:"btn-group mx-2"},et={class:"btn btn-primary btn-Network dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},tt={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},st=["onClick"],at={class:"btn-group mx-2"},nt={class:"btn btn-primary btn-connectedName dropdown-toggle",type:"button",id:"dropdownMenuButton2","data-bs-toggle":"dropdown","aria-expanded":"false"},it={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton2"},ot=u("Profile"),rt=u("Buy domain"),lt=u("Search domain"),dt=u("Send tokens"),ct=u("About"),ut=u("How it works"),mt=u("Browser extension");function pt(e,s,o,n,a,i){const r=v("router-link");return d(),c("nav",Ve,[t("div",He,[y(r,{to:"/",class:"navbar-brand"},{default:g(()=>[je]),_:1}),t("div",qe,[y(r,{to:"/profile",class:"d-inline-block navbar-legend"},{default:g(()=>[Je]),_:1}),y(r,{to:"/about",class:"d-inline-block navbar-legend"},{default:g(()=>[Ye]),_:1}),y(r,{to:"/how",class:"d-inline-block navbar-legend"},{default:g(()=>[Ge]),_:1})]),t("div",Xe,[t("div",ze,[n.isActivated?(d(),c("div",Qe,[t("div",Ze,[t("button",et,_(e.getNetworkName),1),t("ul",tt,[t("li",null,[(d(!0),c(M,null,Z(e.getSupportedNetworkNames,l=>(d(),c("span",{class:"dropdown-item",onClick:p=>i.changeNetwork(l)},_(l),9,st))),256))])])]),t("div",at,[t("button",nt,_(i.getNameOrAddress),1),t("ul",it,[y(r,{tag:"li",class:"dropdown-item",to:"/profile"},{default:g(()=>[ot]),_:1}),y(r,{tag:"li",class:"dropdown-item",to:"/"},{default:g(()=>[rt]),_:1}),y(r,{tag:"li",class:"dropdown-item",to:"/search-domain"},{default:g(()=>[lt]),_:1}),y(r,{tag:"li",class:"dropdown-item",to:"/send-tokens"},{default:g(()=>[dt]),_:1}),y(r,{tag:"li",class:"dropdown-item",to:"/about"},{default:g(()=>[ct]),_:1}),y(r,{tag:"li",class:"dropdown-item",to:"/how"},{default:g(()=>[ut]),_:1}),y(r,{tag:"li",class:"dropdown-item",to:"/browser"},{default:g(()=>[mt]),_:1}),t("li",{class:"dropdown-item",onClick:s[0]||(s[0]=(...l)=>i.logout&&i.logout(...l))},"Disconnect")])])])):(d(),c("button",{key:1,class:"btn btn-primary btn-unConnected",onClick:s[1]||(s[1]=(...l)=>n.open&&n.open(...l))},"Connect wallet"))])])])])}var ht=D(Ke,[["render",pt],["__scopeId","data-v-1e481f5e"]]);const yt={name:"Footer",computed:h({},b("network",["isNetworkSupported"])),setup(){const{isActivated:e}=B();return{isActivated:e}}},te=e=>(U("data-v-2a536cb8"),e=e(),I(),e),_t={class:"container-fluid text-center mt-3"},ft=u("Profile"),bt={key:1},gt=u("About KNS"),wt=te(()=>t("span",null," | ",-1)),vt=u("How it works"),kt=te(()=>t("span",null," | ",-1)),Tt=te(()=>t("a",{target:"_blank",href:"https://twitter.com/punkdomains"},"Powered by Punk Domains",-1)),Dt=te(()=>t("span",null," | ",-1)),Nt=te(()=>t("a",{target:"_blank",href:"https://twitter.com/gwamilabs"},"Built by GwamiLabs",-1)),xt=re('<div class="container-fluid text-center" data-v-2a536cb8><a class="icons" target="_blank" href="https://github.com/GwamiLabs" data-v-2a536cb8><i class="bi bi-github" data-v-2a536cb8></i></a><a class="icons" target="_blank" href="https://discord.gg/gwamilabs" data-v-2a536cb8><i class="bi bi-discord" data-v-2a536cb8></i></a><a class="icons" target="_blank" href="https://twitter.com/gwamilabs" data-v-2a536cb8><i class="bi bi-twitter" data-v-2a536cb8></i></a></div>',1);function Ct(e,s,o,n,a,i){const r=v("router-link");return d(),c(M,null,[t("div",_t,[n.isActivated&&e.isNetworkSupported?(d(),ye(r,{key:0,to:"/profile"},{default:g(()=>[ft]),_:1})):f("",!0),n.isActivated&&e.isNetworkSupported?(d(),c("span",bt," | ")):f("",!0),y(r,{to:"/about"},{default:g(()=>[gt]),_:1}),wt,y(r,{to:"/how"},{default:g(()=>[vt]),_:1}),kt,Tt,Dt,Nt]),xt],64)}var At=D(yt,[["render",Ct],["__scopeId","data-v-2a536cb8"]]),A={"10":{".wagmi":"0xC3E8922657686EC63eaaa9FC1Fe06826802e7e0f",".optimism":"0xBca24d86e4Ad1e011278FaEFc4fF191a731411EC",".spartan":"0x3490C9817C45A2a394b11A3807f58a8325235aE0",".l2":"0x9A7657d1593032C75d70950707870c3cC7ca45DC"},"69":{".optitest":"0xAc63b035e63d280c408549f5AFA64be7469470de",".l2test":"0xB5B8AF8199777d471c0320BC11022433df6D100e"},"77":{".testdao":"0x110cc3f64cdf8ffadc785dfa53906bcff76b3846"},"100":{".gnosis":"0xC3E8922657686EC63eaaa9FC1Fe06826802e7e0f",".xdai":"0xbca24d86e4ad1e011278faefc4ff191a731411ec",".bright":"0x3490c9817c45a2a394b11a3807f58a8325235ae0"},"137":{".web3":"0xb6Cf2874588d0fdFAf9d1b5E254ee6C49110C68B",".polygon":"0xa450bc33d0940d25fB0961c592fb440Fa63ABE03",".ape":"0x794a8390D94E32b086908D2bA9D66300aA163C62",".poly":"0x70Ac07C50131b7bb2c8Bd9466D8d2add30B7759f",".degen":"0xC4999A3e91ef87c9EC5d8186D02B77F9A62458b9",".klima":"0xe8b97542A433e7eCc7bB791872af04DF02A1a6E4"},"42161":{".arbi":"0xe97456E0fB121F65422F43ccbd4A07a0e269B534",".arbitrum":"0x337EB5061943ECd247649d58D35Dbab0b40D67E0"},"80001":{".polytest":"0xebED27271230E8ED18fD3Ef96F0221D9DBC93750"},"421611":{".arbitest":"0xC6a628b1FF1aD4e304bEeACAff915559786deA2e"}},W=[{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"address",name:"_tldOwner",type:"address"},{internalType:"uint256",name:"_domainPrice",type:"uint256"},{internalType:"bool",name:"_buyingEnabled",type:"bool"},{internalType:"uint256",name:"_royalty",type:"uint256"},{internalType:"address",name:"_factoryAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"}],name:"DataChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"string",name:"defaultDomain",type:"string"}],name:"DefaultDomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"string",name:"fullDomainName",type:"string"}],name:"DomainCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"buyingEnabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_maxLength",type:"uint256"}],name:"changeNameMaxLength",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_price",type:"uint256"}],name:"changePrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_referral",type:"uint256"}],name:"changeReferralPayment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_royalty",type:"uint256"}],name:"changeRoyalty",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"defaultNames",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"domainIdsNames",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"domains",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"holder",type:"address"},{internalType:"string",name:"data",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"},{internalType:"string",name:"_data",type:"string"}],name:"editData",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"}],name:"editDefaultDomain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"factoryAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"}],name:"getDomainData",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"}],name:"getDomainHolder",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getFactoryOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"},{internalType:"address",name:"_domainHolder",type:"address"},{internalType:"address",name:"_referrer",type:"address"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nameMaxLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"},{internalType:"address",name:"_domainHolder",type:"address"}],name:"ownerMintDomain",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"referral",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"royalty",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"toggleBuyingDomains",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];const St={components:{Navbar:ht,Footer:At},created(){this.fetchReferrer(),this.setTldContract(),this.fetchWrapperContractData(),localStorage.getItem("klimav1")||(localStorage.clear(),localStorage.setItem("connected","null"),localStorage.setItem("klimav1","true"))},computed:h({},b("user",["getUserSelectedName"])),methods:x(h(h(h(h(h({},ie("user",["fetchUserDomainNames","fetchUserUsdcData"])),ie("klima",["fetchWrapperContractData"])),q("user",["setUserData"])),q("network",["setNetworkData"])),q("klima",["setTldContract"])),{fetchAllData(){this.setUserData(),this.fetchUserUsdcData(),this.setNetworkData()},async fetchReferrer(){const s=new URLSearchParams(window.location.search).get("ref");if(s&&s.split(".").length===2){const o=s.split(".");for(let n in A)if(A[n]["."+o[1]]){const a=this.getFallbackProvider(Number(n)),i=new T(W),l=await new k(A[n]["."+o[1]],i,a).getDomainHolder(o[0]);l!==K&&localStorage.setItem("referral",l);break}}else s&&z(s)&&localStorage.setItem("referral",s)}}),setup(){const{address:e,chainId:s,isActivated:o}=B(),{connect:n}=pe(),{getFallbackProvider:a}=F();return Se(()=>{!o.value&&localStorage.getItem("connected")=="metamask"&&n("metamask")}),{address:e,chainId:s,connect:n,getFallbackProvider:a,isActivated:o}},watch:{address(e,s){e&&(this.setUserData(),this.fetchUserUsdcData(),this.fetchUserDomainNames(!0))},chainId(e,s){!this.isActivated&&localStorage.getItem("connected")=="metamask"&&this.connect("metamask"),this.chainId>=1&&(this.fetchAllData(),this.fetchUserDomainNames(!0))},isActivated(e,s){!localStorage.getItem("connected")&&localStorage.getItem("connected")!=="null"&&localStorage.setItem("connected","metamask")}}},$t={class:"main-container"};function Ut(e,s,o,n,a,i){const r=v("Navbar"),l=v("router-view"),p=v("Footer"),S=v("vdapp-board");return d(),c(M,null,[y(r),t("div",$t,[y(l),y(p)]),y(S)],64)}var It=D(St,[["render",Ut],["__scopeId","data-v-50c63647"]]);const Et="modulepreload",fe={},Bt="/",Mt=function(s,o){return!o||o.length===0?s():Promise.all(o.map(n=>{if(n=`${Bt}${n}`,n in fe)return;fe[n]=!0;const a=n.endsWith(".css"),i=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const r=document.createElement("link");if(r.rel=a?"stylesheet":Et,a||(r.as="script",r.crossOrigin=""),r.href=n,document.head.appendChild(r),a)return new Promise((l,p)=>{r.addEventListener("load",l),r.addEventListener("error",p)})})).then(()=>s())};var Rt="/assets/KlimaDAO-NS-Emblem.eec47785.png";const Ot={name:"About"},w=e=>(U("data-v-670abad9"),e=e(),I(),e),Pt={class:"container"},Ft=w(()=>t("h1",{class:"text-center"},"About KNS",-1)),Lt={class:"row mt-3"},Kt={class:"col-md-8 offset-md-2 text-center"},Wt=w(()=>t("img",{class:"img-fluid",src:Rt,width:"300"},null,-1)),Vt=w(()=>t("p",null,[u("Klima Name Service (KNS) domains are regenerative domains that "),t("strong",null,"continuously offset your carbon footprint"),u(" and act as social representations of your carbon neutrality or net zero pledges.")],-1)),Ht=w(()=>t("p",null,[u("KNS powers the "),t("strong",null,"Terraneutral platform"),u(", a social platform for Refi, suitable for both individuals and businesses.")],-1)),jt=w(()=>t("p",null,[u("KNS also enables users to map "),t("strong",null,"human readable names"),u(" to blockchain and non-blockchain resources, like Ethereum addresses, IPFS hashes, or website URLs. KNS domains can be bought and sold on secondary markets.")],-1)),qt=w(()=>t("p",null,[t("strong",null,"Refer anyone to get 10% from their purchase!")],-1)),Jt=w(()=>t("p",null,"KNS tracks the average carbon tonnes retired per domain name and translates this into your carbon neutral journey as a domain owner.",-1)),Yt=w(()=>t("p",null,[u("It allows for a level of transparency into individuals or companies carbon neutral or climate positive status. It comes with a "),t("strong",null,"leader board of carbon tonnes "),u(" that have been offsetted on-chain linked to .klima wallet addresses and a synopsis of the impact of the carbon tonne retired per domain. ")],-1)),Gt=w(()=>t("p",null,[u(" Ultimately, a .klima address allows you to connect your social identity and web3 presence in a simplified way. Through the Terraneutral platform, users will be able to amplify their neutral status and bridge this commitment into real life incentives through "),t("strong",null,"the .klima domain name: the green Identity Card.")],-1)),Xt=w(()=>t("h3",null,"Why would anyone need this?",-1)),zt=w(()=>t("p",null,[u(" In order for you and me to make climate action the ONLY option for us all, we must "),t("strong",null,"embed climate accountability and transparency into our daily lives.")],-1)),Qt=w(()=>t("p",null,[u("KNS provides the first step through enabling holders to "),t("strong",null,"passively account for their pollution.")],-1)),Zt=w(()=>t("p",null,[u("Furthermore, if you want someone to send you tokens, sure you could send them your address and they could copy-paste it into their wallet. But wouldn't it be great if they could just enter a domain name, like timmy.klima, instead of the whole address? And they instantly know you live a carbon neutral life. "),t("strong",null,"This is what Klima Name Service provides: the green social identity.")],-1)),es=w(()=>t("p",null,[u("Another use case is to have "),t("strong",null,"your .klima domain name as your username in various web3 dApps, games and upcoming social networks."),u(" Imagine you wanted to check the footprint of Microsoft and they had a .klima domain. How great would it feel to type in: Microsoft.klima on your browser or the "),t("strong",null,"Terraneutral platform"),u(" and you can see how much carbon they have offsetted and track their Net Zero status. This applies to every user. ")],-1)),ts=w(()=>t("h3",null,"Why use .klima?",-1)),ss=w(()=>t("p",null," We choose to use .klima because KLIMA embodies both our vision and the tools to achieve our mission. ",-1)),as=w(()=>t("p",null,[t("strong",null," The KLIMA token is a critical component to KNS, and we are klimates.")],-1)),ns=u(" To understand how this works, "),is=u("click here"),os=u(". "),rs=w(()=>t("h3",null,"Do you have a roadmap?",-1)),ls=w(()=>t("p",null," The vision is to create accountability and transparency for climate change through social amplification and culture. ",-1)),ds=w(()=>t("p",null," Our road map includes the Terraneutral platform, Green identity card, green NFTs marketplace proxy, mobile app, Klima forest etc ",-1)),cs=w(()=>t("h3",null,"What is the price?",-1)),us=w(()=>t("p",null,[u(" KNS is not just a domain, it is the world\u2019s first regenerative name service that offsets your footprint with real life utilities attached to it. "),t("strong",null,"KNS will be priced at 250USDC but starts from 100USDC at launch."),u(" So the earlier you are in, the cheaper it is. KNS is a permanent domain and not on subscription. ")],-1));function ms(e,s,o,n,a,i){const r=v("router-link");return d(),c("div",Pt,[Ft,t("div",Lt,[t("div",Kt,[Wt,Vt,Ht,jt,qt,Jt,Yt,Gt,Xt,zt,Qt,Zt,es,ts,ss,as,t("p",null,[ns,y(r,{to:"/how"},{default:g(()=>[is]),_:1}),os]),rs,ls,ds,cs,us])])])}var ps=D(Ot,[["render",ms],["__scopeId","data-v-670abad9"]]),se=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];const hs={name:"Sidebar",computed:x(h({},b("user",["getUserSelectedName","getUserShortAddress","getUserSelectedNameImageSvg"])),{getNameOrAddress(){return this.getUserSelectedName?this.getUserSelectedName:this.getUserShortAddress},getUserImage(){return this.getUserSelectedNameImageSvg?this.getUserSelectedNameImageSvg:"https://upload.wikimedia.org/wikipedia/commons/b/bc/Unknown_person.jpg"}})},J=e=>(U("data-v-be0e096c"),e=e(),I(),e),ys={class:"container"},_s=["src"],fs={class:"text-center mt-2 text-break"},bs=J(()=>t("hr",null,null,-1)),gs=J(()=>t("i",{class:"bi bi-person"},null,-1)),ws=u(" Profile "),vs=J(()=>t("i",{class:"bi bi-cart4"},null,-1)),ks=u(" Buy domain "),Ts=J(()=>t("i",{class:"bi bi-search"},null,-1)),Ds=u(" Search domain "),Ns=J(()=>t("i",{class:"bi bi-send"},null,-1)),xs=u(" Send tokens "),Cs=J(()=>t("i",{class:"bi bi-window-plus"},null,-1)),As=u(" Browser extension "),Ss=J(()=>t("i",{class:"bi bi-currency-dollar"},null,-1)),$s=u(" USDC allowance ");function Us(e,s,o,n,a,i){const r=v("router-link");return d(),c("div",ys,[t("img",{src:i.getUserImage,class:"img-fluid img-thumbnail"},null,8,_s),t("h3",fs,_(i.getNameOrAddress),1),bs,y(r,{class:"btn btn-sidebar text-start",to:"/profile"},{default:g(()=>[gs,ws]),_:1}),y(r,{class:"btn btn-sidebar text-start",to:"/"},{default:g(()=>[vs,ks]),_:1}),y(r,{class:"btn btn-sidebar text-start",to:"/search-domain"},{default:g(()=>[Ts,Ds]),_:1}),y(r,{class:"btn btn-sidebar text-start",to:"/send-tokens"},{default:g(()=>[Ns,xs]),_:1}),y(r,{class:"btn btn-sidebar text-start",to:"/browser"},{default:g(()=>[Cs,As]),_:1}),y(r,{class:"btn btn-sidebar text-start",to:"/allowance"},{default:g(()=>[Ss,$s]),_:1})])}var Y=D(hs,[["render",Us],["__scopeId","data-v-be0e096c"]]);const Is={name:"WaitingToast",props:["text"]},Es=t("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Bs={class:"mx-2"};function Ms(e,s,o,n,a,i){return d(),c("div",null,[Es,t("span",Bs,_(o.text),1)])}var G=D(Is,[["render",Ms]]);const Rs={name:"Allowance",components:{Sidebar:Y},data(){return{newAllowance:null,waiting:!1}},computed:x(h(h(h({},b("user",["getUsdcAddress","getUsdcAllowance","getUsdcBalance"])),b("network",["getBlockExplorerBaseUrl"])),b("klima",["getKlimaWrapperAddress"])),{notValid(){if(this.newAllowance){if(isNaN(this.newAllowance))return!0;if(Number(this.newAllowance)<0)return!0;if(this.newAllowance.includes(" "))return!0}else return!0;return!1}}),methods:x(h({},q("user",["setUsdcAllowance"])),{async approveUsdc(){this.waiting=!0;const e=new T(se),s=new k(this.getUsdcAddress,e,this.signer),o=this.newAllowance;try{const n=await s.approve(this.getKlimaWrapperAddress,le(o,"mwei")),a=this.toast({component:G,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:m.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+n.hash,"_blank").focus()}),i=await n.wait();i.status===1?(this.toast.dismiss(a),this.toast("You have successfully set the allowance to "+o+" USDC!",{type:m.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+n.hash,"_blank").focus()}),this.setUsdcAllowance(o),this.waiting=!1):(this.toast.dismiss(a),this.toast("Transaction has failed.",{type:m.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+n.hash,"_blank").focus()}),console.log(i),this.waiting=!1)}catch(n){console.log(n),this.waiting=!1,this.toast(n.message,{type:m.ERROR})}this.waiting=!1}}),setup(){const{signer:e}=B(),s=L(),{getFallbackProvider:o}=F();return{getFallbackProvider:o,signer:e,toast:s}}},Os={class:"row"},Ps={class:"col-md-3",id:"sidebar-container"},Fs={class:"col-md-9"},Ls={class:"row"},Ks={class:"col-md-12 mb-3"},Ws={class:"container text-center"},Vs=t("h3",null,"Manage USDC allowance",-1),Hs=t("p",{class:"mt-4"}," On this page you can manage your USDC allowance for the domain minting contract. Example: if you want to mint 5 domains and would like to avoid sending an approval transaction each time, set allowance to 500. But if you instead want to remove the allowance completely, set it to 0. ",-1),js={class:"row mt-5"},qs={class:"col-md-6 offset-md-3"},Js=["disabled"],Ys={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Gs=u(" Confirm new allowance ");function Xs(e,s,o,n,a,i){const r=v("Sidebar");return d(),c("div",Os,[t("div",Ps,[y(r)]),t("div",Fs,[t("div",Ls,[t("div",Ks,[t("div",Ws,[Vs,Hs,t("p",null,"Current allowance: "+_(e.getUsdcAllowance)+" USDC",1),t("div",js,[t("div",qs,[R(t("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>a.newAllowance=l),class:"form-control text-center",placeholder:"Enter new allowance amount in USDC"},null,512),[[O,a.newAllowance]])])]),t("button",{class:"btn btn-primary mt-3 mb-5",onClick:s[1]||(s[1]=(...l)=>i.approveUsdc&&i.approveUsdc(...l)),disabled:a.waiting||i.notValid},[a.waiting?(d(),c("span",Ys)):f("",!0),Gs],8,Js)])])])])])}var zs=D(Rs,[["render",Xs]]),Qs="/assets/chrome-logo.f7a9cfbf.png",Zs="/assets/firefox-logo.1191b73d.png";const ea={name:"BrowserExtension",components:{Sidebar:Y}},ta=e=>(U("data-v-79beebf2"),e=e(),I(),e),sa={class:"row"},aa={class:"col-md-3",id:"sidebar-container"},na=ta(()=>t("div",{class:"col-md-9"},[t("div",{class:"row"},[t("div",{class:"col-md-12 mb-3"},[t("div",{class:"container text-center"},[t("h3",null,"Browser Extension/Plugin"),t("p",{class:"text-wrap p-4"}," Punk Domains browser extension allows you to enter a .klima domain name in the URL bar and the extension will redirect you to the URL that is set for that domain. If no URL is set, the extension will redirect you to the domain page on the Klima Name Service website. ")])])]),t("div",{class:"row"},[t("div",{class:"col-md-6 mb-3"},[t("div",{class:"container text-center"},[t("h3",null,"Chrome/Brave"),t("p",null,[t("small",null,[t("em",null,"Coming soon!")])]),t("img",{class:"img-fluid browser-img mb-3",src:Qs})])]),t("div",{class:"col-md-6 mb-3"},[t("div",{class:"container text-center"},[t("h3",null,"Firefox"),t("p",null,[t("small",null,[t("em",null,"Coming soon!")])]),t("img",{class:"img-fluid browser-img mb-3",src:Zs})])])])],-1));function ia(e,s,o,n,a,i){const r=v("Sidebar");return d(),c("div",sa,[t("div",aa,[y(r)]),na])}var oa=D(ea,[["render",ia],["__scopeId","data-v-79beebf2"]]);const ra={name:"EditOtherData",emits:["fetchData"],props:["domainData","tld","domainName","isCorrectChainForDomain"],data(){return{btnInactive:!1,fields:[],tldContract:null}},computed:x(h(h(h({},b("punk",["getTldAbi"])),b("network",["getBlockExplorerBaseUrl"])),b("klima",["getKlimaTldAddress"])),{customData(){if(this.domainData)try{return JSON.parse(this.domainData.data)}catch{return null}return null},isOwner(){if(this.domainData)return String(this.address).toLowerCase()===String(this.domainData.holder).toLowerCase()}}),methods:{addField(){this.fields.push({dataKey:"",dataValue:""})},removeField(e){this.fields.splice(e,1)},async editData(){this.btnInactive=!0,this.tldContract||this.setContract();const e={};for(let s of this.fields)s.dataKey&&s.dataValue&&(e[s.dataKey]=s.dataValue);if(this.tldContract)try{const s=await this.tldContract.editData(this.domainName,JSON.stringify(e));document.getElementById("closeCustomDataModal").click();const o=this.toast({component:G,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:m.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+s.hash,"_blank").focus()}),n=await s.wait();n.status===1?(this.toast.dismiss(o),this.toast("You have successfully updated your domain's custom data!",{type:m.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+s.hash,"_blank").focus()}),this.$emit("fetchData"),this.btnInactive=!1):(this.toast.dismiss(o),this.toast("Transaction has failed.",{type:m.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+s.hash,"_blank").focus()}),console.log(n),this.btnInactive=!1,this.inputUrl=this.domainData.url)}catch(s){this.btnInactive=!1,console.log(s),this.toast(s.message,{type:m.ERROR}),this.inputUrl=this.domainData.url}},getTwitterUrl(e){if(typeof e=="string")return e.startsWith("http")?e:e.startsWith("www")||e.startsWith("twitter.com")?"https://"+e:(e.startsWith("@"),"https://twitter.com/"+e)},setContract(){if(this.address){const e=new T(this.getTldAbi);this.tldContract=new k(this.getKlimaTldAddress,e,this.signer)}}},setup(){const{address:e,signer:s}=B(),o=L();return{address:e,signer:s,toast:o}},watch:{domainData(){if(this.domainData&&this.domainData.data){const e=JSON.parse(this.domainData.data);for(const[s,o]of Object.entries(e))this.fields.findIndex(n=>n.dataKey==s)===-1&&this.fields.push({dataKey:s,dataValue:o})}this.fields.findIndex(e=>e.dataKey=="imgAddress")===-1&&this.fields.push({dataKey:"imgAddress",dataValue:"",valuePlaceholder:"HTTP, or 0x address if NFT"}),this.fields.findIndex(e=>e.dataKey=="imgTokenId")===-1&&this.fields.push({dataKey:"imgTokenId",dataValue:"",valuePlaceholder:"Only needed if img is NFT"}),this.fields.findIndex(e=>e.dataKey=="url")===-1&&this.fields.push({dataKey:"url",dataValue:"",valuePlaceholder:"Add any URL to redirect domain to"}),this.fields.findIndex(e=>e.dataKey=="twitter")===-1&&this.fields.push({dataKey:"twitter",dataValue:"",valuePlaceholder:"Enter your Twitter handle"}),this.isOwner&&this.isCorrectChainForDomain&&this.setContract()}}},Q=e=>(U("data-v-da39bc9e"),e=e(),I(),e),la={class:"mb-3 row domain-data mt-4"},da={class:"col-sm-3 punk-title"},ca={class:"col-sm-9 punk-text"},ua={key:0},ma=["href"],pa={key:1},ha=["href"],ya={key:2},_a={key:1,class:"btn btn-primary btn-lg mx-3 mt-3","data-bs-toggle":"modal","data-bs-target":"#editDataModal"},fa={class:"modal fade text-start",id:"editDataModal",tabindex:"-1","aria-labelledby":"editDataModalLabel","aria-hidden":"true"},ba={class:"modal-dialog modal-dialog-centered"},ga={class:"modal-content"},wa=Q(()=>t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"editDataModalLabel"},"Edit other data"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),va={class:"modal-body"},ka=Q(()=>t("p",null," You can add custom data to this domain. ",-1)),Ta=Q(()=>t("p",null," Example: twitter -> @myhandle ",-1)),Da={class:"input-group mb-3 mt-4"},Na=["onUpdate:modelValue"],xa=Q(()=>t("span",{class:"input-group-text"},[t("i",{class:"bi bi-arrow-right"})],-1)),Ca=["onUpdate:modelValue","placeholder"],Aa=["onClick"],Sa=Q(()=>t("i",{class:"bi bi-x-circle"},null,-1)),$a=[Sa],Ua={class:"modal-footer"},Ia=["disabled"],Ea=Q(()=>t("button",{id:"closeCustomDataModal",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1));function Ba(e,s,o,n,a,i){return d(),c(M,null,[i.customData?(d(!0),c(M,{key:0},Z(i.customData,(r,l)=>(d(),c("div",la,[t("div",da,_(l.charAt(0).toUpperCase()+l.slice(1)),1),t("div",ca,[l=="url"?(d(),c("span",ua,[t("a",{target:"_blank",href:r},_(r),9,ma)])):l=="twitter"?(d(),c("span",pa,[t("a",{target:"_blank",href:i.getTwitterUrl(r)},_(r),9,ha)])):(d(),c("span",ya,_(r),1))])]))),256)):f("",!0),i.isOwner&&o.isCorrectChainForDomain?(d(),c("button",_a," Edit data ")):f("",!0),t("div",fa,[t("div",ba,[t("div",ga,[wa,t("div",va,[ka,Ta,a.fields?(d(!0),c(M,{key:0},Z(a.fields,(r,l)=>(d(),c("div",Da,[R((d(),c("input",{type:"text",key:"dataKey"+l,class:"form-control","onUpdate:modelValue":p=>r.dataKey=p,placeholder:"Enter key (like twitter)"},null,8,Na)),[[O,r.dataKey]]),xa,R((d(),c("input",{type:"text",class:"form-control",key:"dataValue"+l,"onUpdate:modelValue":p=>r.dataValue=p,placeholder:r.valuePlaceholder?r.valuePlaceholder:"Enter value"},null,8,Ca)),[[O,r.dataValue]]),t("span",{class:"input-group-text",onClick:p=>i.removeField(l)},$a,8,Aa)]))),256)):f("",!0),t("button",{class:"btn btn-secondary btn-sm",onClick:s[0]||(s[0]=(...r)=>i.addField&&i.addField(...r))}," Add new field ")]),t("div",Ua,[t("button",{type:"button",class:"btn btn-secondary",onClick:s[1]||(s[1]=(...r)=>i.editData&&i.editData(...r)),disabled:a.btnInactive},"Edit data",8,Ia),Ea])])])])],64)}var Ma=D(ra,[["render",Ba],["__scopeId","data-v-da39bc9e"]]);const Ra={name:"DomainDetails",props:["domainChain","tld","domainName"],components:{EditOtherData:Ma,Sidebar:Y},data(){return{loadingData:!1,tldContract:null,domainData:null,pfpImage:"https://upload.wikimedia.org/wikipedia/commons/b/bc/Unknown_person.jpg"}},created(){!this.tldContract&&this.isCorrectChainForDomain&&this.setContract(),this.fetchData()},computed:x(h(h(h({},b("punk",["getTldAbi"])),b("klima",["getKlimaTldAddress"])),b("network",["getBlockExplorerBaseUrl","getChainId","getSupportedNetworks","isNetworkSupported"])),{holderData(){return this.domainData.holder!==K?this.domainData.holder:"This domain name is not owned by anyone yet."},isCorrectChainForDomain(){return Number(this.domainChain)===Number(this.getChainId)}}),methods:{async fetchData(){this.loadingData=!0;const e=this.getFallbackProvider(Number(this.domainChain)),s=new T(W),o=new k(A[this.domainChain]["."+this.tld],s,e);if(o&&(this.domainData=await o.domains(this.domainName),this.domainData&&this.domainData.holder!==K)){let n=await o.tokenURI(this.domainData.tokenId),a=!0;if(this.domainData.data){const i=JSON.parse(this.domainData.data);if(i.imgAddress&&!i.imgAddress.startsWith("0x"))this.pfpImage=i.imgAddress.replace("ipfs://","https://ipfs.io/ipfs/"),a=!1;else if(i.imgAddress){const r=new T(["function tokenURI(uint256 tokenId) public view returns (string memory)"]);n=await new k(i.imgAddress,r,e).tokenURI(i.imgTokenId)}else n=await o.tokenURI(i.imgTokenId);if(n.includes("ipfs://")&&(n=n.replace("ipfs://","https://ipfs.io/ipfs/")),n.includes("http")){const l=await(await fetch(n)).json();l&&l.image&&(this.pfpImage=l.image.replace("ipfs://","https://ipfs.io/ipfs/"),a=!1)}}if(n&&a){const i=atob(n.substring(29)),r=JSON.parse(i);r&&r.image&&(this.pfpImage=r.image)}}this.loadingData=!1},setContract(){if(this.isActivated){const e=new T(this.getTldAbi);this.tldContract=new k(this.getKlimaTldAddress,e,this.signer)}}},setup(){const{isActivated:e,signer:s}=B(),o=L(),{getChainName:n,getFallbackProvider:a}=F();return{getChainName:n,getFallbackProvider:a,isActivated:e,signer:s,toast:o}}},de=e=>(U("data-v-0a5df3f0"),e=e(),I(),e),Oa={class:"row"},Pa={class:"col-md-3",id:"sidebar-container"},Fa={class:"col-md-9"},La={class:"row"},Ka={class:"col-md-12"},Wa={class:"container text-center"},Va=["src"],Ha={key:0,class:"mb-3 text-center mt-4"},ja=de(()=>t("span",{class:"spinner-border spinner-border-lg",role:"status","aria-hidden":"true"},null,-1)),qa=[ja],Ja={key:1,class:"mb-3 row domain-data mt-4"},Ya=de(()=>t("div",{class:"col-sm-3 punk-title"}," Holder address ",-1)),Ga={class:"col-sm-9 punk-text text-break"},Xa={class:"mb-3 row domain-data mt-4"},za=de(()=>t("div",{class:"col-sm-3 punk-title"}," Network ",-1)),Qa={class:"col-sm-9 punk-text text-break"};function Za(e,s,o,n,a,i){const r=v("Sidebar"),l=v("EditOtherData");return d(),c("div",Oa,[t("div",Pa,[y(r)]),t("div",Fa,[t("div",La,[t("div",Ka,[t("div",Wa,[t("h3",null,_(o.domainName)+"."+_(o.tld),1),t("img",{class:"img-thumbnail domain-image",src:a.pfpImage},null,8,Va),a.loadingData?(d(),c("div",Ha,qa)):f("",!0),a.domainData?(d(),c("div",Ja,[Ya,t("div",Ga,_(i.holderData),1)])):f("",!0),t("div",Xa,[za,t("div",Qa,_(n.getChainName(Number(o.domainChain)))+" (this is where domain is registered) ",1)]),y(l,{domainData:a.domainData,tld:o.tld,domainName:o.domainName,isCorrectChainForDomain:i.isCorrectChainForDomain,onFetchData:i.fetchData},null,8,["domainData","tld","domainName","isCorrectChainForDomain","onFetchData"])])])])])])}var en=D(Ra,[["render",Za],["__scopeId","data-v-0a5df3f0"]]);const tn={name:"Referral",computed:x(h({},b("user",["getUserAddress","getUserSelectedName"])),{getNameOrAddress(){return this.getUserSelectedName?this.getUserSelectedName:this.getUserAddress}}),methods:{copyToClipboard(e){navigator.clipboard.writeText(e),this.toast("Referral link copied to your clipboard!",{type:m.SUCCESS})}},setup(){return{toast:L()}}},sn=e=>(U("data-v-11a2c8a3"),e=e(),I(),e),an={class:"row"},nn={class:"col-md-12 mt-3"},on={class:"container text-center"},rn=sn(()=>t("p",null,[t("strong",null,"Referrals"),u(" Share this referral link and earn rewards from new domain mints! ")],-1)),ln={class:"row mt-1"},dn=["value"];function cn(e,s,o,n,a,i){return d(),c("div",an,[t("div",nn,[t("div",on,[rn,t("div",ln,[t("input",{class:"form-control text-center clipboard",value:"http://www.kns.earth/?ref="+this.getNameOrAddress,onClick:s[0]||(s[0]=r=>i.copyToClipboard("http://www.kns.earth/?ref="+this.getNameOrAddress)),readonly:""},null,8,dn)])])])])}var be=D(tn,[["render",cn],["__scopeId","data-v-11a2c8a3"]]);function un(){function e(s){return s===""?{invalid:!0,message:null}:s===null?{invalid:!0,message:null}:s.includes(".")?{invalid:!0,message:"Dots not allowed"}:s.includes(" ")?{invalid:!0,message:"Spaces not allowed"}:s.includes("%")?{invalid:!0,message:"% not allowed"}:s.includes("&")?{invalid:!0,message:"& not allowed"}:s.includes("?")?{invalid:!0,message:"? not allowed"}:s.includes("#")?{invalid:!0,message:"# not allowed"}:s.includes("/")?{invalid:!0,message:"/ not allowed"}:s.includes(",")?{invalid:!0,message:"Comma not allowed"}:!1}return{buyNotValid:e}}var ge=[{inputs:[{internalType:"address",name:"_knsRetirerAddress",type:"address"},{internalType:"address",name:"_tldAddress",type:"address"},{internalType:"address",name:"_usdcAddress",type:"address"},{internalType:"uint256",name:"_price",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"address",name:"addr",type:"address"}],name:"AddedToWhitelist",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"price_",type:"uint256"}],name:"PriceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"referral_",type:"uint256"}],name:"ReferralChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"address",name:"addr",type:"address"}],name:"RemovedFromWhitelist",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"address",name:"oldAddress",type:"address"},{indexed:!1,internalType:"address",name:"newAddress",type:"address"}],name:"RetirerAddressChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"royalty_",type:"uint256"}],name:"RoyaltyChanged",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"MAX_BPS",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"TLD_NAME",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"addAddressToWhitelist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newKnsRetirerAddr",type:"address"}],name:"changeKnsRetirerAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxLength",type:"uint256"}],name:"changeMaxDomainNameLength",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_price",type:"uint256"}],name:"changePrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_referral",type:"uint256"}],name:"changeReferralFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_royalty",type:"uint256"}],name:"changeRoyaltyFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_description",type:"string"}],name:"changeTldDescription",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"knsRetirerAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"},{internalType:"address",name:"_domainHolder",type:"address"},{internalType:"address",name:"_referrer",type:"address"},{internalType:"string",name:"_retireMessage",type:"string"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenAddress_",type:"address"},{internalType:"uint256",name:"tokenAmount_",type:"uint256"},{internalType:"address",name:"recipient_",type:"address"}],name:"recoverERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenAddress_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"},{internalType:"address",name:"recipient_",type:"address"}],name:"recoverERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"referralFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"removeAddressFromWhitelist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"royaltyFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tldContract",outputs:[{internalType:"contract IPunkTLD",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"togglePaused",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newTldOwner",type:"address"}],name:"transferTldOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdc",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whitelisted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];const mn={name:"Home",data(){return{chosenDomainName:null,chosenAllowance:null,loading:!1,retirementMessage:null,waiting:!1,wrapperContract:null}},components:{Referral:be},created(){this.chosenAllowance=this.getWrapperTldPrice},computed:x(h(h(h({},b("user",["getUsdcAddress","getUsdcAllowance","getUsdcBalance"])),b("network",["getBlockExplorerBaseUrl"])),b("klima",["getKlimaWrapperAddress","getKlimaTldContract","getWrapperTldPrice","getWrapperPaused"])),{selectedAllowanceTooLow(){return!(Number(this.chosenAllowance)>=Number(this.getWrapperTldPrice))},domainLowerCase(){return this.chosenDomainName.toLowerCase()},hasEnoughUsdcAllowance(){return!!(this.address&&Number(this.getWrapperTldPrice)>0&&Number(this.getUsdcBalance)>0&&Number(this.getUsdcAllowance)>=Number(this.getWrapperTldPrice))},hasUserEnoughUsdc(){return!!(this.address&&Number(this.getWrapperTldPrice)>0&&Number(this.getUsdcBalance)>0&&Number(this.getUsdcBalance)>=Number(this.getWrapperTldPrice))},isNetworkSupported(){return!!(this.isActivated&&this.chainId===137)}}),methods:x(h({},q("user",["addDomainManually","setUsdcAllowance"])),{async approveUsdc(){this.waiting=!0;const e=new T(se),s=new k(this.getUsdcAddress,e,this.signer);try{const o=await s.approve(this.getKlimaWrapperAddress,le(this.chosenAllowance,"mwei")),n=this.toast({component:G,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:m.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()});document.getElementById("approveUsdcModal").click();const a=await o.wait();a.status===1?(this.toast.dismiss(n),this.toast("You have successfully set the allowance! Now proceed with buying the domain.",{type:m.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),this.setUsdcAllowance(this.chosenAllowance),this.waiting=!1):(this.toast.dismiss(n),this.toast("Transaction has failed.",{type:m.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),console.log(a),this.waiting=!1)}catch(o){console.log(o),this.waiting=!1,this.toast(o.message,{type:m.ERROR})}this.waiting=!1},async buyDomain(){this.waiting=!0;const e=this.domainLowerCase+".klima";if(await this.getKlimaTldContract.getDomainHolder(this.domainLowerCase)!==K){this.toast("Sorry, but this domain name is already taken...",{type:m.ERROR}),this.waiting=!1;return}const o=new T(ge),n=new k(this.getKlimaWrapperAddress,o,this.signer);try{let a=localStorage.getItem("referral");(!a||!z(a))&&(a=K);let i;this.retirementMessage?i=this.retirementMessage+" - via www.kns.earth":i="";const r=await n.mint(this.domainLowerCase,this.address,a,i),l=this.toast({component:G,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:m.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+r.hash,"_blank").focus()}),p=await r.wait();p.status===1?(this.toast.dismiss(l),this.toast("You have successfully bought the domain!",{type:m.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+r.hash,"_blank").focus()}),this.addDomainManually(e),this.waiting=!1):(this.toast.dismiss(l),this.toast("Transaction has failed.",{type:m.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+r.hash,"_blank").focus()}),console.log(p),this.waiting=!1)}catch(a){console.log(a),this.waiting=!1,this.toast(a.message,{type:m.ERROR})}this.waiting=!1},changeNetwork(e){const s=this.switchNetwork(e);window.ethereum.request({method:s.method,params:s.params})}}),setup(){const{open:e}=he(),{address:s,chainId:o,isActivated:n,signer:a}=B(),i=L(),{buyNotValid:r}=un(),{switchNetwork:l}=F();return{address:s,buyNotValid:r,chainId:o,isActivated:n,open:e,signer:a,switchNetwork:l,toast:i}}},$=e=>(U("data-v-74034fee"),e=e(),I(),e),pn={class:"d-flex flex-row-wrap overall-container"},hn={class:"box-main"},yn=$(()=>t("div",{class:"lede lede-text"}," Mint your own .klima domain ",-1)),_n=$(()=>t("div",{class:"lede lede-subtitle"}," Each domain comes with a percentage of retired offset carbon ",-1)),fn={class:"lede headline-price"},bn=re('<div class="lights" data-v-74034fee><a class="icons" href="" target="_blank" data-v-74034fee><i class="bi bi-journal-text" data-v-74034fee></i></a><a class="icons" target="_blank" href="https://github.com/GwamiLabs" data-v-74034fee><i class="bi bi-github" data-v-74034fee></i></a><a class="icons" target="_blank" href="https://discord.gg/gwamilabs" data-v-74034fee><i class="bi bi-discord" data-v-74034fee></i></a><a class="icons" target="_blank" href="https://twitter.com/gwamilabs" data-v-74034fee><i class="bi bi-twitter" data-v-74034fee></i></a></div>',1),gn={class:"input-group domain-input input-group-lg"},wn={class:"input-group-text tld-addon"},vn={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},kn=$(()=>t("span",null,".klima",-1)),Tn={class:"input-group domain-input-textarea input-group-lg"},Dn={class:"error"},Nn={key:0},xn={key:0,class:"btn btn-primary buy-button",disabled:!0},Cn={key:0},An=["disabled"],Sn=$(()=>t("span",null,"Your USDC balance is too low",-1)),$n=[Sn],Un=["disabled"],In={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},En=$(()=>t("span",null,"Approve USDC",-1)),Bn=["disabled"],Mn={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},Rn=$(()=>t("span",null,"Buy domain",-1)),On={key:5,class:"buy-button"},Pn={key:6,class:"mint-warning"},Fn=$(()=>t("span",null,"Important: Before minting, remember to complete 2 transactions.",-1)),Ln=$(()=>t("br",null,null,-1)),Kn=$(()=>t("span",null,"1. Approve",-1)),Wn=$(()=>t("br",null,null,-1)),Vn=$(()=>t("span",null,"2. Buy Domain",-1)),Hn=[Fn,Ln,Kn,Wn,Vn],jn=$(()=>t("div",{class:"dropdown-spacer"},null,-1)),qn={class:"modal fade",id:"approveUsdcModal",tabindex:"-1","aria-labelledby":"approveUsdcModalLabel","aria-hidden":"true","modal-dialog-centered":""},Jn={class:"modal-dialog"},Yn={class:"modal-content"},Gn=$(()=>t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"approveUsdcModalLabel"},"Approve USDC"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Xn={class:"modal-body"},zn={class:"mb-3"},Qn=u(" Approval for "),Zn=u(" USDC. "),ei={class:"modal-footer"},ti=["disabled"],si={key:0},ai={key:1},ni=$(()=>t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1));function ii(e,s,o,n,a,i){const r=v("Referral");return d(),c(M,null,[t("div",pn,[t("div",hn,[yn,_n,t("div",fn,_(e.getWrapperTldPrice)+" USDC per domain ",1),bn,t("div",gn,[R(t("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>a.chosenDomainName=l),placeholder:"enter domain name",type:"text",class:"form-control text-end","aria-label":"Text input with dropdown button"},null,512),[[O,a.chosenDomainName]]),t("span",wn,[a.loading?(d(),c("span",vn)):f("",!0),kn])]),t("div",Tn,[R(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=l=>a.retirementMessage=l),maxlength:"500",placeholder:`Additional perk:
Write a love letter to the planet while retiring your carbon offsets here
(max 500 characters)`,type:"text",rows:"3",class:"form-control text-start"},null,512),[[O,a.retirementMessage]])]),t("p",Dn,[n.buyNotValid(a.chosenDomainName).invalid?(d(),c("small",Nn,[t("em",null,_(n.buyNotValid(a.chosenDomainName).message),1)])):f("",!0)]),n.isActivated&&e.getWrapperPaused?(d(),c("button",xn,[e.getWrapperPaused?(d(),c("span",Cn,"Buying paused")):f("",!0)])):f("",!0),n.isActivated&&i.isNetworkSupported&&!e.getWrapperPaused&&!i.hasUserEnoughUsdc?(d(),c("button",{key:1,class:"btn btn-primary buy-button",onClick:s[2]||(s[2]=(...l)=>i.approveUsdc&&i.approveUsdc(...l)),disabled:a.waiting||n.buyNotValid(a.chosenDomainName).invalid||!i.hasUserEnoughUsdc},$n,8,An)):f("",!0),n.isActivated&&i.isNetworkSupported&&!e.getWrapperPaused&&!i.hasEnoughUsdcAllowance&&i.hasUserEnoughUsdc?(d(),c("button",{key:2,"data-bs-toggle":"modal","data-bs-target":"#approveUsdcModal",class:"btn btn-primary buy-button",disabled:a.waiting||n.buyNotValid(a.chosenDomainName).invalid||!i.hasUserEnoughUsdc},[a.waiting?(d(),c("span",In)):f("",!0),En],8,Un)):f("",!0),n.isActivated&&i.isNetworkSupported&&!e.getWrapperPaused&&i.hasEnoughUsdcAllowance&&i.hasUserEnoughUsdc?(d(),c("button",{key:3,class:"btn btn-primary buy-button",onClick:s[3]||(s[3]=(...l)=>i.buyDomain&&i.buyDomain(...l)),disabled:a.waiting||n.buyNotValid(a.chosenDomainName).invalid||!i.hasUserEnoughUsdc},[a.waiting?(d(),c("span",Mn)):f("",!0),Rn],8,Bn)):f("",!0),n.isActivated?f("",!0):(d(),c("button",{key:4,class:"btn btn-primary buy-button",onClick:s[4]||(s[4]=(...l)=>n.open&&n.open(...l))},"Connect wallet")),n.isActivated&&!i.isNetworkSupported?(d(),c("div",On,[t("button",{class:"btn btn-primary buy-button",onClick:s[5]||(s[5]=l=>i.changeNetwork("Polygon"))},"Switch to Polygon")])):f("",!0),n.isActivated&&i.isNetworkSupported?(d(),c("div",Pn,Hn)):f("",!0),n.isActivated?(d(),ye(r,{key:7})):f("",!0)]),jn]),t("div",qn,[t("div",Jn,[t("div",Yn,[Gn,t("div",Xn,[t("div",zn,[t("p",null," If you plan to mint multiple domains, consider giving the minting contract a higher USDC approval. With each domain buy, the total approval amount is reduced by "+_(e.getWrapperTldPrice)+" USDC. (Worry not, redundant approval amount can later be reduced to 0.) ",1),Qn,R(t("input",{type:"text",id:"recipient-name","onUpdate:modelValue":s[6]||(s[6]=l=>a.chosenAllowance=l)},null,512),[[O,a.chosenAllowance]]),Zn])]),t("div",ei,[t("button",{type:"button",onClick:s[7]||(s[7]=(...l)=>i.approveUsdc&&i.approveUsdc(...l)),class:"btn btn-secondary",disabled:i.selectedAllowanceTooLow},[i.selectedAllowanceTooLow?f("",!0):(d(),c("span",si,"Approve USDC")),i.selectedAllowanceTooLow?(d(),c("span",ai,"Approval lower than domain price")):f("",!0)],8,ti),ni])])])])],64)}var oi=D(mn,[["render",ii],["__scopeId","data-v-74034fee"]]),ri="/assets/kns-contracts-schema.98965f42.png";const li={name:"HowItWorks"},N=e=>(U("data-v-3bf41fad"),e=e(),I(),e),di={class:"container"},ci=N(()=>t("h1",{class:"text-center"},"How it works",-1)),ui={class:"row mt-3"},mi={class:"col-md-8 offset-md-2"},pi=N(()=>t("h3",null,"TLD Factories",-1)),hi=N(()=>t("p",null," Each factory has a TLD template that defines its operation logic. Currently, there's only one factory contract which allows for one-time TLD and domain purchases. ",-1)),yi=N(()=>t("p",null," This means that these domains never expire (holders can hold them forever). ",-1)),_i=N(()=>t("h3",null,"Restricted TLD names",-1)),fi=N(()=>t("p",null," TLD factories need to communicate in order to avoid TLD collision (meaning two factories producing the same TLD). ",-1)),bi=N(()=>t("p",null," In order to prevent collisions, there's a contract called PunkForbiddenTlds which has a list of already used or restricted TLD names (.eth is an example of a forbidden TLD name, because it's used in ENS). ",-1)),gi=N(()=>t("h3",null,"TLD contracts",-1)),wi=N(()=>t("p",null," A TLD is minted from a TLD Factory. The TLD owner can set domain prices and can stop domain sales. ",-1)),vi=N(()=>t("p",null,[t("ul",null,[t("li",null,[u("Example of a TLD: "),t("strong",null,".klima")]),t("li",null,[u("Example of a domain: "),t("strong",null,"timmy.klima")])])],-1)),ki=N(()=>t("p",null," The TLD owner cannot confiscate domain from its holder, just like Factory owner cannot confiscate a TLD from its owner. Factory owner can only set a royalty in the TLD contract and nothing else. ",-1)),Ti=N(()=>t("h3",null,"Domains",-1)),Di=N(()=>t("p",null," A domain can only be held by one address, but one address can hold many domains. ",-1)),Ni=N(()=>t("p",null,[u("A domain can hold many pieces of data: "),t("ul",null,[t("li",null,"The holder's address (by default)"),t("li",null,"Profile picture (an NFT that the user owns)"),t("li",null,"URL (like user's homepage or similar; this comes handy together with the Klima Domains browser plugin)"),t("li",null,"Custom data such as a Twitter handle, description, etc.")])],-1)),xi=N(()=>t("p",null," Each domain is an ERC-721 NFT and can be sold on NFT marketplaces. ",-1)),Ci=N(()=>t("h3",null,"Auto Retiring Domain",-1)),Ai=N(()=>t("img",{class:"img-fluid mb-4",src:ri,width:"800"},null,-1)),Si=u("For more info "),$i=u("click here"),Ui=u(".");function Ii(e,s,o,n,a,i){const r=v("router-link");return d(),c("div",di,[ci,t("div",ui,[t("div",mi,[pi,hi,yi,_i,fi,bi,gi,wi,vi,ki,Ti,Di,Ni,xi,Ci,Ai,t("p",null,[Si,y(r,{to:"/about"},{default:g(()=>[$i]),_:1}),Ui])])])])}var Ei=D(li,[["render",Ii],["__scopeId","data-v-3bf41fad"]]);const Bi={name:"MyDomain",props:["domain"],computed:h(h({},b("network",["getChainId"])),b("user",["getUserSelectedName"])),methods:x(h(h({},ie("user",["fetchSelectedNameData"])),q("user",["setSelectedName"])),{setAsMainName(){this.setSelectedName(this.domain),this.fetchSelectedNameData()}})},Mi=e=>(U("data-v-50d96b92"),e=e(),I(),e),Ri={key:0},Oi=Mi(()=>t("i",{class:"bi bi-check2-circle"},null,-1)),Pi=u(" Default "),Fi=[Oi,Pi];function Li(e,s,o,n,a,i){return d(),c(M,null,[t("td",null,[t("span",null,_(o.domain),1)]),t("td",null,[t("span",{class:"text-click",onClick:s[0]||(s[0]=r=>this.$router.push({name:"DomainDetails",params:{domainChain:e.getChainId,tld:o.domain.split(".")[1],domainName:o.domain.split(".")[0]}}))}," Edit domain data ")]),t("td",null,[t("span",{class:"text-click",onClick:s[1]||(s[1]=r=>this.$router.push({name:"TransferDomain",params:{tld:o.domain.split(".")[1],domainName:o.domain.split(".")[0]}}))}," Transfer domain ")]),t("td",null,[e.getUserSelectedName===o.domain?(d(),c("span",Ri,Fi)):(d(),c("span",{key:1,class:"text-click",onClick:s[2]||(s[2]=(...r)=>i.setAsMainName&&i.setAsMainName(...r))}," Set as main name "))])],64)}var Ki=D(Bi,[["render",Li],["__scopeId","data-v-50d96b92"]]);const Wi={name:"Profile",data(){return{existingDomain:null,loading:!1}},components:{MyDomain:Ki,Referral:be,Sidebar:Y},computed:x(h(h(h({},b("user",["getUserAddress","getUserBalance","getUserAllDomainNames","getUserSelectedNameData"])),b("klima",["getKlimaTldAddress"])),b("user",["getUsdcAddress","getUsdcAllowance","getUsdcBalance","getUsdcContract"])),{customData(){if(this.getUserSelectedNameData)try{return JSON.parse(this.getUserSelectedNameData.data)}catch{return null}return null},domainNotValid(){if(this.existingDomain==="")return!0;if(this.existingDomain===null)return!0;if(this.existingDomain.split(".").length!=2)return!0;if(this.existingDomain.includes(" "))return!0;if(this.existingDomain.includes("%"))return!0;if(this.existingDomain.includes("&"))return!0;if(this.existingDomain.includes("?"))return!0;if(this.existingDomain.includes("#"))return!0;if(!this.existingDomain.includes(".klima"))return!0}}),methods:x(h({},q("user",["addDomainManually"])),{async addExistingDomain(){const e=this.existingDomain.toLowerCase(),s=e.split("."),o=new T(W),a=await new k(this.getKlimaTldAddress,o,this.signer).getDomainHolder(s[0]);String(a)===String(this.address)?(this.addDomainManually(e),this.toast("Domain successfully added.",{type:m.SUCCESS})):this.toast("This domain is not owned by your currently connected address.",{type:m.ERROR})}}),setup(){const{address:e,isActivated:s,signer:o}=B(),n=L(),{getFallbackProvider:a}=F();return{address:e,getFallbackProvider:a,isActivated:s,signer:o,toast:n}}},V=e=>(U("data-v-5be8e508"),e=e(),I(),e),Vi={class:"row"},Hi={class:"col-md-3",id:"sidebar-container"},ji={class:"col-md-9"},qi={key:0,class:"row"},Ji=re('<div class="col-md-12 mb-3" data-v-5be8e508><div class="container text-center" data-v-5be8e508><h3 data-v-5be8e508><i class="bi bi-exclamation-triangle" data-v-5be8e508></i> Not connected <i class="bi bi-exclamation-triangle" data-v-5be8e508></i></h3><p class="text-break" data-v-5be8e508> Please connect with your wallet to see your profile data. </p></div></div>',1),Yi=[Ji],Gi={key:1,class:"row"},Xi={class:"col-md-6 mb-3"},zi={class:"container text-center"},Qi=V(()=>t("h3",null,"Address",-1)),Zi={class:"text-break"},eo={class:"col-md-6 mb-3"},to={class:"container text-center"},so=V(()=>t("h3",null,"Balance",-1)),ao={class:"text-break"},no={class:"row"},io={class:"col-md-12"},oo={class:"container"},ro=V(()=>t("h3",null,"Domains",-1)),lo={class:"table table-hover mt-4 mb-4"},co={key:0},uo=V(()=>t("small",null,[t("em",null,[u(" Don't see your domain here? "),t("span",{class:"span-link","data-bs-toggle":"modal","data-bs-target":"#addDomainModal"}," Add it manually"),u(". ")])],-1)),mo=[uo],po={key:1},ho=u(" No domain? No worries, "),yo=u("buy yourself one here!"),_o={class:"modal fade",id:"addDomainModal",tabindex:"-1","aria-labelledby":"addDomainModalLabel","aria-hidden":"true","modal-dialog-centered":""},fo={class:"modal-dialog"},bo={class:"modal-content"},go=V(()=>t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"addDomainModalLabel"},"Add your existing domain"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),wo={class:"modal-body"},vo={class:"mb-3"},ko=V(()=>t("label",{for:"recipient-name",class:"col-form-label"},"Enter your existing domain:",-1)),To=V(()=>t("small",null,[t("em",null,"No transaction will be made, this is a free query.")],-1)),Do={class:"modal-footer"},No=["disabled"],xo=V(()=>t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1));function Co(e,s,o,n,a,i){const r=v("Sidebar"),l=v("MyDomain"),p=v("router-link"),S=v("Referral");return d(),c(M,null,[t("div",Vi,[t("div",Hi,[y(r)]),t("div",ji,[n.isActivated?f("",!0):(d(),c("div",qi,Yi)),n.isActivated?(d(),c("div",Gi,[t("div",Xi,[t("div",zi,[Qi,t("p",Zi,_(e.getUserAddress),1)])]),t("div",eo,[t("div",to,[so,t("p",ao,[t("span",null,_(e.getUsdcBalance)+" USDC",1)])])])])):f("",!0),t("div",no,[t("div",io,[t("div",oo,[ro,t("table",lo,[t("tbody",null,[(d(!0),c(M,null,Z(e.getUserAllDomainNames,C=>(d(),c("tr",null,[y(l,{domain:C},null,8,["domain"])]))),256))])]),e.getUserSelectedNameData?(d(),c("p",co,mo)):(d(),c("p",po,[ho,y(p,{to:"/"},{default:g(()=>[yo]),_:1})]))])])]),y(S)])]),t("div",_o,[t("div",fo,[t("div",bo,[go,t("div",wo,[t("div",vo,[ko,R(t("input",{type:"text",class:"form-control",id:"recipient-name","onUpdate:modelValue":s[0]||(s[0]=C=>a.existingDomain=C)},null,512),[[O,a.existingDomain]]),To])]),t("div",Do,[t("button",{type:"button",onClick:s[1]||(s[1]=(...C)=>i.addExistingDomain&&i.addExistingDomain(...C)),class:"btn btn-secondary",disabled:i.domainNotValid},"Add domain",8,No),xo])])])])],64)}var Ao=D(Wi,[["render",Co],["__scopeId","data-v-5be8e508"]]);const So={name:"SearchDomains",components:{Sidebar:Y},data(){return{query:null,waiting:!1}},computed:{domainLowerCase(){return this.query.toLowerCase()},notValid(){if(this.query)if(this.query.includes(".")){if(this.query.includes(" "))return!0;if(this.query.includes("%"))return!0;if(this.query.includes("&"))return!0;if(this.query.includes("?"))return!0;if(this.query.includes("#"))return!0;if(this.query.includes("/"))return!0}else return!0;else return!0;return!1}},methods:{async findDomain(){this.waiting=!0;const e=new T(W);if(this.domainLowerCase&&this.domainLowerCase.split(".").length===2){const s=this.domainLowerCase.split(".");for(let o in A)if(A[o]["."+s[1]]){const n=this.getFallbackProvider(Number(o));if(await new k(A[o]["."+s[1]],e,n).getDomainHolder(s[0])!==K){this.$router.push({name:"DomainDetails",params:{domainChain:o,tld:s[1],domainName:s[0]}});return}else{this.toast("This domain name has not been registered yet.",{type:m.INFO}),this.waiting=!1;return}}this.toast("Top-level domain ."+s[1]+" does not exist (if this is a mistake, contact us on Discord).",{type:m.ERROR}),this.waiting=!1;return}else{this.toast("This is not a valid domain.",{type:m.ERROR}),this.waiting=!1;return}}},setup(){const e=L(),{getFallbackProvider:s}=F();return{getFallbackProvider:s,toast:e}}},$o={class:"row"},Uo={class:"col-md-3",id:"sidebar-container"},Io={class:"col-md-9"},Eo={class:"row"},Bo={class:"col-md-12 mb-3"},Mo={class:"container text-center"},Ro=t("h3",null,"Find an existing domain",-1),Oo={class:"row mt-5"},Po={class:"col-md-6 offset-md-3"},Fo=["disabled"],Lo={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Ko=u(" Search ");function Wo(e,s,o,n,a,i){const r=v("Sidebar");return d(),c("div",$o,[t("div",Uo,[y(r)]),t("div",Io,[t("div",Eo,[t("div",Bo,[t("div",Mo,[Ro,t("div",Oo,[t("div",Po,[R(t("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>a.query=l),class:"form-control text-center",placeholder:"Enter a domain name"},null,512),[[O,a.query]])])]),t("button",{class:"btn btn-primary mt-3 mb-5",onClick:s[1]||(s[1]=(...l)=>i.findDomain&&i.findDomain(...l)),disabled:a.waiting||i.notValid},[a.waiting?(d(),c("span",Lo)):f("",!0),Ko],8,Fo)])])])])])}var Vo=D(So,[["render",Wo]]);const Ho={name:"SendTokens",components:{Sidebar:Y},data(){return{domainError:null,filterTokens:null,receiver:null,receiverAddress:null,tokenBalance:0,selectedToken:null,selectedTokenDecimals:null,tokenAmount:null,waiting:!1,validating:!1}},created(){this.getChainId>=1&&(this.selectedToken=Object.keys(this.getTokens)[0],this.tokenBalance=_e(this.balance))},computed:x(h(h({},b("network",["getBlockExplorerBaseUrl","getChainId","getNetworkName","getTokens"])),b("user",["getUserBalance"])),{domainLowerCase(){return this.receiver?this.receiver.toLowerCase():null},formatTokenBalance(){return this.tokenBalance>100?Number(this.tokenBalance).toFixed(2):Number(this.tokenBalance).toFixed(4)},getTokenNames(){if(this.getTokens&&!this.filterTokens)return Object.keys(this.getTokens);if(this.getTokens&&this.filterTokens)return Object.keys(this.getTokens).filter(e=>e.includes(this.filterTokens.toUpperCase()))},notValid(){if(this.receiver)if(this.receiver.includes(".")){if(this.receiver.includes(" "))return!0;if(this.receiver.includes("%"))return!0;if(this.receiver.includes("&"))return!0;if(this.receiver.includes("?"))return!0;if(this.receiver.includes("#"))return!0;if(this.receiver.includes("/"))return!0;if(this.tokenAmount){if(isNaN(this.tokenAmount))return!0;if(Number(this.tokenAmount)<=0)return!0;if(Number(this.tokenAmount)>Number(this.tokenBalance))return!0}else return!0}else return!0;else return!0;return!1}}),methods:{async getTokenBalance(e){const s=this.getTokens[e];if(s==="0x0")this.tokenBalance=_e(this.balance);else{const o=new T(se),n=new k(s,o,this.signer),a=await n.balanceOf(this.address);if(Number(a)>0){const i=await n.decimals();this.selectedTokenDecimals=Number(i),this.tokenBalance=oe(a,this.selectedTokenDecimals)}else this.tokenBalance=0}},selectToken(e){this.selectedToken=e,this.getTokenBalance(e)},send(){this.getTokens[this.selectedToken]==="0x0"?this.sendNativeTokens():this.sendErc20Tokens()},async sendErc20Tokens(){this.waiting=!0;try{const e=this.selectedToken,s=this.tokenAmount,o=this.domainLowerCase,n=le(s,this.selectedTokenDecimals),a=this.getTokens[e],i=new T(se),l=await new k(a,i,this.signer).transfer(this.receiverAddress,n);document.getElementById("closeSendModal").click();const p=this.toast({component:G,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:m.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),S=await l.wait();S.status===1?(this.toast.dismiss(p),this.toast("You have successfully sent "+s+" "+e+" to "+o+"!",{type:m.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),this.waiting=!1,this.getTokenBalance(e)):(this.toast.dismiss(p),this.toast("Transaction has failed.",{type:m.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),console.log(S),this.waiting=!1)}catch(e){this.waiting=!1,console.log(e),this.toast(e.message,{type:m.ERROR})}},async sendNativeTokens(){this.waiting=!0;try{const e=this.selectedToken,s=this.tokenAmount,o=this.domainLowerCase,n=$e(s),a=await this.signer.sendTransaction({to:this.receiverAddress,value:n});document.getElementById("closeSendModal").click();const i=this.toast({component:G,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:m.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),r=await a.wait();r.status===1?(this.toast.dismiss(i),this.toast("You have successfully sent "+s+" "+e+" to "+o+"!",{type:m.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),this.waiting=!1,this.getTokenBalance(e)):(this.toast.dismiss(i),this.toast("Transaction has failed.",{type:m.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),console.log(r),this.waiting=!1)}catch(e){this.waiting=!1,console.log(e),this.toast(e.message,{type:m.ERROR})}},async validateDomainName(){this.validating=!0,this.domainError=null,this.receiverAddress=null;const e=new T(W);try{if(this.domainLowerCase&&this.domainLowerCase.split(".").length===2){const s=this.domainLowerCase.split(".");for(let o in A)if(A[o]["."+s[1]]){const n=this.getFallbackProvider(Number(o)),i=await new k(A[o]["."+s[1]],e,n).getDomainHolder(s[0]);if(i!==K){this.receiverAddress=i,this.validating=!1;return}else{this.domainError="This domain name has not been registered yet.",this.validating=!1;return}break}if(!z(this.recipient)){this.domainError="This TLD does not exist.",this.validating=!1;return}}}catch{this.domainError="You have entered an incorrect domain.",this.validating=!1;return}}},setup(){const{address:e,balance:s,signer:o}=B(),n=L(),{getFallbackProvider:a}=F();return{address:e,balance:s,getFallbackProvider:a,signer:o,toast:n}},watch:{getChainId(){this.getChainId>=1&&(this.selectedToken=Object.keys(this.getTokens)[0],this.tokenBalance=this.getUserBalance)},address(){this.getTokenBalance(this.selectedToken)}}},H=e=>(U("data-v-782d2a53"),e=e(),I(),e),jo={class:"row"},qo={class:"col-md-3",id:"sidebar-container"},Jo={class:"col-md-9"},Yo={class:"row"},Go={class:"col-md-12 mb-3"},Xo={class:"container text-center"},zo=H(()=>t("h3",null,"Send tokens to a domain",-1)),Qo={class:"row mt-5"},Zo={class:"col-md-6 offset-md-3"},er={class:"row mt-4"},tr={class:"col-md-4 offset-md-4"},sr={class:"input-group"},ar={class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},nr={class:"dropdown-menu p-2"},ir={class:"mb-3"},or=["onClick"],rr=u(" Balance: "),lr=["disabled"],dr={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},cr=u(" Send tokens "),ur={class:"modal fade text-start",id:"sendTokensModal",tabindex:"-1","aria-labelledby":"sendTokensModalLabel","aria-hidden":"true"},mr={class:"modal-dialog modal-dialog-centered"},pr={class:"modal-content"},hr={class:"modal-header"},yr={class:"modal-title",id:"sendTokensModalLabel"},_r=H(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),fr={class:"modal-body"},br={class:"row mb-3 mt-4"},gr=H(()=>t("div",{class:"col-sm-3"},[t("strong",null,"Recipient")],-1)),wr={class:"col-sm-9"},vr={key:0,class:"domain-error"},kr={key:0,class:"row mb-3 mt-2"},Tr=H(()=>t("div",{class:"col-sm-3"},[t("strong",null,"Recipient address")],-1)),Dr={class:"col-sm-9"},Nr={class:"text-break"},xr={key:0,class:"domain-error"},Cr={class:"row mb-3 mt-2"},Ar=H(()=>t("div",{class:"col-sm-3"},[t("strong",null,"Amount")],-1)),Sr={class:"col-sm-9"},$r={class:"text-break"},Ur={key:1,class:"row mb-3 mt-2"},Ir=H(()=>t("div",{class:"col-sm-3"},[t("strong",null,"Token address")],-1)),Er={class:"col-sm-9"},Br={class:"text-break"},Mr={class:"row mb-3 mt-2"},Rr=H(()=>t("div",{class:"col-sm-3"},[t("strong",null,"Network")],-1)),Or={class:"col-sm-9"},Pr={class:"text-break"},Fr={class:"modal-footer"},Lr=["disabled"],Kr={key:0},Wr={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Vr={key:2},Hr=H(()=>t("button",{id:"closeSendModal",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1));function jr(e,s,o,n,a,i){const r=v("Sidebar");return d(),c(M,null,[t("div",jo,[t("div",qo,[y(r)]),t("div",Jo,[t("div",Yo,[t("div",Go,[t("div",Xo,[zo,t("div",Qo,[t("div",Zo,[R(t("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>a.receiver=l),class:"form-control text-center",placeholder:"Enter the receiver's domain name"},null,512),[[O,a.receiver]])])]),t("div",er,[t("div",tr,[t("div",sr,[R(t("input",{type:"text",class:"form-control text-end","onUpdate:modelValue":s[1]||(s[1]=l=>a.tokenAmount=l),placeholder:"0.0"},null,512),[[O,a.tokenAmount]]),t("button",ar,_(a.selectedToken),1),t("div",nr,[t("div",ir,[R(t("input",{class:"form-control mb-2",placeholder:"Filter tokens","onUpdate:modelValue":s[2]||(s[2]=l=>a.filterTokens=l)},null,512),[[O,a.filterTokens]]),t("li",null,[(d(!0),c(M,null,Z(i.getTokenNames,l=>(d(),c("button",{class:"dropdown-item",type:"button",onClick:p=>i.selectToken(l)},_(l),9,or))),256))])])])]),t("small",null,[rr,t("span",{id:"balance",onClick:s[3]||(s[3]=l=>a.tokenAmount=a.tokenBalance)},_(i.formatTokenBalance)+" "+_(a.selectedToken),1)])])]),t("button",{class:"btn btn-primary mt-4 mb-5",disabled:i.notValid||a.waiting,onClick:s[4]||(s[4]=(...l)=>i.validateDomainName&&i.validateDomainName(...l)),"data-bs-toggle":"modal","data-bs-target":"#sendTokensModal"},[a.waiting?(d(),c("span",dr)):f("",!0),cr],8,lr)])])])])]),t("div",ur,[t("div",mr,[t("div",pr,[t("div",hr,[t("h5",yr,"Confirm sending "+_(a.selectedToken),1),_r]),t("div",fr,[t("p",null," Please review the data before you send "+_(a.selectedToken)+" to "+_(i.domainLowerCase)+". ",1),t("div",br,[gr,t("div",wr,[t("span",null,_(i.domainLowerCase),1),a.domainError?(d(),c("span",vr,"Error: "+_(a.domainError),1)):f("",!0)])]),a.receiverAddress?(d(),c("div",kr,[Tr,t("div",Dr,[t("span",Nr,_(a.receiverAddress),1),a.receiverAddress==n.address?(d(),c("span",xr,"Error: You are sending tokens to yourself.")):f("",!0)])])):f("",!0),t("div",Cr,[Ar,t("div",Sr,[t("span",$r,_(a.tokenAmount)+" "+_(a.selectedToken),1)])]),e.getTokens[a.selectedToken]!=="0x0"?(d(),c("div",Ur,[Ir,t("div",Er,[t("span",Br,_(e.getTokens[a.selectedToken]),1)])])):f("",!0),t("div",Mr,[Rr,t("div",Or,[t("span",Pr,_(e.getNetworkName),1)])])]),t("div",Fr,[t("button",{type:"button",class:"btn btn-secondary",onClick:s[5]||(s[5]=(...l)=>i.send&&i.send(...l)),disabled:a.waiting||a.domainError||a.validating},[a.validating?(d(),c("span",Kr,"Validating...")):f("",!0),a.validating?(d(),c("span",Wr)):f("",!0),a.validating?f("",!0):(d(),c("span",Vr,"Send "+_(a.selectedToken),1))],8,Lr),Hr])])])])],64)}var qr=D(Ho,[["render",jr],["__scopeId","data-v-782d2a53"]]);const Jr={name:"TransferDomain",props:["tld","domainName"],components:{Sidebar:Y},data(){return{recipient:null,recipientDomain:null,selectedDomain:this.domainName+"."+this.tld,waiting:!1}},computed:h(h({},b("network",["getBlockExplorerBaseUrl"])),b("user",["getUserSelectedName"])),methods:x(h({},ie("user",["removeDomainFromUserDomains"])),{async transfer(){this.waiting=!0;const e=new T(W);if(this.recipient&&this.recipient.split(".").length===2){const s=this.recipient.split(".");for(let o in A)if(A[o]["."+s[1]]){const n=this.getFallbackProvider(Number(o)),i=await new k(A[o]["."+s[1]],e,n).getDomainHolder(s[0]);i!==K?(this.recipientDomain=this.recipient,this.recipient=i):(this.toast("The recipient's domain name "+this.recipient+" does not exist.",{type:m.ERROR}),this.waiting=!1);break}z(this.recipient)||(this.toast("Top-level domain ."+s[1]+" does not exist (if this is a mistake, contact us on Discord).",{type:m.ERROR}),this.waiting=!1)}else this.recipient?z(this.recipient)||(this.toast("This is not a valid recipient address.",{type:m.ERROR}),this.waiting=!1):(this.toast("This is not a valid recipient address or domain name.",{type:m.ERROR}),this.waiting=!1);if(this.recipient&&z(this.recipient)){const s=new k(A[this.chainId]["."+this.tld],e,this.signer),o=await s.domains(this.domainName);try{const n=await s.transferFrom(this.address,this.recipient,o.tokenId.toNumber());if(n){const a=this.toast({component:G,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:m.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+n.hash,"_blank").focus()}),i=await n.wait();i.status===1?(this.toast.dismiss(a),this.toast("You have successfully transferred the domain!",{type:m.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+n.hash,"_blank").focus()}),this.removeDomainFromUserDomains(this.domainName+"."+this.tld),this.waiting=!1):(this.toast.dismiss(a),this.toast("Transaction has failed.",{type:m.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+n.hash,"_blank").focus()}),console.log(i),this.waiting=!1)}}catch(n){console.log(n),this.waiting=!1,this.toast(n.message,{type:m.ERROR})}}}}),setup(){const{address:e,chainId:s,signer:o}=B(),n=L(),{getFallbackProvider:a}=F();return{address:e,chainId:s,getFallbackProvider:a,signer:o,toast:n}}},Yr={class:"row"},Gr={class:"col-md-3",id:"sidebar-container"},Xr={class:"col-md-9"},zr={class:"row"},Qr={class:"col-md-12"},Zr={class:"container text-center"},el=t("h3",null,"Transfer domain",-1),tl={class:"row mt-5"},sl={class:"col-md-6 offset-md-3"},al=["value"],nl={class:"row mt-3"},il={class:"col-md-6 offset-md-3"},ol=["disabled"],rl={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},ll=u(" Transfer ");function dl(e,s,o,n,a,i){const r=v("Sidebar");return d(),c("div",Yr,[t("div",Gr,[y(r)]),t("div",Xr,[t("div",zr,[t("div",Qr,[t("div",Zr,[el,t("div",tl,[t("div",sl,[t("input",{value:o.domainName+"."+o.tld,class:"form-control text-center",readonly:""},null,8,al)])]),t("div",nl,[t("div",il,[R(t("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>a.recipient=l),class:"form-control text-center",placeholder:"Enter recipient address"},null,512),[[O,a.recipient]])])]),t("button",{class:"btn btn-primary mt-3 mb-5",onClick:s[1]||(s[1]=(...l)=>i.transfer&&i.transfer(...l)),disabled:a.waiting},[a.waiting?(d(),c("span",rl)):f("",!0),ll],8,ol)])])])])])}var cl=D(Jr,[["render",dl]]);const ul=[{path:"/",name:"Home",component:oi},{path:"/about",name:"About",component:ps},{path:"/allowance",name:"Allowance",component:zs},{path:"/browser",name:"BrowserExtension",component:oa},{path:"/domain/:domainChain/:tld/:domainName",name:"DomainDetails",component:en,props:!0},{path:"/how",name:"HowItWorks",component:Ei},{path:"/profile",name:"Profile",component:Ao},{path:"/search-domain",name:"SearchDomains",component:Vo},{path:"/send-tokens",name:"SendTokens",component:qr},{path:"/transfer/:tld/:domainName",name:"TransferDomain",component:cl,props:!0},{path:"/:pathMatch(.*)*",name:"404",component:()=>Mt(()=>import("./Error404.fe692382.js"),["assets/Error404.fe692382.js","assets/Error404.cd7e448d.css","assets/vendor.b436ea8d.js"])}],ml=Ue({history:Ie(),routes:ul});var pl={"137":{MATIC:"0x0",ETH:"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619",DAI:"0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063",USDC:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"},"80001":{MATIC:"0x0",AAVE:"0x2b03FB8443A3a338f772C1EE29ACB4AeaA0Bc2ab",DAI:"0xFeBBF3F530A4fB3F0FBBAb9Ce72E4988972f2a08"}};const{chainId:j}=B();var hl={namespaced:!0,state:()=>({networkCurrency:"MATIC",networkName:"Unsupported Network",supportedNetworks:{137:"Polygon"}}),getters:{getBlockExplorerBaseUrl(){if(j.value===137)return"https://polygonscan.com";if(j.value===80001)return"https://mumbai.polygonscan.com"},getChainId(){return j.value},getNetworkCurrency(e){return e.networkCurrency},getNetworkName(e){const s=Object.keys(e.supportedNetworks);return s&&s.includes(String(j.value))?e.networkName:"Unsupported Network"},getSupportedNetworks(e){return e.supportedNetworks},getSupportedNetworkIds(e){return Object.keys(e.supportedNetworks)},getSupportedNetworkNames(e){return Object.values(e.supportedNetworks)},getTokens(e){return pl[String(j.value)]},isNetworkSupported(e){const s=Object.keys(e.supportedNetworks);return!!(s&&s.includes(String(j.value)))}},mutations:{setNetworkData(e){j.value===137?(e.networkName="Polygon",e.networkCurrency="MATIC"):j.value===80001&&(e.networkName="Polygon Testnet",e.networkCurrency="MATIC")}}};const{getFallbackProvider:yl}=F(),{address:P,balance:we,chainId:ae,signer:ce}=B();var _l={namespaced:!0,state:()=>({selectedName:null,selectedNameData:null,selectedNameImageSvg:null,selectedNameKey:null,usdcAddress:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",usdcContract:null,usdcAllowance:0,usdcBalance:0,userAddress:null,userAllDomainNames:[],userDomainNamesKey:null,userShortAddress:null,userBalanceWei:0,userBalance:0}),getters:{getUserAddress(e){return e.userAddress},getUserBalance(e){return e.userBalance},getUserBalanceWei(e){return e.userBalanceWei},getUserAllDomainNames(e){return e.userAllDomainNames},getUserSelectedName(e){return e.selectedName},getUserSelectedNameData(e){return e.selectedNameData},getUserSelectedNameImageSvg(e){return e.selectedNameImageSvg},getUserShortAddress(e){return e.userShortAddress},getUsdcAddress(e){return e.usdcAddress},getUsdcAllowance(e){return e.usdcAllowance},getUsdcBalance(e){return e.usdcBalance},getUsdcContract(e){return e.usdcContract}},mutations:{addDomainManually(e,s){let o=[];if(P.value){e.userDomainNamesKey="userDomainNames"+String(ae.value)+String(ee(P.value)),e.selectedNameKey="selectedName"+String(ae.value)+String(ee(P.value)),localStorage.getItem(e.userDomainNamesKey)&&(o=JSON.parse(localStorage.getItem(e.userDomainNamesKey))),o.includes(s)||o.push(s);for(let n of o)e.userAllDomainNames.includes(n)||e.userAllDomainNames.push(n);localStorage.setItem(e.userDomainNamesKey,JSON.stringify(o))}},setUserData(e){e.userAddress=P.value,e.userShortAddress=ee(P.value),e.userBalanceWei=we.value,e.userBalance=Ee(we.value)},setDefaultName(e,s){e.userAllDomainNames.includes(s)||e.userAllDomainNames.push(s)},setSelectedName(e,s){e.selectedName=s,localStorage.setItem(e.selectedNameKey,e.selectedName),localStorage.setItem("connected","metamask")},setSelectedNameKey(e,s){e.selectedNameKey=s},setSelectedNameData(e,s){e.selectedNameData=s},setSelectedNameImageSvg(e,s){e.selectedNameImageSvg=s},setUserDomainNamesKey(e,s){e.userDomainNamesKey=s},setUsdcAllowance(e,s){e.usdcAllowance=s},setUsdcBalance(e,s){e.usdcBalance=s},setUsdcContract(e,s){e.usdcContract=s},setUserAllDomainNames(e,s){e.userAllDomainNames=s}},actions:{async fetchUserDomainNames({dispatch:e,commit:s,state:o,rootState:n,rootGetters:a},i){let r=[],l=null,p=null;if(P.value){l="userDomainNames"+String(ae.value)+String(ee(P.value)),p="selectedName"+String(ae.value)+String(ee(P.value)),s("setSelectedNameKey",p),s("setUserDomainNamesKey",l),i&&(localStorage.getItem(p)&&localStorage.getItem(p)!==String(null)?s("setSelectedName",localStorage.getItem(p)):(s("setSelectedName",null),s("setSelectedNameData",null),s("setSelectedNameImageSvg",null)),s("setUserAllDomainNames",[])),localStorage.getItem(l)&&(r=JSON.parse(localStorage.getItem(l)));for(let X of r)s("setDefaultName",X);const S=new T(a["punk/getTldAbi"]),E=await new k(a["klima/getKlimaTldAddress"],S,ce.value).defaultNames(P.value);E&&(s("setDefaultName",E+n.klima.klimaTldName),r.includes(E+n.klima.klimaTldName)||r.push(E+n.klima.klimaTldName),o.selectedName||s("setSelectedName",E+n.klima.klimaTldName)),localStorage.getItem(p)&&localStorage.getItem(p)!==String(null)?s("setSelectedName",localStorage.getItem(p)):localStorage.setItem(p,o.selectedName),localStorage.setItem(l,JSON.stringify(r)),e("fetchSelectedNameData")}},async fetchSelectedNameData({commit:e,state:s,rootGetters:o}){if(s.selectedName){const a=s.selectedName.split(".")[0];if(a){const i=new T(o["punk/getTldAbi"]),r=new k(o["klima/getKlimaTldAddress"],i,ce.value),l=await r.domains(a);e("setSelectedNameData",l);let p=await r.tokenURI(l.tokenId),S=!1;if(l.data){const C=JSON.parse(l.data);if(C.imgAddress&&!C.imgAddress.startsWith("0x"))e("setSelectedNameImageSvg",C.imgAddress.replace("ipfs://","https://ipfs.io/ipfs/")),S=!0;else if(C.imgAddress){const E=new T(["function tokenURI(uint256 tokenId) public view returns (string memory)"]);p=await new k(C.imgAddress,E,ce.value).tokenURI(C.imgTokenId)}if(p.includes("ipfs://")&&(p=p.replace("ipfs://","https://ipfs.io/ipfs/")),p.includes("http")){const X=await(await fetch(p)).json();X&&X.image?(e("setSelectedNameImageSvg",X.image.replace("ipfs://","https://ipfs.io/ipfs/")),S=!0):e("setSelectedNameImageSvg",null)}}if(p&&!S){const C=atob(p.substring(29)),E=JSON.parse(C);E&&E.image?e("setSelectedNameImageSvg",E.image):e("setSelectedNameImageSvg",null)}}}},async fetchUserUsdcData({commit:e,state:s,rootGetters:o}){const n=yl(137),a=new T(se),i=new k(s.usdcAddress,a,n);if(e("setUsdcContract",i),P.value){const r=await i.allowance(P.value,o["klima/getKlimaWrapperAddress"]),l=oe(r,"mwei");e("setUsdcAllowance",l);const p=await i.balanceOf(P.value),S=oe(p,"mwei");e("setUsdcBalance",S)}},async removeDomainFromUserDomains({commit:e,state:s},o){if(ae.value&&localStorage.getItem(s.userDomainNamesKey)){const n=JSON.parse(localStorage.getItem(s.userDomainNamesKey));s.userAllDomainNames=[];let a=[];for(let i of n)i!=o&&(a.push(i),s.userAllDomainNames.push(i));localStorage.setItem(s.userDomainNamesKey,JSON.stringify(a)),localStorage.getItem(s.selectedNameKey)&&localStorage.getItem(s.selectedNameKey)==o&&(a.length>0&&e("setSelectedName",a[0]),e("setSelectedName",null))}}}},fl={namespaced:!0,getters:{getTldAbi(){return W}}};const{getFallbackProvider:ve}=F();var bl={namespaced:!0,state:()=>({klimaTldAddress:A["137"][".klima"],klimaTldName:".klima",tldAddress:"0xe8b97542A433e7eCc7bB791872af04DF02A1a6E4",tldContract:null,wrapperAddress:"0xf7E89ED8106cBa1335e04837E59a28ae1A3D580c",wrapperContract:null,wrapperPaused:!0,wrapperTldPrice:null}),getters:{getKlimaTldAddress(e){return e.klimaTldAddress},getKlimaTldContract(e){return e.tldContract},getKlimaTldName(e){return e.klimaTldName},getKlimaWrapperAddress(e){return e.wrapperAddress},getWrapperContract(e){return e.wrapperContract},getWrapperPaused(e){return e.wrapperPaused},getWrapperTldPrice(e){return e.wrapperTldPrice}},mutations:{setTldContract(e){let s=ve(137);const o=new T(W);e.tldContract=new k(e.tldAddress,o,s)},setWrapperContract(e,s){e.wrapperContract=s},setWrapperPaused(e,s){e.wrapperPaused=s},setWrapperTldPrice(e,s){e.wrapperTldPrice=s}},actions:{async fetchWrapperContractData({commit:e,state:s}){let o=ve(137);const n=new T(ge),a=new k(s.wrapperAddress,n,o);e("setWrapperContract",a);const i=await a.paused();e("setWrapperPaused",i);const r=await a.price(),l=oe(r,"mwei");e("setWrapperTldPrice",l)}}};const gl=Be({modules:{network:hl,user:_l,punk:fl,klima:bl}});const ne=Me(It),wl={timeout:5e3,hideProgressBar:!0,closeButton:"button",position:Re.TOP_LEFT,toastClassName:"punk-toast-class",closeOnClick:!1,toastDefaults:{[m.INFO]:{timeout:!1,icon:!1}}};ne.use(ml);ne.use(gl);ne.use(Oe,{infuraId:""});ne.use(Pe,wl);ne.mount("#app");export{D as _};
