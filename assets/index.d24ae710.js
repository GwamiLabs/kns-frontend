var xe=Object.defineProperty,De=Object.defineProperties;var Ce=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var de=(e,t,o)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,m=(e,t)=>{for(var o in t||(t={}))Ne.call(t,o)&&de(e,o,t[o]);if(le)for(var o of le(t))Ae.call(t,o)&&de(e,o,t[o]);return e},x=(e,t)=>De(e,Ce(t));import{J as Se,F as Ue,m as b,u as ce,a as I,b as ue,r as v,c,d as s,e as f,w as k,t as y,f as E,g as Q,p as A,h as S,o as d,i as _,j as pe,k as h,l as me,n as se,q as H,I as w,C as g,A as O,s as G,v as Ie,x as ne,T as u,y as P,z as $,B,D as he,E as ae,G as Ee,H as $e,K as Be,L as z,M as Me,N as Re,O as Pe,P as Oe,V as Fe,Q as We}from"./vendor.b436ea8d.js";const Ke=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=o(a);fetch(a.href,i)}};Ke();function R(){function e(n){return n===137?"Polygon":n===10?"Optimism":n===69?"Optimism Testnet":n===77?"Gnosis Testnet":n===100?"Gnosis Chain":n===137?"Polygon":n===42161?"Arbitrum":n===421611?"Arbitrum Testnet":n===80001?"Polygon Testnet":n===3?"Ropsten":n===4?"Rinkeby":"Unsupported Network"}function t(n){let a;if(n===137?a=["https://polygon-rpc.com/","https://polygon-mainnet.g.alchemy.com/v2/nRv9l5eQT_J9m7c5PsEkdM7d6awIcijw"]:n===80001?a=["https://matic-mumbai.chainstacklabs.com"]:n===10?a=["https://mainnet.optimism.io"]:n===100?a=["https://rpc.xdaichain.com","https://rpc.gnosischain.com"]:n===42161&&(a=["https://arb1.arbitrum.io/rpc"]),a){const i=a.map(r=>new Se(r));return new Ue(i,1)}else return null}function o(n){let a,i;return n=="Ropsten"?(a="wallet_switchEthereumChain",i=[{chainId:"0x3"}]):n=="Rinkeby"?(a="wallet_switchEthereumChain",i=[{chainId:"0x4"}]):n=="Polygon Testnet"?(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://mumbai.polygonscan.com"],chainId:"0x13881",chainName:"Mumbai Testnet",nativeCurrency:{decimals:18,name:"Matic",symbol:"MATIC"},rpcUrls:["https://matic-mumbai.chainstacklabs.com"]}]):n=="Arbitrum Testnet"?(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://testnet.arbiscan.io"],chainId:"0x66EEB",chainName:"Arbitrum Testnet",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:["https://rinkeby.arbitrum.io/rpc"]}]):n=="Arbitrum"?(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://arbiscan.io"],chainId:"0xA4B1",chainName:"Arbitrum One",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:["https://arb1.arbitrum.io/rpc"]}]):n=="Optimism"?(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://optimistic.etherscan.io/"],chainId:"0xA",chainName:"Optimism",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:["https://mainnet.optimism.io"]}]):n=="Optimism Testnet"?(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://kovan-optimistic.etherscan.io/"],chainId:"0x45",chainName:"Optimism Testnet",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:["https://kovan.optimism.io"]}]):n=="Polygon"?(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://polygonscan.com"],chainId:"0x89",chainName:"Polygon PoS Chain",nativeCurrency:{decimals:18,name:"MATIC",symbol:"MATIC"},rpcUrls:["https://polygon-rpc.com/"]}]):n=="Gnosis Testnet"?(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://blockscout.com/poa/sokol"],chainId:"0x4D",chainName:"Gnosis Testnet",nativeCurrency:{decimals:18,name:"SPOA",symbol:"SPOA"},rpcUrls:["https://sokol.poa.network"]}]):n=="Gnosis Chain"&&(a="wallet_addEthereumChain",i=[{blockExplorerUrls:["https://blockscout.com/xdai/mainnet"],chainId:"0x64",chainName:"Gnosis Chain",nativeCurrency:{decimals:18,name:"XDAI",symbol:"XDAI"},rpcUrls:["https://rpc.gnosischain.com"]}]),{method:a,params:i}}return{getChainName:e,getFallbackProvider:t,switchNetwork:o}}var Le="/assets/kns-white-logo-big.6a4a0387.png";var T=(e,t)=>{for(const[o,n]of t)e[o]=n;return e};const Ve={name:"Navbar",computed:x(m(m({},b("user",["getUserShortAddress","getUserSelectedName"])),b("network",["getNetworkName","getSupportedNetworks","getSupportedNetworkNames"])),{getNameOrAddress(){return this.getUserSelectedName?this.getUserSelectedName:this.getUserShortAddress}}),methods:{changeNetwork(e){const t=this.switchNetwork(e);window.ethereum.request({method:t.method,params:t.params})},logout(){this.disconnect(),localStorage.clear(),localStorage.setItem("connected","null")},openUrl(e){window.open(e,"_blank").focus()}},setup(){const{open:e}=ue(),{disconnect:t}=ce(),{isActivated:o}=I(),{switchNetwork:n}=R();return{isActivated:o,disconnect:t,open:e,switchNetwork:n}}},ye=e=>(A("data-v-439da593"),e=e(),S(),e),He={class:"navbar sticky-top navbar-expand-lg navbar-dark"},je={class:"container-fluid"},qe=ye(()=>s("img",{src:Le,alt:"",width:"30",class:"d-inline-block align-bottom navbar-img"},null,-1)),Je=_(" Klima Name Service "),Ye=ye(()=>s("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[s("span",{class:"navbar-toggler-icon"})],-1)),Ge={class:"collapse navbar-collapse",id:"navbarSupportedContent"},Xe={class:"d-flex ms-auto"},Qe={key:0,class:""},ze={class:"btn-group mx-2"},Ze={class:"btn btn-primary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},et={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},tt=["onClick"],st={class:"btn-group mx-2"},at={class:"btn btn-primary dropdown-toggle",type:"button",id:"dropdownMenuButton2","data-bs-toggle":"dropdown","aria-expanded":"false"},nt={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton2"},it=_("Profile"),ot=_("Buy domain"),rt=_("Search domain"),lt=_("Send tokens"),dt=_("About"),ct=_("How it works"),ut=_("Browser extension");function pt(e,t,o,n,a,i){const r=v("router-link");return d(),c("nav",He,[s("div",je,[f(r,{to:"/",class:"navbar-brand"},{default:k(()=>[qe,Je]),_:1}),Ye,s("div",Ge,[s("div",Xe,[n.isActivated?(d(),c("div",Qe,[s("div",ze,[s("button",Ze,y(e.getNetworkName),1),s("ul",et,[s("li",null,[(d(!0),c(E,null,Q(e.getSupportedNetworkNames,l=>(d(),c("span",{class:"dropdown-item",onClick:p=>i.changeNetwork(l)},y(l),9,tt))),256))])])]),s("div",st,[s("button",at,y(i.getNameOrAddress),1),s("ul",nt,[f(r,{tag:"li",class:"dropdown-item",to:"/profile"},{default:k(()=>[it]),_:1}),f(r,{tag:"li",class:"dropdown-item",to:"/"},{default:k(()=>[ot]),_:1}),f(r,{tag:"li",class:"dropdown-item",to:"/search-domain"},{default:k(()=>[rt]),_:1}),f(r,{tag:"li",class:"dropdown-item",to:"/send-tokens"},{default:k(()=>[lt]),_:1}),f(r,{tag:"li",class:"dropdown-item",to:"/about"},{default:k(()=>[dt]),_:1}),f(r,{tag:"li",class:"dropdown-item",to:"/how"},{default:k(()=>[ct]),_:1}),f(r,{tag:"li",class:"dropdown-item",to:"/browser"},{default:k(()=>[ut]),_:1}),s("li",{class:"dropdown-item",onClick:t[0]||(t[0]=(...l)=>i.logout&&i.logout(...l))},"Disconnect")])])])):(d(),c("button",{key:1,class:"btn btn-primary",onClick:t[1]||(t[1]=(...l)=>n.open&&n.open(...l))},"Connect wallet"))])])])])}var mt=T(Ve,[["render",pt],["__scopeId","data-v-439da593"]]);const ht={name:"Footer",computed:m({},b("network",["isNetworkSupported"])),setup(){const{isActivated:e}=I();return{isActivated:e}}},ie=e=>(A("data-v-f3b136f2"),e=e(),S(),e),yt={class:"container-fluid text-center mt-3"},ft=_("Profile"),_t={key:1},bt=_("About KNS"),gt=ie(()=>s("span",null," | ",-1)),wt=_("How it works"),vt=ie(()=>s("span",null," | ",-1)),kt=ie(()=>s("a",{target:"_blank",href:"https://punk.domains"},"Powered by Punk Domains",-1)),Tt=me('<div class="container-fluid text-center" data-v-f3b136f2><a class="icons" href="" target="_blank" data-v-f3b136f2><i class="bi bi-journal-text" data-v-f3b136f2></i></a><a class="icons" target="_blank" href="https://github.com/GwamiLabs" data-v-f3b136f2><i class="bi bi-github" data-v-f3b136f2></i></a><a class="icons" target="_blank" href="https://discord.gg/" data-v-f3b136f2><i class="bi bi-discord" data-v-f3b136f2></i></a><a class="icons" target="_blank" href="https://twitter.com/" data-v-f3b136f2><i class="bi bi-twitter" data-v-f3b136f2></i></a></div>',1);function xt(e,t,o,n,a,i){const r=v("router-link");return d(),c(E,null,[s("div",yt,[n.isActivated&&e.isNetworkSupported?(d(),pe(r,{key:0,to:"/profile"},{default:k(()=>[ft]),_:1})):h("",!0),n.isActivated&&e.isNetworkSupported?(d(),c("span",_t," | ")):h("",!0),f(r,{to:"/about"},{default:k(()=>[bt]),_:1}),gt,f(r,{to:"/how"},{default:k(()=>[wt]),_:1}),vt,kt]),Tt],64)}var Dt=T(ht,[["render",xt],["__scopeId","data-v-f3b136f2"]]),C={"10":{".wagmi":"0xC3E8922657686EC63eaaa9FC1Fe06826802e7e0f",".optimism":"0xBca24d86e4Ad1e011278FaEFc4fF191a731411EC",".spartan":"0x3490C9817C45A2a394b11A3807f58a8325235aE0",".l2":"0x9A7657d1593032C75d70950707870c3cC7ca45DC"},"69":{".optitest":"0xAc63b035e63d280c408549f5AFA64be7469470de",".l2test":"0xB5B8AF8199777d471c0320BC11022433df6D100e"},"77":{".testdao":"0x110cc3f64cdf8ffadc785dfa53906bcff76b3846"},"100":{".gnosis":"0xC3E8922657686EC63eaaa9FC1Fe06826802e7e0f",".xdai":"0xbca24d86e4ad1e011278faefc4ff191a731411ec",".bright":"0x3490c9817c45a2a394b11a3807f58a8325235ae0"},"137":{".web3":"0xb6Cf2874588d0fdFAf9d1b5E254ee6C49110C68B",".polygon":"0xa450bc33d0940d25fB0961c592fb440Fa63ABE03",".ape":"0x794a8390D94E32b086908D2bA9D66300aA163C62",".poly":"0x70Ac07C50131b7bb2c8Bd9466D8d2add30B7759f",".degen":"0xC4999A3e91ef87c9EC5d8186D02B77F9A62458b9",".klima":"0xe8b97542A433e7eCc7bB791872af04DF02A1a6E4"},"42161":{".arbi":"0xe97456E0fB121F65422F43ccbd4A07a0e269B534",".arbitrum":"0x337EB5061943ECd247649d58D35Dbab0b40D67E0"},"80001":{".polytest":"0xebED27271230E8ED18fD3Ef96F0221D9DBC93750"},"421611":{".arbitest":"0xC6a628b1FF1aD4e304bEeACAff915559786deA2e"}},F=[{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"address",name:"_tldOwner",type:"address"},{internalType:"uint256",name:"_domainPrice",type:"uint256"},{internalType:"bool",name:"_buyingEnabled",type:"bool"},{internalType:"uint256",name:"_royalty",type:"uint256"},{internalType:"address",name:"_factoryAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"}],name:"DataChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"string",name:"defaultDomain",type:"string"}],name:"DefaultDomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"string",name:"fullDomainName",type:"string"}],name:"DomainCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"buyingEnabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_maxLength",type:"uint256"}],name:"changeNameMaxLength",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_price",type:"uint256"}],name:"changePrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_referral",type:"uint256"}],name:"changeReferralPayment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_royalty",type:"uint256"}],name:"changeRoyalty",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"defaultNames",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"domainIdsNames",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"domains",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"holder",type:"address"},{internalType:"string",name:"data",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"},{internalType:"string",name:"_data",type:"string"}],name:"editData",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"}],name:"editDefaultDomain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"factoryAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"}],name:"getDomainData",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"}],name:"getDomainHolder",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getFactoryOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"},{internalType:"address",name:"_domainHolder",type:"address"},{internalType:"address",name:"_referrer",type:"address"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nameMaxLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"},{internalType:"address",name:"_domainHolder",type:"address"}],name:"ownerMintDomain",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"referral",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"royalty",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"toggleBuyingDomains",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];const Ct={components:{Navbar:mt,Footer:Dt},created(){this.fetchReferrer(),this.setTldContract(),this.fetchWrapperContractData(),localStorage.getItem("klimav1")||(localStorage.clear(),localStorage.setItem("connected","null"),localStorage.setItem("klimav1","true"))},computed:m({},b("user",["getUserSelectedName"])),methods:x(m(m(m(m(m({},se("user",["fetchUserDomainNames","fetchUserUsdcData"])),se("klima",["fetchWrapperContractData"])),H("user",["setUserData"])),H("network",["setNetworkData"])),H("klima",["setTldContract"])),{fetchAllData(){this.setUserData(),this.fetchUserUsdcData(),this.setNetworkData()},async fetchReferrer(){const t=new URLSearchParams(window.location.search).get("ref");if(t&&t.split(".").length===2){const o=t.split(".");for(let n in C)if(C[n]["."+o[1]]){const a=this.getFallbackProvider(Number(n)),i=new w(F),l=await new g(C[n]["."+o[1]],i,a).getDomainHolder(o[0]);l!==O&&localStorage.setItem("referral",l);break}}else t&&G(t)&&localStorage.setItem("referral",t)}}),setup(){const{address:e,chainId:t,isActivated:o}=I(),{connect:n}=ce(),{getFallbackProvider:a}=R();return Ie(()=>{!o.value&&localStorage.getItem("connected")=="metamask"&&n("metamask")}),{address:e,chainId:t,connect:n,getFallbackProvider:a,isActivated:o}},watch:{address(e,t){e&&(this.setUserData(),this.fetchUserUsdcData(),this.fetchUserDomainNames(!0))},chainId(e,t){!this.isActivated&&localStorage.getItem("connected")=="metamask"&&this.connect("metamask"),this.chainId>=1&&(this.fetchAllData(),this.fetchUserDomainNames(!0))},isActivated(e,t){!localStorage.getItem("connected")&&localStorage.getItem("connected")!=="null"&&localStorage.setItem("connected","metamask")}}},Nt={class:"main-container"};function At(e,t,o,n,a,i){const r=v("Navbar"),l=v("router-view"),p=v("Footer"),N=v("vdapp-board");return d(),c(E,null,[f(r),s("div",Nt,[f(l),f(p)]),f(N)],64)}var St=T(Ct,[["render",At],["__scopeId","data-v-50c63647"]]);const Ut="modulepreload",fe={},It="/",Et=function(t,o){return!o||o.length===0?t():Promise.all(o.map(n=>{if(n=`${It}${n}`,n in fe)return;fe[n]=!0;const a=n.endsWith(".css"),i=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const r=document.createElement("link");if(r.rel=a?"stylesheet":Ut,a||(r.as="script",r.crossOrigin=""),r.href=n,document.head.appendChild(r),a)return new Promise((l,p)=>{r.addEventListener("load",l),r.addEventListener("error",p)})})).then(()=>t())};var $t="/assets/KNSWHITE.bb37d2de.png";const Bt={name:"About"},_e=e=>(A("data-v-234292cc"),e=e(),S(),e),Mt={class:"container"},Rt=_e(()=>s("h1",{class:"text-center"},"About KNS",-1)),Pt=_e(()=>s("div",{class:"row mt-3"},[s("div",{class:"col-md-8 offset-md-2 text-center"},[s("img",{class:"img-fluid",src:$t,width:"500"})])],-1)),Ot=[Rt,Pt];function Ft(e,t,o,n,a,i){return d(),c("div",Mt,Ot)}var Wt=T(Bt,[["render",Ft],["__scopeId","data-v-234292cc"]]),Z=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];const Kt={name:"Sidebar",computed:x(m({},b("user",["getUserSelectedName","getUserShortAddress","getUserSelectedNameImageSvg"])),{getNameOrAddress(){return this.getUserSelectedName?this.getUserSelectedName:this.getUserShortAddress},getUserImage(){return this.getUserSelectedNameImageSvg?this.getUserSelectedNameImageSvg:"https://upload.wikimedia.org/wikipedia/commons/b/bc/Unknown_person.jpg"}})},j=e=>(A("data-v-be0e096c"),e=e(),S(),e),Lt={class:"container"},Vt=["src"],Ht={class:"text-center mt-2 text-break"},jt=j(()=>s("hr",null,null,-1)),qt=j(()=>s("i",{class:"bi bi-person"},null,-1)),Jt=_(" Profile "),Yt=j(()=>s("i",{class:"bi bi-cart4"},null,-1)),Gt=_(" Buy domain "),Xt=j(()=>s("i",{class:"bi bi-search"},null,-1)),Qt=_(" Search domain "),zt=j(()=>s("i",{class:"bi bi-send"},null,-1)),Zt=_(" Send tokens "),es=j(()=>s("i",{class:"bi bi-window-plus"},null,-1)),ts=_(" Browser extension "),ss=j(()=>s("i",{class:"bi bi-currency-dollar"},null,-1)),as=_(" USDC allowance ");function ns(e,t,o,n,a,i){const r=v("router-link");return d(),c("div",Lt,[s("img",{src:i.getUserImage,class:"img-fluid img-thumbnail"},null,8,Vt),s("h3",Ht,y(i.getNameOrAddress),1),jt,f(r,{class:"btn btn-sidebar text-start",to:"/profile"},{default:k(()=>[qt,Jt]),_:1}),f(r,{class:"btn btn-sidebar text-start",to:"/"},{default:k(()=>[Yt,Gt]),_:1}),f(r,{class:"btn btn-sidebar text-start",to:"/search-domain"},{default:k(()=>[Xt,Qt]),_:1}),f(r,{class:"btn btn-sidebar text-start",to:"/send-tokens"},{default:k(()=>[zt,Zt]),_:1}),f(r,{class:"btn btn-sidebar text-start",to:"/browser"},{default:k(()=>[es,ts]),_:1}),f(r,{class:"btn btn-sidebar text-start",to:"/allowance"},{default:k(()=>[ss,as]),_:1})])}var q=T(Kt,[["render",ns],["__scopeId","data-v-be0e096c"]]);const is={name:"WaitingToast",props:["text"]},os=s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),rs={class:"mx-2"};function ls(e,t,o,n,a,i){return d(),c("div",null,[os,s("span",rs,y(o.text),1)])}var J=T(is,[["render",ls]]);const ds={name:"Allowance",components:{Sidebar:q},data(){return{newAllowance:null,waiting:!1}},computed:x(m(m(m({},b("user",["getUsdcAddress","getUsdcAllowance","getUsdcBalance"])),b("network",["getBlockExplorerBaseUrl"])),b("klima",["getKlimaWrapperAddress"])),{notValid(){if(this.newAllowance){if(isNaN(this.newAllowance))return!0;if(Number(this.newAllowance)<0)return!0;if(this.newAllowance.includes(" "))return!0}else return!0;return!1}}),methods:x(m({},H("user",["setUsdcAllowance"])),{async approveUsdc(){this.waiting=!0;const e=new w(Z),t=new g(this.getUsdcAddress,e,this.signer),o=this.newAllowance;try{const n=await t.approve(this.getKlimaWrapperAddress,ne(o,"mwei")),a=this.toast({component:J,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:u.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+n.hash,"_blank").focus()}),i=await n.wait();i.status===1?(this.toast.dismiss(a),this.toast("You have successfully set the allowance to "+o+" USDC!",{type:u.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+n.hash,"_blank").focus()}),this.setUsdcAllowance(o),this.waiting=!1):(this.toast.dismiss(a),this.toast("Transaction has failed.",{type:u.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+n.hash,"_blank").focus()}),console.log(i),this.waiting=!1)}catch(n){console.log(n),this.waiting=!1,this.toast(n.message,{type:u.ERROR})}this.waiting=!1}}),setup(){const{signer:e}=I(),t=P(),{getFallbackProvider:o}=R();return{getFallbackProvider:o,signer:e,toast:t}}},cs={class:"row"},us={class:"col-md-3",id:"sidebar-container"},ps={class:"col-md-9"},ms={class:"row"},hs={class:"col-md-12 mb-3"},ys={class:"container text-center"},fs=s("h3",null,"Manage USDC allowance",-1),_s=s("p",{class:"mt-4"}," On this page you can manage your USDC allowance for the domain minting contract. Example: if you want to mint 5 domains and would like to avoid sending an approval transaction each time, set allowance to 500. But if you instead want to remove the allowance completely, set it to 0. ",-1),bs={class:"row mt-5"},gs={class:"col-md-6 offset-md-3"},ws=["disabled"],vs={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},ks=_(" Confirm new allowance ");function Ts(e,t,o,n,a,i){const r=v("Sidebar");return d(),c("div",cs,[s("div",us,[f(r)]),s("div",ps,[s("div",ms,[s("div",hs,[s("div",ys,[fs,_s,s("p",null,"Current allowance: "+y(e.getUsdcAllowance)+" USDC",1),s("div",bs,[s("div",gs,[$(s("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.newAllowance=l),class:"form-control text-center",placeholder:"Enter new allowance amount in USDC"},null,512),[[B,a.newAllowance]])])]),s("button",{class:"btn btn-primary mt-3 mb-5",onClick:t[1]||(t[1]=(...l)=>i.approveUsdc&&i.approveUsdc(...l)),disabled:a.waiting||i.notValid},[a.waiting?(d(),c("span",vs)):h("",!0),ks],8,ws)])])])])])}var xs=T(ds,[["render",Ts]]),Ds="/assets/chrome-logo.f7a9cfbf.png",Cs="/assets/firefox-logo.1191b73d.png";const Ns={name:"BrowserExtension",components:{Sidebar:q}},As=e=>(A("data-v-79beebf2"),e=e(),S(),e),Ss={class:"row"},Us={class:"col-md-3",id:"sidebar-container"},Is=As(()=>s("div",{class:"col-md-9"},[s("div",{class:"row"},[s("div",{class:"col-md-12 mb-3"},[s("div",{class:"container text-center"},[s("h3",null,"Browser Extension/Plugin"),s("p",{class:"text-wrap p-4"}," Punk Domains browser extension allows you to enter a .klima domain name in the URL bar and the extension will redirect you to the URL that is set for that domain. If no URL is set, the extension will redirect you to the domain page on the Klima Name Service website. ")])])]),s("div",{class:"row"},[s("div",{class:"col-md-6 mb-3"},[s("div",{class:"container text-center"},[s("h3",null,"Chrome/Brave"),s("p",null,[s("small",null,[s("em",null,"Coming soon!")])]),s("img",{class:"img-fluid browser-img mb-3",src:Ds})])]),s("div",{class:"col-md-6 mb-3"},[s("div",{class:"container text-center"},[s("h3",null,"Firefox"),s("p",null,[s("small",null,[s("em",null,"Coming soon!")])]),s("img",{class:"img-fluid browser-img mb-3",src:Cs})])])])],-1));function Es(e,t,o,n,a,i){const r=v("Sidebar");return d(),c("div",Ss,[s("div",Us,[f(r)]),Is])}var $s=T(Ns,[["render",Es],["__scopeId","data-v-79beebf2"]]);const Bs={name:"EditOtherData",emits:["fetchData"],props:["domainData","tld","domainName","isCorrectChainForDomain"],data(){return{btnInactive:!1,fields:[],tldContract:null}},computed:x(m(m(m({},b("punk",["getTldAbi"])),b("network",["getBlockExplorerBaseUrl"])),b("klima",["getKlimaTldAddress"])),{customData(){if(this.domainData)try{return JSON.parse(this.domainData.data)}catch{return null}return null},isOwner(){if(this.domainData)return String(this.address).toLowerCase()===String(this.domainData.holder).toLowerCase()}}),methods:{addField(){this.fields.push({dataKey:"",dataValue:""})},removeField(e){this.fields.splice(e,1)},async editData(){this.btnInactive=!0,this.tldContract||this.setContract();const e={};for(let t of this.fields)t.dataKey&&t.dataValue&&(e[t.dataKey]=t.dataValue);if(this.tldContract)try{const t=await this.tldContract.editData(this.domainName,JSON.stringify(e));document.getElementById("closeCustomDataModal").click();const o=this.toast({component:J,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:u.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+t.hash,"_blank").focus()}),n=await t.wait();n.status===1?(this.toast.dismiss(o),this.toast("You have successfully updated your domain's custom data!",{type:u.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+t.hash,"_blank").focus()}),this.$emit("fetchData"),this.btnInactive=!1):(this.toast.dismiss(o),this.toast("Transaction has failed.",{type:u.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+t.hash,"_blank").focus()}),console.log(n),this.btnInactive=!1,this.inputUrl=this.domainData.url)}catch(t){this.btnInactive=!1,console.log(t),this.toast(t.message,{type:u.ERROR}),this.inputUrl=this.domainData.url}},getTwitterUrl(e){if(typeof e=="string")return e.startsWith("http")?e:e.startsWith("www")||e.startsWith("twitter.com")?"https://"+e:(e.startsWith("@"),"https://twitter.com/"+e)},setContract(){if(this.address){const e=new w(this.getTldAbi);this.tldContract=new g(this.getKlimaTldAddress,e,this.signer)}}},setup(){const{address:e,signer:t}=I(),o=P();return{address:e,signer:t,toast:o}},watch:{domainData(){if(this.domainData&&this.domainData.data){const e=JSON.parse(this.domainData.data);for(const[t,o]of Object.entries(e))this.fields.findIndex(n=>n.dataKey==t)===-1&&this.fields.push({dataKey:t,dataValue:o})}this.fields.findIndex(e=>e.dataKey=="imgAddress")===-1&&this.fields.push({dataKey:"imgAddress",dataValue:"",valuePlaceholder:"HTTP, or 0x address if NFT"}),this.fields.findIndex(e=>e.dataKey=="imgTokenId")===-1&&this.fields.push({dataKey:"imgTokenId",dataValue:"",valuePlaceholder:"Only needed if img is NFT"}),this.fields.findIndex(e=>e.dataKey=="url")===-1&&this.fields.push({dataKey:"url",dataValue:"",valuePlaceholder:"Add any URL to redirect domain to"}),this.fields.findIndex(e=>e.dataKey=="twitter")===-1&&this.fields.push({dataKey:"twitter",dataValue:"",valuePlaceholder:"Enter your Twitter handle"}),this.isOwner&&this.isCorrectChainForDomain&&this.setContract()}}},X=e=>(A("data-v-da39bc9e"),e=e(),S(),e),Ms={class:"mb-3 row domain-data mt-4"},Rs={class:"col-sm-3 punk-title"},Ps={class:"col-sm-9 punk-text"},Os={key:0},Fs=["href"],Ws={key:1},Ks=["href"],Ls={key:2},Vs={key:1,class:"btn btn-primary btn-lg mx-3 mt-3","data-bs-toggle":"modal","data-bs-target":"#editDataModal"},Hs={class:"modal fade text-start",id:"editDataModal",tabindex:"-1","aria-labelledby":"editDataModalLabel","aria-hidden":"true"},js={class:"modal-dialog modal-dialog-centered"},qs={class:"modal-content"},Js=X(()=>s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"editDataModalLabel"},"Edit other data"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Ys={class:"modal-body"},Gs=X(()=>s("p",null," You can add custom data to this domain. ",-1)),Xs=X(()=>s("p",null," Example: twitter -> @myhandle ",-1)),Qs={class:"input-group mb-3 mt-4"},zs=["onUpdate:modelValue"],Zs=X(()=>s("span",{class:"input-group-text"},[s("i",{class:"bi bi-arrow-right"})],-1)),ea=["onUpdate:modelValue","placeholder"],ta=["onClick"],sa=X(()=>s("i",{class:"bi bi-x-circle"},null,-1)),aa=[sa],na={class:"modal-footer"},ia=["disabled"],oa=X(()=>s("button",{id:"closeCustomDataModal",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1));function ra(e,t,o,n,a,i){return d(),c(E,null,[i.customData?(d(!0),c(E,{key:0},Q(i.customData,(r,l)=>(d(),c("div",Ms,[s("div",Rs,y(l.charAt(0).toUpperCase()+l.slice(1)),1),s("div",Ps,[l=="url"?(d(),c("span",Os,[s("a",{target:"_blank",href:r},y(r),9,Fs)])):l=="twitter"?(d(),c("span",Ws,[s("a",{target:"_blank",href:i.getTwitterUrl(r)},y(r),9,Ks)])):(d(),c("span",Ls,y(r),1))])]))),256)):h("",!0),i.isOwner&&o.isCorrectChainForDomain?(d(),c("button",Vs," Edit data ")):h("",!0),s("div",Hs,[s("div",js,[s("div",qs,[Js,s("div",Ys,[Gs,Xs,a.fields?(d(!0),c(E,{key:0},Q(a.fields,(r,l)=>(d(),c("div",Qs,[$((d(),c("input",{type:"text",key:"dataKey"+l,class:"form-control","onUpdate:modelValue":p=>r.dataKey=p,placeholder:"Enter key (like twitter)"},null,8,zs)),[[B,r.dataKey]]),Zs,$((d(),c("input",{type:"text",class:"form-control",key:"dataValue"+l,"onUpdate:modelValue":p=>r.dataValue=p,placeholder:r.valuePlaceholder?r.valuePlaceholder:"Enter value"},null,8,ea)),[[B,r.dataValue]]),s("span",{class:"input-group-text",onClick:p=>i.removeField(l)},aa,8,ta)]))),256)):h("",!0),s("button",{class:"btn btn-secondary btn-sm",onClick:t[0]||(t[0]=(...r)=>i.addField&&i.addField(...r))}," Add new field ")]),s("div",na,[s("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=(...r)=>i.editData&&i.editData(...r)),disabled:a.btnInactive},"Edit data",8,ia),oa])])])])],64)}var la=T(Bs,[["render",ra],["__scopeId","data-v-da39bc9e"]]);const da={name:"DomainDetails",props:["domainChain","tld","domainName"],components:{EditOtherData:la,Sidebar:q},data(){return{loadingData:!1,tldContract:null,domainData:null,pfpImage:"https://upload.wikimedia.org/wikipedia/commons/b/bc/Unknown_person.jpg"}},created(){!this.tldContract&&this.isCorrectChainForDomain&&this.setContract(),this.fetchData()},computed:x(m(m(m({},b("punk",["getTldAbi"])),b("klima",["getKlimaTldAddress"])),b("network",["getBlockExplorerBaseUrl","getChainId","getSupportedNetworks","isNetworkSupported"])),{holderData(){return this.domainData.holder!==O?this.domainData.holder:"This domain name is not owned by anyone yet."},isCorrectChainForDomain(){return Number(this.domainChain)===Number(this.getChainId)}}),methods:{async fetchData(){this.loadingData=!0;const e=this.getFallbackProvider(Number(this.domainChain)),t=new w(F),o=new g(C[this.domainChain]["."+this.tld],t,e);if(o&&(this.domainData=await o.domains(this.domainName),this.domainData&&this.domainData.holder!==O)){let n=await o.tokenURI(this.domainData.tokenId),a=!0;if(this.domainData.data){const i=JSON.parse(this.domainData.data);if(i.imgAddress&&!i.imgAddress.startsWith("0x"))this.pfpImage=i.imgAddress.replace("ipfs://","https://ipfs.io/ipfs/"),a=!1;else if(i.imgAddress){const r=new w(["function tokenURI(uint256 tokenId) public view returns (string memory)"]);n=await new g(i.imgAddress,r,e).tokenURI(i.imgTokenId)}else n=await o.tokenURI(i.imgTokenId);if(n.includes("ipfs://")&&(n=n.replace("ipfs://","https://ipfs.io/ipfs/")),n.includes("http")){const l=await(await fetch(n)).json();l&&l.image&&(this.pfpImage=l.image.replace("ipfs://","https://ipfs.io/ipfs/"),a=!1)}}if(n&&a){const i=atob(n.substring(29)),r=JSON.parse(i);r&&r.image&&(this.pfpImage=r.image)}}this.loadingData=!1},setContract(){if(this.isActivated){const e=new w(this.getTldAbi);this.tldContract=new g(this.getKlimaTldAddress,e,this.signer)}}},setup(){const{isActivated:e,signer:t}=I(),o=P(),{getChainName:n,getFallbackProvider:a}=R();return{getChainName:n,getFallbackProvider:a,isActivated:e,signer:t,toast:o}}},oe=e=>(A("data-v-0a5df3f0"),e=e(),S(),e),ca={class:"row"},ua={class:"col-md-3",id:"sidebar-container"},pa={class:"col-md-9"},ma={class:"row"},ha={class:"col-md-12"},ya={class:"container text-center"},fa=["src"],_a={key:0,class:"mb-3 text-center mt-4"},ba=oe(()=>s("span",{class:"spinner-border spinner-border-lg",role:"status","aria-hidden":"true"},null,-1)),ga=[ba],wa={key:1,class:"mb-3 row domain-data mt-4"},va=oe(()=>s("div",{class:"col-sm-3 punk-title"}," Holder address ",-1)),ka={class:"col-sm-9 punk-text text-break"},Ta={class:"mb-3 row domain-data mt-4"},xa=oe(()=>s("div",{class:"col-sm-3 punk-title"}," Network ",-1)),Da={class:"col-sm-9 punk-text text-break"};function Ca(e,t,o,n,a,i){const r=v("Sidebar"),l=v("EditOtherData");return d(),c("div",ca,[s("div",ua,[f(r)]),s("div",pa,[s("div",ma,[s("div",ha,[s("div",ya,[s("h3",null,y(o.domainName)+"."+y(o.tld),1),s("img",{class:"img-thumbnail domain-image",src:a.pfpImage},null,8,fa),a.loadingData?(d(),c("div",_a,ga)):h("",!0),a.domainData?(d(),c("div",wa,[va,s("div",ka,y(i.holderData),1)])):h("",!0),s("div",Ta,[xa,s("div",Da,y(n.getChainName(Number(o.domainChain)))+" (this is where domain is registered) ",1)]),f(l,{domainData:a.domainData,tld:o.tld,domainName:o.domainName,isCorrectChainForDomain:i.isCorrectChainForDomain,onFetchData:i.fetchData},null,8,["domainData","tld","domainName","isCorrectChainForDomain","onFetchData"])])])])])])}var Na=T(da,[["render",Ca],["__scopeId","data-v-0a5df3f0"]]);const Aa={name:"Referral",computed:x(m({},b("user",["getUserAddress","getUserSelectedName"])),{getNameOrAddress(){return this.getUserSelectedName?this.getUserSelectedName:this.getUserAddress}}),methods:{copyToClipboard(e){navigator.clipboard.writeText(e),this.toast("Referral link copied to your clipboard!",{type:u.SUCCESS})}},setup(){return{toast:P()}}},be=e=>(A("data-v-4df501b5"),e=e(),S(),e),Sa={class:"row"},Ua={class:"col-md-12 mt-3"},Ia={class:"container text-center"},Ea=be(()=>s("h3",null,"Referrals",-1)),$a=be(()=>s("p",null," Share this referral link and earn rewards from new domain mints! ",-1)),Ba={class:"row mt-1"},Ma={class:"col-md-6 offset-md-3"},Ra=["value"];function Pa(e,t,o,n,a,i){return d(),c("div",Sa,[s("div",Ua,[s("div",Ia,[Ea,$a,s("div",Ba,[s("div",Ma,[s("input",{class:"form-control text-center clipboard",value:"http://www.kns.earth/?ref="+this.getNameOrAddress,onClick:t[0]||(t[0]=r=>i.copyToClipboard("http://www.kns.earth/?ref="+this.getNameOrAddress)),readonly:""},null,8,Ra)])])])])])}var ge=T(Aa,[["render",Pa],["__scopeId","data-v-4df501b5"]]);function Oa(){function e(t){return t===""?{invalid:!0,message:null}:t===null?{invalid:!0,message:null}:t.includes(".")?{invalid:!0,message:"Dots not allowed"}:t.includes(" ")?{invalid:!0,message:"Spaces not allowed"}:t.includes("%")?{invalid:!0,message:"% not allowed"}:t.includes("&")?{invalid:!0,message:"& not allowed"}:t.includes("?")?{invalid:!0,message:"? not allowed"}:t.includes("#")?{invalid:!0,message:"# not allowed"}:t.includes("/")?{invalid:!0,message:"/ not allowed"}:t.includes(",")?{invalid:!0,message:"Comma not allowed"}:!1}return{buyNotValid:e}}var we=[{inputs:[{internalType:"address",name:"_knsRetirerAddress",type:"address"},{internalType:"address",name:"_tldAddress",type:"address"},{internalType:"address",name:"_usdcAddress",type:"address"},{internalType:"uint256",name:"_price",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"address",name:"addr",type:"address"}],name:"AddedToWhitelist",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"price_",type:"uint256"}],name:"PriceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"referral_",type:"uint256"}],name:"ReferralChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"address",name:"addr",type:"address"}],name:"RemovedFromWhitelist",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"address",name:"oldAddress",type:"address"},{indexed:!1,internalType:"address",name:"newAddress",type:"address"}],name:"RetirerAddressChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"royalty_",type:"uint256"}],name:"RoyaltyChanged",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"MAX_BPS",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"TLD_NAME",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"addAddressToWhitelist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newKnsRetirerAddr",type:"address"}],name:"changeKnsRetirerAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxLength",type:"uint256"}],name:"changeMaxDomainNameLength",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_price",type:"uint256"}],name:"changePrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_referral",type:"uint256"}],name:"changeReferralFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_royalty",type:"uint256"}],name:"changeRoyaltyFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_description",type:"string"}],name:"changeTldDescription",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"knsRetirerAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"},{internalType:"address",name:"_domainHolder",type:"address"},{internalType:"address",name:"_referrer",type:"address"},{internalType:"string",name:"_retireMessage",type:"string"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenAddress_",type:"address"},{internalType:"uint256",name:"tokenAmount_",type:"uint256"},{internalType:"address",name:"recipient_",type:"address"}],name:"recoverERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenAddress_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"},{internalType:"address",name:"recipient_",type:"address"}],name:"recoverERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"referralFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"removeAddressFromWhitelist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"royaltyFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tldContract",outputs:[{internalType:"contract IPunkTLD",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"togglePaused",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newTldOwner",type:"address"}],name:"transferTldOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdc",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whitelisted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];const Fa={name:"Home",data(){return{chosenDomainName:null,chosenAllowance:null,loading:!1,retirementMessage:null,showRetMsgInput:!1,waiting:!1,wrapperContract:null}},components:{Referral:ge},created(){this.chosenAllowance=this.getWrapperTldPrice},computed:x(m(m(m({},b("user",["getUsdcAddress","getUsdcAllowance","getUsdcBalance"])),b("network",["getBlockExplorerBaseUrl"])),b("klima",["getKlimaWrapperAddress","getKlimaTldContract","getWrapperTldPrice","getWrapperPaused"])),{selectedAllowanceTooLow(){return!(Number(this.chosenAllowance)>=Number(this.getWrapperTldPrice))},domainLowerCase(){return this.chosenDomainName.toLowerCase()},hasEnoughUsdcAllowance(){return!!(this.address&&Number(this.getWrapperTldPrice)>0&&Number(this.getUsdcBalance)>0&&Number(this.getUsdcAllowance)>=Number(this.getWrapperTldPrice))},hasUserEnoughUsdc(){return!!(this.address&&Number(this.getWrapperTldPrice)>0&&Number(this.getUsdcBalance)>0&&Number(this.getUsdcBalance)>=Number(this.getWrapperTldPrice))},isNetworkSupported(){return!!(this.isActivated&&this.chainId===137)}}),methods:x(m({},H("user",["addDomainManually","setUsdcAllowance"])),{async approveUsdc(){this.waiting=!0;const e=new w(Z),t=new g(this.getUsdcAddress,e,this.signer);try{const o=await t.approve(this.getKlimaWrapperAddress,ne(this.chosenAllowance,"mwei")),n=this.toast({component:J,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:u.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()});document.getElementById("approveUsdcModal").click();const a=await o.wait();a.status===1?(this.toast.dismiss(n),this.toast("You have successfully set the allowance! Now proceed with buying the domain.",{type:u.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),this.setUsdcAllowance(this.chosenAllowance),this.waiting=!1):(this.toast.dismiss(n),this.toast("Transaction has failed.",{type:u.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),console.log(a),this.waiting=!1)}catch(o){console.log(o),this.waiting=!1,this.toast(o.message,{type:u.ERROR})}this.waiting=!1},async buyDomain(){this.waiting=!0;const e=this.domainLowerCase+".klima";if(await this.getKlimaTldContract.getDomainHolder(this.domainLowerCase)!==O){this.toast("Sorry, but this domain name is already taken...",{type:u.ERROR}),this.waiting=!1;return}const o=new w(we),n=new g(this.getKlimaWrapperAddress,o,this.signer);try{let a=localStorage.getItem("referral");(!a||!G(a))&&(a=O);let i;this.retirementMessage?i=this.retirementMessage+" - via www.kns.earth":i="";const r=await n.mint(this.domainLowerCase,this.address,a,i),l=this.toast({component:J,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:u.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+r.hash,"_blank").focus()}),p=await r.wait();p.status===1?(this.toast.dismiss(l),this.toast("You have successfully bought the domain!",{type:u.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+r.hash,"_blank").focus()}),this.addDomainManually(e),this.waiting=!1):(this.toast.dismiss(l),this.toast("Transaction has failed.",{type:u.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+r.hash,"_blank").focus()}),console.log(p),this.waiting=!1)}catch(a){console.log(a),this.waiting=!1,this.toast(a.message,{type:u.ERROR})}this.waiting=!1},changeNetwork(e){const t=this.switchNetwork(e);window.ethereum.request({method:t.method,params:t.params})},showRetMsg(){this.showRetMsgInput=!0}}),setup(){const{open:e}=ue(),{address:t,chainId:o,isActivated:n,signer:a}=I(),i=P(),{buyNotValid:r}=Oa(),{switchNetwork:l}=R();return{address:t,buyNotValid:r,chainId:o,isActivated:n,open:e,signer:a,switchNetwork:l,toast:i}}},W=e=>(A("data-v-af0f4c0e"),e=e(),S(),e),Wa={class:"container text-center"},Ka=W(()=>s("h1",{class:"mt-5"},"Mint Your .klima Domain!",-1)),La={class:"d-flex justify-content-center domain-input-container"},Va={class:"input-group domain-input input-group-lg"},Ha={class:"input-group-text tld-addon"},ja={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},qa=W(()=>s("span",null,".klima",-1)),Ja={key:0,class:"d-flex justify-content-center"},Ya={class:"input-group mb-3 domain-input input-group-lg"},Ga={class:"error"},Xa={key:0},Qa={class:"mt-5"},za={key:1,class:"btn btn-primary btn-lg mt-3 buy-button",disabled:!0},Za={key:0},en=["disabled"],tn=W(()=>s("span",null,"Your USDC balance is too low",-1)),sn=[tn],an=["disabled"],nn={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},on=W(()=>s("span",null,"Approve USDC",-1)),rn={key:4,class:"mt-1"},ln=W(()=>s("small",null,[s("strong",null,"Important:"),_(" You will need to complete 2 transactions: Approve USDC + Buy Domain.")],-1)),dn=[ln],cn=["disabled"],un={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},pn=W(()=>s("span",null,"Buy domain",-1)),mn={key:7,class:"mt-4 buy-button"},hn={class:"modal fade",id:"approveUsdcModal",tabindex:"-1","aria-labelledby":"approveUsdcModalLabel","aria-hidden":"true","modal-dialog-centered":""},yn={class:"modal-dialog"},fn={class:"modal-content"},_n=W(()=>s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"approveUsdcModalLabel"},"Approve USDC"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),bn={class:"modal-body"},gn={class:"mb-3"},wn=_(" Approval for "),vn=_(" USDC. "),kn={class:"modal-footer"},Tn=["disabled"],xn={key:0},Dn={key:1},Cn=W(()=>s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1));function Nn(e,t,o,n,a,i){const r=v("Referral");return d(),c(E,null,[s("div",Wa,[Ka,s("div",La,[s("div",Va,[$(s("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.chosenDomainName=l),placeholder:"enter domain name",type:"text",class:"form-control text-end","aria-label":"Text input with dropdown button"},null,512),[[B,a.chosenDomainName]]),s("span",Ha,[a.loading?(d(),c("span",ja)):h("",!0),qa])])]),s("p",null,[s("small",{onClick:t[1]||(t[1]=(...l)=>i.showRetMsg&&i.showRetMsg(...l)),class:"ret-msg"},"Optional: Add short message for Klima Love Letters")]),a.showRetMsgInput?(d(),c("div",Ja,[s("div",Ya,[$(s("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>a.retirementMessage=l),maxlength:"100",placeholder:"This message will show up on the Klima Love Letters website",type:"text",class:"form-control text-start"},null,512),[[B,a.retirementMessage]])])])):h("",!0),s("p",Ga,[n.buyNotValid(a.chosenDomainName).invalid?(d(),c("small",Xa,[s("em",null,y(n.buyNotValid(a.chosenDomainName).message),1)])):h("",!0)]),s("p",Qa," Domain price: "+y(e.getWrapperTldPrice)+" USDC ",1),n.isActivated&&e.getWrapperPaused?(d(),c("button",za,[e.getWrapperPaused?(d(),c("span",Za,"Buying paused")):h("",!0)])):h("",!0),n.isActivated&&i.isNetworkSupported&&!e.getWrapperPaused&&!i.hasUserEnoughUsdc?(d(),c("button",{key:2,class:"btn btn-primary btn-lg mt-3 buy-button",onClick:t[3]||(t[3]=(...l)=>i.approveUsdc&&i.approveUsdc(...l)),disabled:a.waiting||n.buyNotValid(a.chosenDomainName).invalid||!i.hasUserEnoughUsdc},sn,8,en)):h("",!0),n.isActivated&&i.isNetworkSupported&&!e.getWrapperPaused&&!i.hasEnoughUsdcAllowance&&i.hasUserEnoughUsdc?(d(),c("button",{key:3,"data-bs-toggle":"modal","data-bs-target":"#approveUsdcModal",class:"btn btn-primary btn-lg mt-3 buy-button",disabled:a.waiting||n.buyNotValid(a.chosenDomainName).invalid||!i.hasUserEnoughUsdc},[a.waiting?(d(),c("span",nn)):h("",!0),on],8,an)):h("",!0),n.isActivated&&i.isNetworkSupported&&!e.getWrapperPaused&&!i.hasEnoughUsdcAllowance&&i.hasUserEnoughUsdc?(d(),c("p",rn,dn)):h("",!0),n.isActivated&&i.isNetworkSupported&&!e.getWrapperPaused&&i.hasEnoughUsdcAllowance&&i.hasUserEnoughUsdc?(d(),c("button",{key:5,class:"btn btn-primary btn-lg mt-3 buy-button",onClick:t[4]||(t[4]=(...l)=>i.buyDomain&&i.buyDomain(...l)),disabled:a.waiting||n.buyNotValid(a.chosenDomainName).invalid||!i.hasUserEnoughUsdc},[a.waiting?(d(),c("span",un)):h("",!0),pn],8,cn)):h("",!0),n.isActivated?h("",!0):(d(),c("button",{key:6,class:"btn btn-primary btn-lg mt-3 buy-button",onClick:t[5]||(t[5]=(...l)=>n.open&&n.open(...l))},"Connect wallet")),n.isActivated&&!i.isNetworkSupported?(d(),c("div",mn,[s("button",{class:"btn btn-primary btn-lg",onClick:t[6]||(t[6]=l=>i.changeNetwork("Polygon"))},"Switch to Polygon")])):h("",!0)]),n.isActivated?(d(),pe(r,{key:0})):h("",!0),s("div",hn,[s("div",yn,[s("div",fn,[_n,s("div",bn,[s("div",gn,[s("p",null," If you plan to mint multiple domains, consider giving the minting contract a higher USDC approval. With each domain buy, the total approval amount is reduced by "+y(e.getWrapperTldPrice)+" USDC. (Worry not, redundant approval amount can later be reduced to 0.) ",1),wn,$(s("input",{type:"text",id:"recipient-name","onUpdate:modelValue":t[7]||(t[7]=l=>a.chosenAllowance=l)},null,512),[[B,a.chosenAllowance]]),vn])]),s("div",kn,[s("button",{type:"button",onClick:t[8]||(t[8]=(...l)=>i.approveUsdc&&i.approveUsdc(...l)),class:"btn btn-secondary",disabled:i.selectedAllowanceTooLow},[i.selectedAllowanceTooLow?h("",!0):(d(),c("span",xn,"Approve USDC")),i.selectedAllowanceTooLow?(d(),c("span",Dn,"Approval lower than domain price")):h("",!0)],8,Tn),Cn])])])])],64)}var An=T(Fa,[["render",Nn],["__scopeId","data-v-af0f4c0e"]]);const Sn={name:"HowItWorks"},ve=e=>(A("data-v-7f275dd4"),e=e(),S(),e),Un={class:"container"},In=ve(()=>s("h1",{class:"text-center"},"How it works",-1)),En=ve(()=>s("div",{class:"row mt-3"},[s("div",{class:"col-md-8 offset-md-2"})],-1)),$n=[In,En];function Bn(e,t,o,n,a,i){return d(),c("div",Un,$n)}var Mn=T(Sn,[["render",Bn],["__scopeId","data-v-7f275dd4"]]);const Rn={name:"MyDomain",props:["domain"],computed:m(m({},b("network",["getChainId"])),b("user",["getUserSelectedName"])),methods:x(m(m({},se("user",["fetchSelectedNameData"])),H("user",["setSelectedName"])),{setAsMainName(){this.setSelectedName(this.domain),this.fetchSelectedNameData()}})},Pn=e=>(A("data-v-50d96b92"),e=e(),S(),e),On={key:0},Fn=Pn(()=>s("i",{class:"bi bi-check2-circle"},null,-1)),Wn=_(" Default "),Kn=[Fn,Wn];function Ln(e,t,o,n,a,i){return d(),c(E,null,[s("td",null,[s("span",null,y(o.domain),1)]),s("td",null,[s("span",{class:"text-click",onClick:t[0]||(t[0]=r=>this.$router.push({name:"DomainDetails",params:{domainChain:e.getChainId,tld:o.domain.split(".")[1],domainName:o.domain.split(".")[0]}}))}," Edit domain data ")]),s("td",null,[s("span",{class:"text-click",onClick:t[1]||(t[1]=r=>this.$router.push({name:"TransferDomain",params:{tld:o.domain.split(".")[1],domainName:o.domain.split(".")[0]}}))}," Transfer domain ")]),s("td",null,[e.getUserSelectedName===o.domain?(d(),c("span",On,Kn)):(d(),c("span",{key:1,class:"text-click",onClick:t[2]||(t[2]=(...r)=>i.setAsMainName&&i.setAsMainName(...r))}," Set as main name "))])],64)}var Vn=T(Rn,[["render",Ln],["__scopeId","data-v-50d96b92"]]);const Hn={name:"Profile",data(){return{existingDomain:null,loading:!1}},components:{MyDomain:Vn,Referral:ge,Sidebar:q},computed:x(m(m(m({},b("user",["getUserAddress","getUserBalance","getUserAllDomainNames","getUserSelectedNameData"])),b("klima",["getKlimaTldAddress"])),b("user",["getUsdcAddress","getUsdcAllowance","getUsdcBalance","getUsdcContract"])),{customData(){if(this.getUserSelectedNameData)try{return JSON.parse(this.getUserSelectedNameData.data)}catch{return null}return null},domainNotValid(){if(this.existingDomain==="")return!0;if(this.existingDomain===null)return!0;if(this.existingDomain.split(".").length!=2)return!0;if(this.existingDomain.includes(" "))return!0;if(this.existingDomain.includes("%"))return!0;if(this.existingDomain.includes("&"))return!0;if(this.existingDomain.includes("?"))return!0;if(this.existingDomain.includes("#"))return!0;if(!this.existingDomain.includes(".klima"))return!0}}),methods:x(m({},H("user",["addDomainManually"])),{async addExistingDomain(){const e=this.existingDomain.toLowerCase(),t=e.split("."),o=new w(F),a=await new g(this.getKlimaTldAddress,o,this.signer).getDomainHolder(t[0]);String(a)===String(this.address)?(this.addDomainManually(e),this.toast("Domain successfully added.",{type:u.SUCCESS})):this.toast("This domain is not owned by your currently connected address.",{type:u.ERROR})}}),setup(){const{address:e,isActivated:t,signer:o}=I(),n=P(),{getFallbackProvider:a}=R();return{address:e,getFallbackProvider:a,isActivated:t,signer:o,toast:n}}},K=e=>(A("data-v-5be8e508"),e=e(),S(),e),jn={class:"row"},qn={class:"col-md-3",id:"sidebar-container"},Jn={class:"col-md-9"},Yn={key:0,class:"row"},Gn=me('<div class="col-md-12 mb-3" data-v-5be8e508><div class="container text-center" data-v-5be8e508><h3 data-v-5be8e508><i class="bi bi-exclamation-triangle" data-v-5be8e508></i> Not connected <i class="bi bi-exclamation-triangle" data-v-5be8e508></i></h3><p class="text-break" data-v-5be8e508> Please connect with your wallet to see your profile data. </p></div></div>',1),Xn=[Gn],Qn={key:1,class:"row"},zn={class:"col-md-6 mb-3"},Zn={class:"container text-center"},ei=K(()=>s("h3",null,"Address",-1)),ti={class:"text-break"},si={class:"col-md-6 mb-3"},ai={class:"container text-center"},ni=K(()=>s("h3",null,"Balance",-1)),ii={class:"text-break"},oi={class:"row"},ri={class:"col-md-12"},li={class:"container"},di=K(()=>s("h3",null,"Domains",-1)),ci={class:"table table-hover mt-4 mb-4"},ui={key:0},pi=K(()=>s("small",null,[s("em",null,[_(" Don't see your domain here? "),s("span",{class:"span-link","data-bs-toggle":"modal","data-bs-target":"#addDomainModal"}," Add it manually"),_(". ")])],-1)),mi=[pi],hi={key:1},yi=_(" No domain? No worries, "),fi=_("buy yourself one here!"),_i={class:"modal fade",id:"addDomainModal",tabindex:"-1","aria-labelledby":"addDomainModalLabel","aria-hidden":"true","modal-dialog-centered":""},bi={class:"modal-dialog"},gi={class:"modal-content"},wi=K(()=>s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"addDomainModalLabel"},"Add your existing domain"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),vi={class:"modal-body"},ki={class:"mb-3"},Ti=K(()=>s("label",{for:"recipient-name",class:"col-form-label"},"Enter your existing domain:",-1)),xi=K(()=>s("small",null,[s("em",null,"No transaction will be made, this is a free query.")],-1)),Di={class:"modal-footer"},Ci=["disabled"],Ni=K(()=>s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1));function Ai(e,t,o,n,a,i){const r=v("Sidebar"),l=v("MyDomain"),p=v("router-link"),N=v("Referral");return d(),c(E,null,[s("div",jn,[s("div",qn,[f(r)]),s("div",Jn,[n.isActivated?h("",!0):(d(),c("div",Yn,Xn)),n.isActivated?(d(),c("div",Qn,[s("div",zn,[s("div",Zn,[ei,s("p",ti,y(e.getUserAddress),1)])]),s("div",si,[s("div",ai,[ni,s("p",ii,[s("span",null,y(e.getUsdcBalance)+" USDC",1)])])])])):h("",!0),s("div",oi,[s("div",ri,[s("div",li,[di,s("table",ci,[s("tbody",null,[(d(!0),c(E,null,Q(e.getUserAllDomainNames,D=>(d(),c("tr",null,[f(l,{domain:D},null,8,["domain"])]))),256))])]),e.getUserSelectedNameData?(d(),c("p",ui,mi)):(d(),c("p",hi,[yi,f(p,{to:"/"},{default:k(()=>[fi]),_:1})]))])])]),f(N)])]),s("div",_i,[s("div",bi,[s("div",gi,[wi,s("div",vi,[s("div",ki,[Ti,$(s("input",{type:"text",class:"form-control",id:"recipient-name","onUpdate:modelValue":t[0]||(t[0]=D=>a.existingDomain=D)},null,512),[[B,a.existingDomain]]),xi])]),s("div",Di,[s("button",{type:"button",onClick:t[1]||(t[1]=(...D)=>i.addExistingDomain&&i.addExistingDomain(...D)),class:"btn btn-secondary",disabled:i.domainNotValid},"Add domain",8,Ci),Ni])])])])],64)}var Si=T(Hn,[["render",Ai],["__scopeId","data-v-5be8e508"]]);const Ui={name:"SearchDomains",components:{Sidebar:q},data(){return{query:null,waiting:!1}},computed:{domainLowerCase(){return this.query.toLowerCase()},notValid(){if(this.query)if(this.query.includes(".")){if(this.query.includes(" "))return!0;if(this.query.includes("%"))return!0;if(this.query.includes("&"))return!0;if(this.query.includes("?"))return!0;if(this.query.includes("#"))return!0;if(this.query.includes("/"))return!0}else return!0;else return!0;return!1}},methods:{async findDomain(){this.waiting=!0;const e=new w(F);if(this.domainLowerCase&&this.domainLowerCase.split(".").length===2){const t=this.domainLowerCase.split(".");for(let o in C)if(C[o]["."+t[1]]){const n=this.getFallbackProvider(Number(o));if(await new g(C[o]["."+t[1]],e,n).getDomainHolder(t[0])!==O){this.$router.push({name:"DomainDetails",params:{domainChain:o,tld:t[1],domainName:t[0]}});return}else{this.toast("This domain name has not been registered yet.",{type:u.INFO}),this.waiting=!1;return}}this.toast("Top-level domain ."+t[1]+" does not exist (if this is a mistake, contact us on Discord).",{type:u.ERROR}),this.waiting=!1;return}else{this.toast("This is not a valid domain.",{type:u.ERROR}),this.waiting=!1;return}}},setup(){const e=P(),{getFallbackProvider:t}=R();return{getFallbackProvider:t,toast:e}}},Ii={class:"row"},Ei={class:"col-md-3",id:"sidebar-container"},$i={class:"col-md-9"},Bi={class:"row"},Mi={class:"col-md-12 mb-3"},Ri={class:"container text-center"},Pi=s("h3",null,"Find an existing domain",-1),Oi={class:"row mt-5"},Fi={class:"col-md-6 offset-md-3"},Wi=["disabled"],Ki={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Li=_(" Search ");function Vi(e,t,o,n,a,i){const r=v("Sidebar");return d(),c("div",Ii,[s("div",Ei,[f(r)]),s("div",$i,[s("div",Bi,[s("div",Mi,[s("div",Ri,[Pi,s("div",Oi,[s("div",Fi,[$(s("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.query=l),class:"form-control text-center",placeholder:"Enter a domain name"},null,512),[[B,a.query]])])]),s("button",{class:"btn btn-primary mt-3 mb-5",onClick:t[1]||(t[1]=(...l)=>i.findDomain&&i.findDomain(...l)),disabled:a.waiting||i.notValid},[a.waiting?(d(),c("span",Ki)):h("",!0),Li],8,Wi)])])])])])}var Hi=T(Ui,[["render",Vi]]);const ji={name:"SendTokens",components:{Sidebar:q},data(){return{domainError:null,filterTokens:null,receiver:null,receiverAddress:null,tokenBalance:0,selectedToken:null,selectedTokenDecimals:null,tokenAmount:null,waiting:!1,validating:!1}},created(){this.getChainId>=1&&(this.selectedToken=Object.keys(this.getTokens)[0],this.tokenBalance=he(this.balance))},computed:x(m(m({},b("network",["getBlockExplorerBaseUrl","getChainId","getNetworkName","getTokens"])),b("user",["getUserBalance"])),{domainLowerCase(){return this.receiver?this.receiver.toLowerCase():null},formatTokenBalance(){return this.tokenBalance>100?Number(this.tokenBalance).toFixed(2):Number(this.tokenBalance).toFixed(4)},getTokenNames(){if(this.getTokens&&!this.filterTokens)return Object.keys(this.getTokens);if(this.getTokens&&this.filterTokens)return Object.keys(this.getTokens).filter(e=>e.includes(this.filterTokens.toUpperCase()))},notValid(){if(this.receiver)if(this.receiver.includes(".")){if(this.receiver.includes(" "))return!0;if(this.receiver.includes("%"))return!0;if(this.receiver.includes("&"))return!0;if(this.receiver.includes("?"))return!0;if(this.receiver.includes("#"))return!0;if(this.receiver.includes("/"))return!0;if(this.tokenAmount){if(isNaN(this.tokenAmount))return!0;if(Number(this.tokenAmount)<=0)return!0;if(Number(this.tokenAmount)>Number(this.tokenBalance))return!0}else return!0}else return!0;else return!0;return!1}}),methods:{async getTokenBalance(e){const t=this.getTokens[e];if(t==="0x0")this.tokenBalance=he(this.balance);else{const o=new w(Z),n=new g(t,o,this.signer),a=await n.balanceOf(this.address);if(Number(a)>0){const i=await n.decimals();this.selectedTokenDecimals=Number(i),this.tokenBalance=ae(a,this.selectedTokenDecimals)}else this.tokenBalance=0}},selectToken(e){this.selectedToken=e,this.getTokenBalance(e)},send(){this.getTokens[this.selectedToken]==="0x0"?this.sendNativeTokens():this.sendErc20Tokens()},async sendErc20Tokens(){this.waiting=!0;try{const e=this.selectedToken,t=this.tokenAmount,o=this.domainLowerCase,n=ne(t,this.selectedTokenDecimals),a=this.getTokens[e],i=new w(Z),l=await new g(a,i,this.signer).transfer(this.receiverAddress,n);document.getElementById("closeSendModal").click();const p=this.toast({component:J,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:u.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),N=await l.wait();N.status===1?(this.toast.dismiss(p),this.toast("You have successfully sent "+t+" "+e+" to "+o+"!",{type:u.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),this.waiting=!1,this.getTokenBalance(e)):(this.toast.dismiss(p),this.toast("Transaction has failed.",{type:u.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),console.log(N),this.waiting=!1)}catch(e){this.waiting=!1,console.log(e),this.toast(e.message,{type:u.ERROR})}},async sendNativeTokens(){this.waiting=!0;try{const e=this.selectedToken,t=this.tokenAmount,o=this.domainLowerCase,n=Ee(t),a=await this.signer.sendTransaction({to:this.receiverAddress,value:n});document.getElementById("closeSendModal").click();const i=this.toast({component:J,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:u.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),r=await a.wait();r.status===1?(this.toast.dismiss(i),this.toast("You have successfully sent "+t+" "+e+" to "+o+"!",{type:u.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),this.waiting=!1,this.getTokenBalance(e)):(this.toast.dismiss(i),this.toast("Transaction has failed.",{type:u.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),console.log(r),this.waiting=!1)}catch(e){this.waiting=!1,console.log(e),this.toast(e.message,{type:u.ERROR})}},async validateDomainName(){this.validating=!0,this.domainError=null,this.receiverAddress=null;const e=new w(F);try{if(this.domainLowerCase&&this.domainLowerCase.split(".").length===2){const t=this.domainLowerCase.split(".");for(let o in C)if(C[o]["."+t[1]]){const n=this.getFallbackProvider(Number(o)),i=await new g(C[o]["."+t[1]],e,n).getDomainHolder(t[0]);if(i!==O){this.receiverAddress=i,this.validating=!1;return}else{this.domainError="This domain name has not been registered yet.",this.validating=!1;return}break}if(!G(this.recipient)){this.domainError="This TLD does not exist.",this.validating=!1;return}}}catch{this.domainError="You have entered an incorrect domain.",this.validating=!1;return}}},setup(){const{address:e,balance:t,signer:o}=I(),n=P(),{getFallbackProvider:a}=R();return{address:e,balance:t,getFallbackProvider:a,signer:o,toast:n}},watch:{getChainId(){this.getChainId>=1&&(this.selectedToken=Object.keys(this.getTokens)[0],this.tokenBalance=this.getUserBalance)},address(){this.getTokenBalance(this.selectedToken)}}},L=e=>(A("data-v-782d2a53"),e=e(),S(),e),qi={class:"row"},Ji={class:"col-md-3",id:"sidebar-container"},Yi={class:"col-md-9"},Gi={class:"row"},Xi={class:"col-md-12 mb-3"},Qi={class:"container text-center"},zi=L(()=>s("h3",null,"Send tokens to a domain",-1)),Zi={class:"row mt-5"},eo={class:"col-md-6 offset-md-3"},to={class:"row mt-4"},so={class:"col-md-4 offset-md-4"},ao={class:"input-group"},no={class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},io={class:"dropdown-menu p-2"},oo={class:"mb-3"},ro=["onClick"],lo=_(" Balance: "),co=["disabled"],uo={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},po=_(" Send tokens "),mo={class:"modal fade text-start",id:"sendTokensModal",tabindex:"-1","aria-labelledby":"sendTokensModalLabel","aria-hidden":"true"},ho={class:"modal-dialog modal-dialog-centered"},yo={class:"modal-content"},fo={class:"modal-header"},_o={class:"modal-title",id:"sendTokensModalLabel"},bo=L(()=>s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),go={class:"modal-body"},wo={class:"row mb-3 mt-4"},vo=L(()=>s("div",{class:"col-sm-3"},[s("strong",null,"Recipient")],-1)),ko={class:"col-sm-9"},To={key:0,class:"domain-error"},xo={key:0,class:"row mb-3 mt-2"},Do=L(()=>s("div",{class:"col-sm-3"},[s("strong",null,"Recipient address")],-1)),Co={class:"col-sm-9"},No={class:"text-break"},Ao={key:0,class:"domain-error"},So={class:"row mb-3 mt-2"},Uo=L(()=>s("div",{class:"col-sm-3"},[s("strong",null,"Amount")],-1)),Io={class:"col-sm-9"},Eo={class:"text-break"},$o={key:1,class:"row mb-3 mt-2"},Bo=L(()=>s("div",{class:"col-sm-3"},[s("strong",null,"Token address")],-1)),Mo={class:"col-sm-9"},Ro={class:"text-break"},Po={class:"row mb-3 mt-2"},Oo=L(()=>s("div",{class:"col-sm-3"},[s("strong",null,"Network")],-1)),Fo={class:"col-sm-9"},Wo={class:"text-break"},Ko={class:"modal-footer"},Lo=["disabled"],Vo={key:0},Ho={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},jo={key:2},qo=L(()=>s("button",{id:"closeSendModal",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1));function Jo(e,t,o,n,a,i){const r=v("Sidebar");return d(),c(E,null,[s("div",qi,[s("div",Ji,[f(r)]),s("div",Yi,[s("div",Gi,[s("div",Xi,[s("div",Qi,[zi,s("div",Zi,[s("div",eo,[$(s("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.receiver=l),class:"form-control text-center",placeholder:"Enter the receiver's domain name"},null,512),[[B,a.receiver]])])]),s("div",to,[s("div",so,[s("div",ao,[$(s("input",{type:"text",class:"form-control text-end","onUpdate:modelValue":t[1]||(t[1]=l=>a.tokenAmount=l),placeholder:"0.0"},null,512),[[B,a.tokenAmount]]),s("button",no,y(a.selectedToken),1),s("div",io,[s("div",oo,[$(s("input",{class:"form-control mb-2",placeholder:"Filter tokens","onUpdate:modelValue":t[2]||(t[2]=l=>a.filterTokens=l)},null,512),[[B,a.filterTokens]]),s("li",null,[(d(!0),c(E,null,Q(i.getTokenNames,l=>(d(),c("button",{class:"dropdown-item",type:"button",onClick:p=>i.selectToken(l)},y(l),9,ro))),256))])])])]),s("small",null,[lo,s("span",{id:"balance",onClick:t[3]||(t[3]=l=>a.tokenAmount=a.tokenBalance)},y(i.formatTokenBalance)+" "+y(a.selectedToken),1)])])]),s("button",{class:"btn btn-primary mt-4 mb-5",disabled:i.notValid||a.waiting,onClick:t[4]||(t[4]=(...l)=>i.validateDomainName&&i.validateDomainName(...l)),"data-bs-toggle":"modal","data-bs-target":"#sendTokensModal"},[a.waiting?(d(),c("span",uo)):h("",!0),po],8,co)])])])])]),s("div",mo,[s("div",ho,[s("div",yo,[s("div",fo,[s("h5",_o,"Confirm sending "+y(a.selectedToken),1),bo]),s("div",go,[s("p",null," Please review the data before you send "+y(a.selectedToken)+" to "+y(i.domainLowerCase)+". ",1),s("div",wo,[vo,s("div",ko,[s("span",null,y(i.domainLowerCase),1),a.domainError?(d(),c("span",To,"Error: "+y(a.domainError),1)):h("",!0)])]),a.receiverAddress?(d(),c("div",xo,[Do,s("div",Co,[s("span",No,y(a.receiverAddress),1),a.receiverAddress==n.address?(d(),c("span",Ao,"Error: You are sending tokens to yourself.")):h("",!0)])])):h("",!0),s("div",So,[Uo,s("div",Io,[s("span",Eo,y(a.tokenAmount)+" "+y(a.selectedToken),1)])]),e.getTokens[a.selectedToken]!=="0x0"?(d(),c("div",$o,[Bo,s("div",Mo,[s("span",Ro,y(e.getTokens[a.selectedToken]),1)])])):h("",!0),s("div",Po,[Oo,s("div",Fo,[s("span",Wo,y(e.getNetworkName),1)])])]),s("div",Ko,[s("button",{type:"button",class:"btn btn-secondary",onClick:t[5]||(t[5]=(...l)=>i.send&&i.send(...l)),disabled:a.waiting||a.domainError||a.validating},[a.validating?(d(),c("span",Vo,"Validating...")):h("",!0),a.validating?(d(),c("span",Ho)):h("",!0),a.validating?h("",!0):(d(),c("span",jo,"Send "+y(a.selectedToken),1))],8,Lo),qo])])])])],64)}var Yo=T(ji,[["render",Jo],["__scopeId","data-v-782d2a53"]]);const Go={name:"TransferDomain",props:["tld","domainName"],components:{Sidebar:q},data(){return{recipient:null,recipientDomain:null,selectedDomain:this.domainName+"."+this.tld,waiting:!1}},computed:m(m({},b("network",["getBlockExplorerBaseUrl"])),b("user",["getUserSelectedName"])),methods:x(m({},se("user",["removeDomainFromUserDomains"])),{async transfer(){this.waiting=!0;const e=new w(F);if(this.recipient&&this.recipient.split(".").length===2){const t=this.recipient.split(".");for(let o in C)if(C[o]["."+t[1]]){const n=this.getFallbackProvider(Number(o)),i=await new g(C[o]["."+t[1]],e,n).getDomainHolder(t[0]);i!==O?(this.recipientDomain=this.recipient,this.recipient=i):(this.toast("The recipient's domain name "+this.recipient+" does not exist.",{type:u.ERROR}),this.waiting=!1);break}G(this.recipient)||(this.toast("Top-level domain ."+t[1]+" does not exist (if this is a mistake, contact us on Discord).",{type:u.ERROR}),this.waiting=!1)}else this.recipient?G(this.recipient)||(this.toast("This is not a valid recipient address.",{type:u.ERROR}),this.waiting=!1):(this.toast("This is not a valid recipient address or domain name.",{type:u.ERROR}),this.waiting=!1);if(this.recipient&&G(this.recipient)){const t=new g(C[this.chainId]["."+this.tld],e,this.signer),o=await t.domains(this.domainName);try{const n=await t.transferFrom(this.address,this.recipient,o.tokenId.toNumber());if(n){const a=this.toast({component:J,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:u.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+n.hash,"_blank").focus()}),i=await n.wait();i.status===1?(this.toast.dismiss(a),this.toast("You have successfully transferred the domain!",{type:u.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+n.hash,"_blank").focus()}),this.removeDomainFromUserDomains(this.domainName+"."+this.tld),this.waiting=!1):(this.toast.dismiss(a),this.toast("Transaction has failed.",{type:u.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+n.hash,"_blank").focus()}),console.log(i),this.waiting=!1)}}catch(n){console.log(n),this.waiting=!1,this.toast(n.message,{type:u.ERROR})}}}}),setup(){const{address:e,chainId:t,signer:o}=I(),n=P(),{getFallbackProvider:a}=R();return{address:e,chainId:t,getFallbackProvider:a,signer:o,toast:n}}},Xo={class:"row"},Qo={class:"col-md-3",id:"sidebar-container"},zo={class:"col-md-9"},Zo={class:"row"},er={class:"col-md-12"},tr={class:"container text-center"},sr=s("h3",null,"Transfer domain",-1),ar={class:"row mt-5"},nr={class:"col-md-6 offset-md-3"},ir=["value"],or={class:"row mt-3"},rr={class:"col-md-6 offset-md-3"},lr=["disabled"],dr={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},cr=_(" Transfer ");function ur(e,t,o,n,a,i){const r=v("Sidebar");return d(),c("div",Xo,[s("div",Qo,[f(r)]),s("div",zo,[s("div",Zo,[s("div",er,[s("div",tr,[sr,s("div",ar,[s("div",nr,[s("input",{value:o.domainName+"."+o.tld,class:"form-control text-center",readonly:""},null,8,ir)])]),s("div",or,[s("div",rr,[$(s("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.recipient=l),class:"form-control text-center",placeholder:"Enter recipient address"},null,512),[[B,a.recipient]])])]),s("button",{class:"btn btn-primary mt-3 mb-5",onClick:t[1]||(t[1]=(...l)=>i.transfer&&i.transfer(...l)),disabled:a.waiting},[a.waiting?(d(),c("span",dr)):h("",!0),cr],8,lr)])])])])])}var pr=T(Go,[["render",ur]]);const mr=[{path:"/",name:"Home",component:An},{path:"/about",name:"About",component:Wt},{path:"/allowance",name:"Allowance",component:xs},{path:"/browser",name:"BrowserExtension",component:$s},{path:"/domain/:domainChain/:tld/:domainName",name:"DomainDetails",component:Na,props:!0},{path:"/how",name:"HowItWorks",component:Mn},{path:"/profile",name:"Profile",component:Si},{path:"/search-domain",name:"SearchDomains",component:Hi},{path:"/send-tokens",name:"SendTokens",component:Yo},{path:"/transfer/:tld/:domainName",name:"TransferDomain",component:pr,props:!0},{path:"/:pathMatch(.*)*",name:"404",component:()=>Et(()=>import("./Error404.ed6f0d4e.js"),["assets/Error404.ed6f0d4e.js","assets/Error404.cd7e448d.css","assets/vendor.b436ea8d.js"])}],hr=$e({history:Be(),routes:mr});var yr={"137":{MATIC:"0x0",ETH:"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619",DAI:"0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063",USDC:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"},"80001":{MATIC:"0x0",AAVE:"0x2b03FB8443A3a338f772C1EE29ACB4AeaA0Bc2ab",DAI:"0xFeBBF3F530A4fB3F0FBBAb9Ce72E4988972f2a08"}};const{chainId:V}=I();var fr={namespaced:!0,state:()=>({networkCurrency:"MATIC",networkName:"Unsupported Network",supportedNetworks:{137:"Polygon"}}),getters:{getBlockExplorerBaseUrl(){if(V.value===137)return"https://polygonscan.com";if(V.value===80001)return"https://mumbai.polygonscan.com"},getChainId(){return V.value},getNetworkCurrency(e){return e.networkCurrency},getNetworkName(e){const t=Object.keys(e.supportedNetworks);return t&&t.includes(String(V.value))?e.networkName:"Unsupported Network"},getSupportedNetworks(e){return e.supportedNetworks},getSupportedNetworkIds(e){return Object.keys(e.supportedNetworks)},getSupportedNetworkNames(e){return Object.values(e.supportedNetworks)},getTokens(e){return yr[String(V.value)]},isNetworkSupported(e){const t=Object.keys(e.supportedNetworks);return!!(t&&t.includes(String(V.value)))}},mutations:{setNetworkData(e){V.value===137?(e.networkName="Polygon",e.networkCurrency="MATIC"):V.value===80001&&(e.networkName="Polygon Testnet",e.networkCurrency="MATIC")}}};const{getFallbackProvider:_r}=R(),{address:M,balance:ke,chainId:ee,signer:re}=I();var br={namespaced:!0,state:()=>({selectedName:null,selectedNameData:null,selectedNameImageSvg:null,selectedNameKey:null,usdcAddress:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",usdcContract:null,usdcAllowance:0,usdcBalance:0,userAddress:null,userAllDomainNames:[],userDomainNamesKey:null,userShortAddress:null,userBalanceWei:0,userBalance:0}),getters:{getUserAddress(e){return e.userAddress},getUserBalance(e){return e.userBalance},getUserBalanceWei(e){return e.userBalanceWei},getUserAllDomainNames(e){return e.userAllDomainNames},getUserSelectedName(e){return e.selectedName},getUserSelectedNameData(e){return e.selectedNameData},getUserSelectedNameImageSvg(e){return e.selectedNameImageSvg},getUserShortAddress(e){return e.userShortAddress},getUsdcAddress(e){return e.usdcAddress},getUsdcAllowance(e){return e.usdcAllowance},getUsdcBalance(e){return e.usdcBalance},getUsdcContract(e){return e.usdcContract}},mutations:{addDomainManually(e,t){let o=[];if(M.value){e.userDomainNamesKey="userDomainNames"+String(ee.value)+String(z(M.value)),e.selectedNameKey="selectedName"+String(ee.value)+String(z(M.value)),localStorage.getItem(e.userDomainNamesKey)&&(o=JSON.parse(localStorage.getItem(e.userDomainNamesKey))),o.includes(t)||o.push(t);for(let n of o)e.userAllDomainNames.includes(n)||e.userAllDomainNames.push(n);localStorage.setItem(e.userDomainNamesKey,JSON.stringify(o))}},setUserData(e){e.userAddress=M.value,e.userShortAddress=z(M.value),e.userBalanceWei=ke.value,e.userBalance=Me(ke.value)},setDefaultName(e,t){e.userAllDomainNames.includes(t)||e.userAllDomainNames.push(t)},setSelectedName(e,t){e.selectedName=t,localStorage.setItem(e.selectedNameKey,e.selectedName),localStorage.setItem("connected","metamask")},setSelectedNameKey(e,t){e.selectedNameKey=t},setSelectedNameData(e,t){e.selectedNameData=t},setSelectedNameImageSvg(e,t){e.selectedNameImageSvg=t},setUserDomainNamesKey(e,t){e.userDomainNamesKey=t},setUsdcAllowance(e,t){e.usdcAllowance=t},setUsdcBalance(e,t){e.usdcBalance=t},setUsdcContract(e,t){e.usdcContract=t},setUserAllDomainNames(e,t){e.userAllDomainNames=t}},actions:{async fetchUserDomainNames({dispatch:e,commit:t,state:o,rootState:n,rootGetters:a},i){let r=[],l=null,p=null;if(M.value){l="userDomainNames"+String(ee.value)+String(z(M.value)),p="selectedName"+String(ee.value)+String(z(M.value)),t("setSelectedNameKey",p),t("setUserDomainNamesKey",l),i&&(localStorage.getItem(p)&&localStorage.getItem(p)!==String(null)?t("setSelectedName",localStorage.getItem(p)):(t("setSelectedName",null),t("setSelectedNameData",null),t("setSelectedNameImageSvg",null)),t("setUserAllDomainNames",[])),localStorage.getItem(l)&&(r=JSON.parse(localStorage.getItem(l)));for(let Y of r)t("setDefaultName",Y);const N=new w(a["punk/getTldAbi"]),U=await new g(a["klima/getKlimaTldAddress"],N,re.value).defaultNames(M.value);U&&(t("setDefaultName",U+n.klima.klimaTldName),r.includes(U+n.klima.klimaTldName)||r.push(U+n.klima.klimaTldName),o.selectedName||t("setSelectedName",U+n.klima.klimaTldName)),localStorage.getItem(p)&&localStorage.getItem(p)!==String(null)?t("setSelectedName",localStorage.getItem(p)):localStorage.setItem(p,o.selectedName),localStorage.setItem(l,JSON.stringify(r)),e("fetchSelectedNameData")}},async fetchSelectedNameData({commit:e,state:t,rootGetters:o}){if(t.selectedName){const a=t.selectedName.split(".")[0];if(a){const i=new w(o["punk/getTldAbi"]),r=new g(o["klima/getKlimaTldAddress"],i,re.value),l=await r.domains(a);e("setSelectedNameData",l);let p=await r.tokenURI(l.tokenId),N=!1;if(l.data){const D=JSON.parse(l.data);if(D.imgAddress&&!D.imgAddress.startsWith("0x"))e("setSelectedNameImageSvg",D.imgAddress.replace("ipfs://","https://ipfs.io/ipfs/")),N=!0;else if(D.imgAddress){const U=new w(["function tokenURI(uint256 tokenId) public view returns (string memory)"]);p=await new g(D.imgAddress,U,re.value).tokenURI(D.imgTokenId)}if(p.includes("ipfs://")&&(p=p.replace("ipfs://","https://ipfs.io/ipfs/")),p.includes("http")){const Y=await(await fetch(p)).json();Y&&Y.image?(e("setSelectedNameImageSvg",Y.image.replace("ipfs://","https://ipfs.io/ipfs/")),N=!0):e("setSelectedNameImageSvg",null)}}if(p&&!N){const D=atob(p.substring(29)),U=JSON.parse(D);U&&U.image?e("setSelectedNameImageSvg",U.image):e("setSelectedNameImageSvg",null)}}}},async fetchUserUsdcData({commit:e,state:t,rootGetters:o}){const n=_r(137),a=new w(Z),i=new g(t.usdcAddress,a,n);if(e("setUsdcContract",i),M.value){const r=await i.allowance(M.value,o["klima/getKlimaWrapperAddress"]),l=ae(r,"mwei");e("setUsdcAllowance",l);const p=await i.balanceOf(M.value),N=ae(p,"mwei");e("setUsdcBalance",N)}},async removeDomainFromUserDomains({commit:e,state:t},o){if(ee.value&&localStorage.getItem(t.userDomainNamesKey)){const n=JSON.parse(localStorage.getItem(t.userDomainNamesKey));t.userAllDomainNames=[];let a=[];for(let i of n)i!=o&&(a.push(i),t.userAllDomainNames.push(i));localStorage.setItem(t.userDomainNamesKey,JSON.stringify(a)),localStorage.getItem(t.selectedNameKey)&&localStorage.getItem(t.selectedNameKey)==o&&(a.length>0&&e("setSelectedName",a[0]),e("setSelectedName",null))}}}},gr={namespaced:!0,getters:{getTldAbi(){return F}}};const{getFallbackProvider:Te}=R();var wr={namespaced:!0,state:()=>({klimaTldAddress:C["137"][".klima"],klimaTldName:".klima",tldAddress:"0xe8b97542A433e7eCc7bB791872af04DF02A1a6E4",tldContract:null,wrapperAddress:"0xf7E89ED8106cBa1335e04837E59a28ae1A3D580c",wrapperContract:null,wrapperPaused:!0,wrapperTldPrice:null}),getters:{getKlimaTldAddress(e){return e.klimaTldAddress},getKlimaTldContract(e){return e.tldContract},getKlimaTldName(e){return e.klimaTldName},getKlimaWrapperAddress(e){return e.wrapperAddress},getWrapperContract(e){return e.wrapperContract},getWrapperPaused(e){return e.wrapperPaused},getWrapperTldPrice(e){return e.wrapperTldPrice}},mutations:{setTldContract(e){let t=Te(137);const o=new w(F);e.tldContract=new g(e.tldAddress,o,t)},setWrapperContract(e,t){e.wrapperContract=t},setWrapperPaused(e,t){e.wrapperPaused=t},setWrapperTldPrice(e,t){e.wrapperTldPrice=t}},actions:{async fetchWrapperContractData({commit:e,state:t}){let o=Te(137);const n=new w(we),a=new g(t.wrapperAddress,n,o);e("setWrapperContract",a);const i=await a.paused();e("setWrapperPaused",i);const r=await a.price(),l=ae(r,"mwei");e("setWrapperTldPrice",l)}}};const vr=Re({modules:{network:fr,user:br,punk:gr,klima:wr}});const te=Pe(St),kr={timeout:5e3,hideProgressBar:!0,closeButton:"button",position:Oe.TOP_LEFT,toastClassName:"punk-toast-class",closeOnClick:!1,toastDefaults:{[u.INFO]:{timeout:!1,icon:!1}}};te.use(hr);te.use(vr);te.use(Fe,{infuraId:""});te.use(We,kr);te.mount("#app");export{T as _};
