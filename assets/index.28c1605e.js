var Te=Object.defineProperty,De=Object.defineProperties;var Ne=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var re=(e,s,n)=>s in e?Te(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,m=(e,s)=>{for(var n in s||(s={}))xe.call(s,n)&&re(e,n,s[n]);if(oe)for(var n of oe(s))Ce.call(s,n)&&re(e,n,s[n]);return e},x=(e,s)=>De(e,Ne(s));import{m as b,u as le,a as $,b as de,r as v,c,d as t,e as h,w as k,t as u,F as I,f as Y,p as S,g as A,o as d,h as _,i as ce,j as y,k as ue,l as ee,n as G,I as w,C as g,A as R,q as W,s as Se,T as p,v as O,x as E,y as U,z as me,B as Z,D as pe,E as Ae,G as Ie,H as $e,J as Ee,K as Ue,L as H,M as Me,N as Be,O as Re,P as Oe,V as Fe,Q as Pe}from"./vendor.133078cc.js";const Ke=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}};Ke();function te(){function e(n){return n===137?"Polygon":n===10?"Optimism":n===69?"Optimism Testnet":n===77?"Gnosis Testnet":n===100?"Gnosis Chain":n===137?"Polygon":n===42161?"Arbitrum":n===421611?"Arbitrum Testnet":n===80001?"Polygon Testnet":n===3?"Ropsten":n===4?"Rinkeby":"Unsupported Network"}function s(n){let i,a;return n=="Ropsten"?(i="wallet_switchEthereumChain",a=[{chainId:"0x3"}]):n=="Rinkeby"?(i="wallet_switchEthereumChain",a=[{chainId:"0x4"}]):n=="Polygon Testnet"?(i="wallet_addEthereumChain",a=[{blockExplorerUrls:["https://mumbai.polygonscan.com"],chainId:"0x13881",chainName:"Mumbai Testnet",nativeCurrency:{decimals:18,name:"Matic",symbol:"MATIC"},rpcUrls:["https://matic-mumbai.chainstacklabs.com"]}]):n=="Arbitrum Testnet"?(i="wallet_addEthereumChain",a=[{blockExplorerUrls:["https://testnet.arbiscan.io"],chainId:"0x66EEB",chainName:"Arbitrum Testnet",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:["https://rinkeby.arbitrum.io/rpc"]}]):n=="Arbitrum"?(i="wallet_addEthereumChain",a=[{blockExplorerUrls:["https://arbiscan.io"],chainId:"0xA4B1",chainName:"Arbitrum One",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:["https://arb1.arbitrum.io/rpc"]}]):n=="Optimism"?(i="wallet_addEthereumChain",a=[{blockExplorerUrls:["https://optimistic.etherscan.io/"],chainId:"0xA",chainName:"Optimism",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:["https://mainnet.optimism.io"]}]):n=="Optimism Testnet"?(i="wallet_addEthereumChain",a=[{blockExplorerUrls:["https://kovan-optimistic.etherscan.io/"],chainId:"0x45",chainName:"Optimism Testnet",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:["https://kovan.optimism.io"]}]):n=="Polygon"?(i="wallet_addEthereumChain",a=[{blockExplorerUrls:["https://polygonscan.com"],chainId:"0x89",chainName:"Polygon PoS Chain",nativeCurrency:{decimals:18,name:"MATIC",symbol:"MATIC"},rpcUrls:["https://polygon-rpc.com/"]}]):n=="Gnosis Testnet"?(i="wallet_addEthereumChain",a=[{blockExplorerUrls:["https://blockscout.com/poa/sokol"],chainId:"0x4D",chainName:"Gnosis Testnet",nativeCurrency:{decimals:18,name:"SPOA",symbol:"SPOA"},rpcUrls:["https://sokol.poa.network"]}]):n=="Gnosis Chain"&&(i="wallet_addEthereumChain",a=[{blockExplorerUrls:["https://blockscout.com/xdai/mainnet"],chainId:"0x64",chainName:"Gnosis Chain",nativeCurrency:{decimals:18,name:"XDAI",symbol:"XDAI"},rpcUrls:["https://rpc.gnosischain.com"]}]),{method:i,params:a}}return{getChainName:e,switchNetwork:s}}var Le="/assets/kns-white-logo-big.6a4a0387.png";var T=(e,s)=>{for(const[n,i]of s)e[n]=i;return e};const He={name:"Navbar",computed:x(m(m({},b("user",["getUserShortAddress","getUserSelectedName"])),b("network",["getNetworkName","getSupportedNetworks","getSupportedNetworkNames"])),{getNameOrAddress(){return this.getUserSelectedName?this.getUserSelectedName:this.getUserShortAddress}}),methods:{changeNetwork(e){const s=this.switchNetwork(e);window.ethereum.request({method:s.method,params:s.params})},logout(){this.disconnect(),localStorage.clear(),localStorage.setItem("connected","null")},openUrl(e){window.open(e,"_blank").focus()}},setup(){const{open:e}=de(),{disconnect:s}=le(),{isActivated:n}=$(),{switchNetwork:i}=te();return{isActivated:n,disconnect:s,open:e,switchNetwork:i}}},he=e=>(S("data-v-439da593"),e=e(),A(),e),Ve={class:"navbar sticky-top navbar-expand-lg navbar-dark"},We={class:"container-fluid"},je=he(()=>t("img",{src:Le,alt:"",width:"30",class:"d-inline-block align-bottom navbar-img"},null,-1)),qe=_(" Klima Name Service "),Je=he(()=>t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1)),Ye={class:"collapse navbar-collapse",id:"navbarSupportedContent"},Ge={class:"d-flex ms-auto"},Xe={key:0,class:""},Qe={class:"btn-group mx-2"},ze={class:"btn btn-primary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},Ze={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},et=["onClick"],tt={class:"btn-group mx-2"},st={class:"btn btn-primary dropdown-toggle",type:"button",id:"dropdownMenuButton2","data-bs-toggle":"dropdown","aria-expanded":"false"},nt={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton2"},at=_("Profile"),it=_("Buy domain"),ot=_("Search domain"),rt=_("Send tokens"),lt=_("About"),dt=_("How it works"),ct=_("Browser extension");function ut(e,s,n,i,a,o){const r=v("router-link");return d(),c("nav",Ve,[t("div",We,[h(r,{to:"/",class:"navbar-brand"},{default:k(()=>[je,qe]),_:1}),Je,t("div",Ye,[t("div",Ge,[i.isActivated?(d(),c("div",Xe,[t("div",Qe,[t("button",ze,u(e.getNetworkName),1),t("ul",Ze,[t("li",null,[(d(!0),c(I,null,Y(e.getSupportedNetworkNames,l=>(d(),c("span",{class:"dropdown-item",onClick:f=>o.changeNetwork(l)},u(l),9,et))),256))])])]),t("div",tt,[t("button",st,u(o.getNameOrAddress),1),t("ul",nt,[h(r,{tag:"li",class:"dropdown-item",to:"/profile"},{default:k(()=>[at]),_:1}),h(r,{tag:"li",class:"dropdown-item",to:"/"},{default:k(()=>[it]),_:1}),h(r,{tag:"li",class:"dropdown-item",to:"/search-domain"},{default:k(()=>[ot]),_:1}),h(r,{tag:"li",class:"dropdown-item",to:"/send-tokens"},{default:k(()=>[rt]),_:1}),h(r,{tag:"li",class:"dropdown-item",to:"/about"},{default:k(()=>[lt]),_:1}),h(r,{tag:"li",class:"dropdown-item",to:"/how"},{default:k(()=>[dt]),_:1}),h(r,{tag:"li",class:"dropdown-item",to:"/browser"},{default:k(()=>[ct]),_:1}),t("li",{class:"dropdown-item",onClick:s[0]||(s[0]=(...l)=>o.logout&&o.logout(...l))},"Disconnect")])])])):(d(),c("button",{key:1,class:"btn btn-primary",onClick:s[1]||(s[1]=(...l)=>i.open&&i.open(...l))},"Connect wallet"))])])])])}var mt=T(He,[["render",ut],["__scopeId","data-v-439da593"]]);const pt={name:"Footer",computed:m({},b("network",["isNetworkSupported"])),setup(){const{isActivated:e}=$();return{isActivated:e}}},se=e=>(S("data-v-f3b136f2"),e=e(),A(),e),ht={class:"container-fluid text-center mt-3"},yt=_("Profile"),ft={key:1},_t=_("About KNS"),bt=se(()=>t("span",null," | ",-1)),gt=_("How it works"),vt=se(()=>t("span",null," | ",-1)),wt=se(()=>t("a",{target:"_blank",href:"https://punk.domains"},"Powered by Punk Domains",-1)),kt=ue('<div class="container-fluid text-center" data-v-f3b136f2><a class="icons" href="" target="_blank" data-v-f3b136f2><i class="bi bi-journal-text" data-v-f3b136f2></i></a><a class="icons" target="_blank" href="https://github.com/GwamiLabs" data-v-f3b136f2><i class="bi bi-github" data-v-f3b136f2></i></a><a class="icons" target="_blank" href="https://discord.gg/" data-v-f3b136f2><i class="bi bi-discord" data-v-f3b136f2></i></a><a class="icons" target="_blank" href="https://twitter.com/" data-v-f3b136f2><i class="bi bi-twitter" data-v-f3b136f2></i></a></div>',1);function Tt(e,s,n,i,a,o){const r=v("router-link");return d(),c(I,null,[t("div",ht,[i.isActivated&&e.isNetworkSupported?(d(),ce(r,{key:0,to:"/profile"},{default:k(()=>[yt]),_:1})):y("",!0),i.isActivated&&e.isNetworkSupported?(d(),c("span",ft," | ")):y("",!0),h(r,{to:"/about"},{default:k(()=>[_t]),_:1}),bt,h(r,{to:"/how"},{default:k(()=>[gt]),_:1}),vt,wt]),kt],64)}var Dt=T(pt,[["render",Tt],["__scopeId","data-v-f3b136f2"]]),C={"10":{".wagmi":"0xC3E8922657686EC63eaaa9FC1Fe06826802e7e0f",".optimism":"0xBca24d86e4Ad1e011278FaEFc4fF191a731411EC",".spartan":"0x3490C9817C45A2a394b11A3807f58a8325235aE0",".l2":"0x9A7657d1593032C75d70950707870c3cC7ca45DC"},"69":{".optitest":"0xAc63b035e63d280c408549f5AFA64be7469470de",".l2test":"0xB5B8AF8199777d471c0320BC11022433df6D100e"},"77":{".testdao":"0x110cc3f64cdf8ffadc785dfa53906bcff76b3846"},"100":{".gnosis":"0xC3E8922657686EC63eaaa9FC1Fe06826802e7e0f",".xdai":"0xbca24d86e4ad1e011278faefc4ff191a731411ec",".bright":"0x3490c9817c45a2a394b11a3807f58a8325235ae0"},"137":{".web3":"0xb6Cf2874588d0fdFAf9d1b5E254ee6C49110C68B",".polygon":"0xa450bc33d0940d25fB0961c592fb440Fa63ABE03",".ape":"0x794a8390D94E32b086908D2bA9D66300aA163C62",".poly":"0x70Ac07C50131b7bb2c8Bd9466D8d2add30B7759f",".degen":"0xC4999A3e91ef87c9EC5d8186D02B77F9A62458b9",".klima":"0xe8b97542A433e7eCc7bB791872af04DF02A1a6E4"},"42161":{".arbi":"0xe97456E0fB121F65422F43ccbd4A07a0e269B534",".arbitrum":"0x337EB5061943ECd247649d58D35Dbab0b40D67E0"},"80001":{".polytest":"0xebED27271230E8ED18fD3Ef96F0221D9DBC93750"},"421611":{".arbitest":"0xC6a628b1FF1aD4e304bEeACAff915559786deA2e"}},F=[{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"address",name:"_tldOwner",type:"address"},{internalType:"uint256",name:"_domainPrice",type:"uint256"},{internalType:"bool",name:"_buyingEnabled",type:"bool"},{internalType:"uint256",name:"_royalty",type:"uint256"},{internalType:"address",name:"_factoryAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"}],name:"DataChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"string",name:"defaultDomain",type:"string"}],name:"DefaultDomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"string",name:"fullDomainName",type:"string"}],name:"DomainCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"buyingEnabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_maxLength",type:"uint256"}],name:"changeNameMaxLength",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_price",type:"uint256"}],name:"changePrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_referral",type:"uint256"}],name:"changeReferralPayment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_royalty",type:"uint256"}],name:"changeRoyalty",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"defaultNames",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"domainIdsNames",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"domains",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"holder",type:"address"},{internalType:"string",name:"data",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"},{internalType:"string",name:"_data",type:"string"}],name:"editData",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"}],name:"editDefaultDomain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"factoryAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"}],name:"getDomainData",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"}],name:"getDomainHolder",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getFactoryOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"},{internalType:"address",name:"_domainHolder",type:"address"},{internalType:"address",name:"_referrer",type:"address"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nameMaxLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"},{internalType:"address",name:"_domainHolder",type:"address"}],name:"ownerMintDomain",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"referral",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"royalty",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"toggleBuyingDomains",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];const Nt={components:{Navbar:mt,Footer:Dt},created(){this.fetchReferrer(),localStorage.getItem("klimav1")||(localStorage.clear(),localStorage.setItem("connected","null"),localStorage.setItem("klimav1","true"))},computed:m(m({},b("user",["getUserSelectedName"])),b("network",["getFallbackProvider"])),methods:x(m(m(m({},ee("user",["fetchUserDomainNames"])),G("user",["setUserData"])),G("network",["setNetworkData"])),{fetchAllData(){this.setUserData(),this.setNetworkData()},async fetchReferrer(){const s=new URLSearchParams(window.location.search).get("ref");if(s&&s.split(".").length===2){const n=s.split(".");for(let i in C)if(C[i]["."+n[1]]){const a=this.getFallbackProvider(Number(i)),o=new w(F),l=await new g(C[i]["."+n[1]],o,a).getDomainHolder(n[0]);l!==R&&localStorage.setItem("referral",l);break}}else s&&W(s)&&localStorage.setItem("referral",s)}}),setup(){const{address:e,chainId:s,isActivated:n}=$(),{connect:i}=le();return Se(()=>{!n.value&&localStorage.getItem("connected")=="metamask"&&i("metamask")}),{address:e,chainId:s,connect:i,isActivated:n}},watch:{address(e,s){e&&(this.setUserData(),this.fetchUserDomainNames(!0))},chainId(e,s){!this.isActivated&&localStorage.getItem("connected")=="metamask"&&this.connect("metamask"),this.chainId>=1&&(this.fetchAllData(),this.fetchUserDomainNames(!0))},isActivated(e,s){!localStorage.getItem("connected")&&localStorage.getItem("connected")!=="null"&&localStorage.setItem("connected","metamask")}}},xt={class:"main-container"};function Ct(e,s,n,i,a,o){const r=v("Navbar"),l=v("router-view"),f=v("Footer"),D=v("vdapp-board");return d(),c(I,null,[h(r),t("div",xt,[h(l),h(f)]),h(D)],64)}var St=T(Nt,[["render",Ct],["__scopeId","data-v-556c4bd7"]]);const At="modulepreload",ye={},It="/",$t=function(s,n){return!n||n.length===0?s():Promise.all(n.map(i=>{if(i=`${It}${i}`,i in ye)return;ye[i]=!0;const a=i.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const r=document.createElement("link");if(r.rel=a?"stylesheet":At,a||(r.as="script",r.crossOrigin=""),r.href=i,document.head.appendChild(r),a)return new Promise((l,f)=>{r.addEventListener("load",l),r.addEventListener("error",f)})})).then(()=>s())};var Et="/assets/KNSWHITE.bb37d2de.png";const Ut={name:"About"},fe=e=>(S("data-v-234292cc"),e=e(),A(),e),Mt={class:"container"},Bt=fe(()=>t("h1",{class:"text-center"},"About KNS",-1)),Rt=fe(()=>t("div",{class:"row mt-3"},[t("div",{class:"col-md-8 offset-md-2 text-center"},[t("img",{class:"img-fluid",src:Et,width:"500"})])],-1)),Ot=[Bt,Rt];function Ft(e,s,n,i,a,o){return d(),c("div",Mt,Ot)}var Pt=T(Ut,[["render",Ft],["__scopeId","data-v-234292cc"]]);const Kt={name:"Sidebar",computed:x(m({},b("user",["getUserSelectedName","getUserShortAddress","getUserSelectedNameImageSvg"])),{getNameOrAddress(){return this.getUserSelectedName?this.getUserSelectedName:this.getUserShortAddress},getUserImage(){return this.getUserSelectedNameImageSvg?this.getUserSelectedNameImageSvg:"https://upload.wikimedia.org/wikipedia/commons/b/bc/Unknown_person.jpg"}})},j=e=>(S("data-v-84da10ac"),e=e(),A(),e),Lt={class:"container"},Ht=["src"],Vt={class:"text-center mt-2 text-break"},Wt=j(()=>t("hr",null,null,-1)),jt=j(()=>t("i",{class:"bi bi-person"},null,-1)),qt=_(" Profile "),Jt=j(()=>t("i",{class:"bi bi-cart4"},null,-1)),Yt=_(" Buy domain "),Gt=j(()=>t("i",{class:"bi bi-search"},null,-1)),Xt=_(" Search domain "),Qt=j(()=>t("i",{class:"bi bi-send"},null,-1)),zt=_(" Send tokens "),Zt=j(()=>t("i",{class:"bi bi-window-plus"},null,-1)),es=_(" Browser extension ");function ts(e,s,n,i,a,o){const r=v("router-link");return d(),c("div",Lt,[t("img",{src:o.getUserImage,class:"img-fluid img-thumbnail"},null,8,Ht),t("h3",Vt,u(o.getNameOrAddress),1),Wt,h(r,{class:"btn btn-sidebar text-start",to:"/profile"},{default:k(()=>[jt,qt]),_:1}),h(r,{class:"btn btn-sidebar text-start",to:"/"},{default:k(()=>[Jt,Yt]),_:1}),h(r,{class:"btn btn-sidebar text-start",to:"/search-domain"},{default:k(()=>[Gt,Xt]),_:1}),h(r,{class:"btn btn-sidebar text-start",to:"/send-tokens"},{default:k(()=>[Qt,zt]),_:1}),h(r,{class:"btn btn-sidebar text-start",to:"/browser"},{default:k(()=>[Zt,es]),_:1})])}var q=T(Kt,[["render",ts],["__scopeId","data-v-84da10ac"]]),ss="/assets/chrome-logo.f7a9cfbf.png",ns="/assets/firefox-logo.1191b73d.png";const as={name:"BrowserExtension",components:{Sidebar:q}},is=e=>(S("data-v-79beebf2"),e=e(),A(),e),os={class:"row"},rs={class:"col-md-3",id:"sidebar-container"},ls=is(()=>t("div",{class:"col-md-9"},[t("div",{class:"row"},[t("div",{class:"col-md-12 mb-3"},[t("div",{class:"container text-center"},[t("h3",null,"Browser Extension/Plugin"),t("p",{class:"text-wrap p-4"}," Punk Domains browser extension allows you to enter a .klima domain name in the URL bar and the extension will redirect you to the URL that is set for that domain. If no URL is set, the extension will redirect you to the domain page on the Klima Name Service website. ")])])]),t("div",{class:"row"},[t("div",{class:"col-md-6 mb-3"},[t("div",{class:"container text-center"},[t("h3",null,"Chrome/Brave"),t("p",null,[t("small",null,[t("em",null,"Coming soon!")])]),t("img",{class:"img-fluid browser-img mb-3",src:ss})])]),t("div",{class:"col-md-6 mb-3"},[t("div",{class:"container text-center"},[t("h3",null,"Firefox"),t("p",null,[t("small",null,[t("em",null,"Coming soon!")])]),t("img",{class:"img-fluid browser-img mb-3",src:ns})])])])],-1));function ds(e,s,n,i,a,o){const r=v("Sidebar");return d(),c("div",os,[t("div",rs,[h(r)]),ls])}var cs=T(as,[["render",ds],["__scopeId","data-v-79beebf2"]]);const us={name:"WaitingToast",props:["text"]},ms=t("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),ps={class:"mx-2"};function hs(e,s,n,i,a,o){return d(),c("div",null,[ms,t("span",ps,u(n.text),1)])}var X=T(us,[["render",hs]]);const ys={name:"EditOtherData",emits:["fetchData"],props:["domainData","tld","domainName","isCorrectChainForDomain"],data(){return{btnInactive:!1,fields:[],tldContract:null}},computed:x(m(m(m({},b("punk",["getTldAbi"])),b("network",["getBlockExplorerBaseUrl"])),b("klima",["getKlimaTldAddress"])),{customData(){if(this.domainData)try{return JSON.parse(this.domainData.data)}catch{return null}return null},isOwner(){if(this.domainData)return String(this.address).toLowerCase()===String(this.domainData.holder).toLowerCase()}}),methods:{addField(){this.fields.push({dataKey:"",dataValue:""})},removeField(e){this.fields.splice(e,1)},async editData(){this.btnInactive=!0,this.tldContract||this.setContract();const e={};for(let s of this.fields)s.dataKey&&s.dataValue&&(e[s.dataKey]=s.dataValue);if(this.tldContract)try{const s=await this.tldContract.editData(this.domainName,JSON.stringify(e));document.getElementById("closeCustomDataModal").click();const n=this.toast({component:X,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:p.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+s.hash,"_blank").focus()}),i=await s.wait();i.status===1?(this.toast.dismiss(n),this.toast("You have successfully updated your domain's custom data!",{type:p.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+s.hash,"_blank").focus()}),this.$emit("fetchData"),this.btnInactive=!1):(this.toast.dismiss(n),this.toast("Transaction has failed.",{type:p.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+s.hash,"_blank").focus()}),console.log(i),this.btnInactive=!1,this.inputUrl=this.domainData.url)}catch(s){this.btnInactive=!1,console.log(s),this.toast(s.message,{type:p.ERROR}),this.inputUrl=this.domainData.url}},getTwitterUrl(e){if(typeof e=="string")return e.startsWith("http")?e:e.startsWith("www")||e.startsWith("twitter.com")?"https://"+e:(e.startsWith("@"),"https://twitter.com/"+e)},setContract(){if(this.address){const e=new w(this.getTldAbi);this.tldContract=new g(this.getKlimaTldAddress,e,this.signer)}}},setup(){const{address:e,signer:s}=$(),n=O();return{address:e,signer:s,toast:n}},watch:{domainData(){if(this.domainData&&this.domainData.data){const e=JSON.parse(this.domainData.data);for(const[s,n]of Object.entries(e))this.fields.findIndex(i=>i.dataKey==s)===-1&&this.fields.push({dataKey:s,dataValue:n})}this.fields.findIndex(e=>e.dataKey=="imgAddress")===-1&&this.fields.push({dataKey:"imgAddress",dataValue:"",valuePlaceholder:"HTTP, or 0x address if NFT"}),this.fields.findIndex(e=>e.dataKey=="imgTokenId")===-1&&this.fields.push({dataKey:"imgTokenId",dataValue:"",valuePlaceholder:"Only needed if img is NFT"}),this.fields.findIndex(e=>e.dataKey=="url")===-1&&this.fields.push({dataKey:"url",dataValue:"",valuePlaceholder:"Add any URL to redirect domain to"}),this.fields.findIndex(e=>e.dataKey=="twitter")===-1&&this.fields.push({dataKey:"twitter",dataValue:"",valuePlaceholder:"Enter your Twitter handle"}),this.isOwner&&this.isCorrectChainForDomain&&this.setContract()}}},J=e=>(S("data-v-da39bc9e"),e=e(),A(),e),fs={class:"mb-3 row domain-data mt-4"},_s={class:"col-sm-3 punk-title"},bs={class:"col-sm-9 punk-text"},gs={key:0},vs=["href"],ws={key:1},ks=["href"],Ts={key:2},Ds={key:1,class:"btn btn-primary btn-lg mx-3 mt-3","data-bs-toggle":"modal","data-bs-target":"#editDataModal"},Ns={class:"modal fade text-start",id:"editDataModal",tabindex:"-1","aria-labelledby":"editDataModalLabel","aria-hidden":"true"},xs={class:"modal-dialog modal-dialog-centered"},Cs={class:"modal-content"},Ss=J(()=>t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"editDataModalLabel"},"Edit other data"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),As={class:"modal-body"},Is=J(()=>t("p",null," You can add custom data to this domain. ",-1)),$s=J(()=>t("p",null," Example: twitter -> @myhandle ",-1)),Es={class:"input-group mb-3 mt-4"},Us=["onUpdate:modelValue"],Ms=J(()=>t("span",{class:"input-group-text"},[t("i",{class:"bi bi-arrow-right"})],-1)),Bs=["onUpdate:modelValue","placeholder"],Rs=["onClick"],Os=J(()=>t("i",{class:"bi bi-x-circle"},null,-1)),Fs=[Os],Ps={class:"modal-footer"},Ks=["disabled"],Ls=J(()=>t("button",{id:"closeCustomDataModal",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1));function Hs(e,s,n,i,a,o){return d(),c(I,null,[o.customData?(d(!0),c(I,{key:0},Y(o.customData,(r,l)=>(d(),c("div",fs,[t("div",_s,u(l.charAt(0).toUpperCase()+l.slice(1)),1),t("div",bs,[l=="url"?(d(),c("span",gs,[t("a",{target:"_blank",href:r},u(r),9,vs)])):l=="twitter"?(d(),c("span",ws,[t("a",{target:"_blank",href:o.getTwitterUrl(r)},u(r),9,ks)])):(d(),c("span",Ts,u(r),1))])]))),256)):y("",!0),o.isOwner&&n.isCorrectChainForDomain?(d(),c("button",Ds," Edit data ")):y("",!0),t("div",Ns,[t("div",xs,[t("div",Cs,[Ss,t("div",As,[Is,$s,a.fields?(d(!0),c(I,{key:0},Y(a.fields,(r,l)=>(d(),c("div",Es,[E((d(),c("input",{type:"text",key:"dataKey"+l,class:"form-control","onUpdate:modelValue":f=>r.dataKey=f,placeholder:"Enter key (like twitter)"},null,8,Us)),[[U,r.dataKey]]),Ms,E((d(),c("input",{type:"text",class:"form-control",key:"dataValue"+l,"onUpdate:modelValue":f=>r.dataValue=f,placeholder:r.valuePlaceholder?r.valuePlaceholder:"Enter value"},null,8,Bs)),[[U,r.dataValue]]),t("span",{class:"input-group-text",onClick:f=>o.removeField(l)},Fs,8,Rs)]))),256)):y("",!0),t("button",{class:"btn btn-secondary btn-sm",onClick:s[0]||(s[0]=(...r)=>o.addField&&o.addField(...r))}," Add new field ")]),t("div",Ps,[t("button",{type:"button",class:"btn btn-secondary",onClick:s[1]||(s[1]=(...r)=>o.editData&&o.editData(...r)),disabled:a.btnInactive},"Edit data",8,Ks),Ls])])])])],64)}var Vs=T(ys,[["render",Hs],["__scopeId","data-v-da39bc9e"]]);const Ws={name:"DomainDetails",props:["domainChain","tld","domainName"],components:{EditOtherData:Vs,Sidebar:q},data(){return{loadingData:!1,tldContract:null,domainData:null,pfpImage:"https://upload.wikimedia.org/wikipedia/commons/b/bc/Unknown_person.jpg"}},created(){!this.tldContract&&this.isCorrectChainForDomain&&this.setContract(),this.fetchData()},computed:x(m(m(m({},b("punk",["getTldAbi"])),b("klima",["getKlimaTldAddress"])),b("network",["getBlockExplorerBaseUrl","getChainId","getFallbackProvider","getSupportedNetworks","isNetworkSupported"])),{holderData(){return this.domainData.holder!==R?this.domainData.holder:"This domain name is not owned by anyone yet."},isCorrectChainForDomain(){return Number(this.domainChain)===Number(this.getChainId)}}),methods:{async fetchData(){this.loadingData=!0;const e=this.getFallbackProvider(Number(this.domainChain)),s=new w(F),n=new g(C[this.domainChain]["."+this.tld],s,e);if(n&&(this.domainData=await n.domains(this.domainName),this.domainData&&this.domainData.holder!==R)){let i=await n.tokenURI(this.domainData.tokenId),a=!0;if(this.domainData.data){const o=JSON.parse(this.domainData.data);if(o.imgAddress&&!o.imgAddress.startsWith("0x"))this.pfpImage=o.imgAddress.replace("ipfs://","https://ipfs.io/ipfs/"),a=!1;else if(o.imgAddress){const r=new w(["function tokenURI(uint256 tokenId) public view returns (string memory)"]);i=await new g(o.imgAddress,r,e).tokenURI(o.imgTokenId)}else i=await n.tokenURI(o.imgTokenId);if(i.includes("ipfs://")&&(i=i.replace("ipfs://","https://ipfs.io/ipfs/")),i.includes("http")){const l=await(await fetch(i)).json();l&&l.image&&(this.pfpImage=l.image.replace("ipfs://","https://ipfs.io/ipfs/"),a=!1)}}if(i&&a){const o=atob(i.substring(29)),r=JSON.parse(o);r&&r.image&&(this.pfpImage=r.image)}}this.loadingData=!1},setContract(){if(this.isActivated){const e=new w(this.getTldAbi);this.tldContract=new g(this.getKlimaTldAddress,e,this.signer)}}},setup(){const{isActivated:e,signer:s}=$(),n=O(),{getChainName:i}=te();return{getChainName:i,isActivated:e,signer:s,toast:n}}},ne=e=>(S("data-v-d470b866"),e=e(),A(),e),js={class:"row"},qs={class:"col-md-3",id:"sidebar-container"},Js={class:"col-md-9"},Ys={class:"row"},Gs={class:"col-md-12"},Xs={class:"container text-center"},Qs=["src"],zs={key:0,class:"mb-3 text-center mt-4"},Zs=ne(()=>t("span",{class:"spinner-border spinner-border-lg",role:"status","aria-hidden":"true"},null,-1)),en=[Zs],tn={key:1,class:"mb-3 row domain-data mt-4"},sn=ne(()=>t("div",{class:"col-sm-3 punk-title"}," Holder address ",-1)),nn={class:"col-sm-9 punk-text text-break"},an={class:"mb-3 row domain-data mt-4"},on=ne(()=>t("div",{class:"col-sm-3 punk-title"}," Network ",-1)),rn={class:"col-sm-9 punk-text text-break"};function ln(e,s,n,i,a,o){const r=v("Sidebar"),l=v("EditOtherData");return d(),c("div",js,[t("div",qs,[h(r)]),t("div",Js,[t("div",Ys,[t("div",Gs,[t("div",Xs,[t("h3",null,u(n.domainName)+"."+u(n.tld),1),t("img",{class:"img-thumbnail domain-image",src:a.pfpImage},null,8,Qs),a.loadingData?(d(),c("div",zs,en)):y("",!0),a.domainData?(d(),c("div",tn,[sn,t("div",nn,u(o.holderData),1)])):y("",!0),t("div",an,[on,t("div",rn,u(i.getChainName(Number(n.domainChain)))+" (this is where domain is registered) ",1)]),h(l,{domainData:a.domainData,tld:n.tld,domainName:n.domainName,isCorrectChainForDomain:o.isCorrectChainForDomain,onFetchData:o.fetchData},null,8,["domainData","tld","domainName","isCorrectChainForDomain","onFetchData"])])])])])])}var dn=T(Ws,[["render",ln],["__scopeId","data-v-d470b866"]]);const cn={name:"Referral",computed:x(m({},b("user",["getUserAddress","getUserSelectedName"])),{getNameOrAddress(){return this.getUserSelectedName?this.getUserSelectedName:this.getUserAddress}}),methods:{copyToClipboard(e){navigator.clipboard.writeText(e),this.toast("Referral link copied to your clipboard!",{type:p.SUCCESS})}},setup(){return{toast:O()}}},_e=e=>(S("data-v-4df501b5"),e=e(),A(),e),un={class:"row"},mn={class:"col-md-12 mt-3"},pn={class:"container text-center"},hn=_e(()=>t("h3",null,"Referrals",-1)),yn=_e(()=>t("p",null," Share this referral link and earn rewards from new domain mints! ",-1)),fn={class:"row mt-1"},_n={class:"col-md-6 offset-md-3"},bn=["value"];function gn(e,s,n,i,a,o){return d(),c("div",un,[t("div",mn,[t("div",pn,[hn,yn,t("div",fn,[t("div",_n,[t("input",{class:"form-control text-center clipboard",value:"http://www.kns.earth/?ref="+this.getNameOrAddress,onClick:s[0]||(s[0]=r=>o.copyToClipboard("http://www.kns.earth/?ref="+this.getNameOrAddress)),readonly:""},null,8,bn)])])])])])}var be=T(cn,[["render",gn],["__scopeId","data-v-4df501b5"]]);function vn(){function e(s){return s===""?{invalid:!0,message:null}:s===null?{invalid:!0,message:null}:s.includes(".")?{invalid:!0,message:"Dots not allowed"}:s.includes(" ")?{invalid:!0,message:"Spaces not allowed"}:s.includes("%")?{invalid:!0,message:"% not allowed"}:s.includes("&")?{invalid:!0,message:"& not allowed"}:s.includes("?")?{invalid:!0,message:"? not allowed"}:s.includes("#")?{invalid:!0,message:"# not allowed"}:s.includes("/")?{invalid:!0,message:"/ not allowed"}:s.includes(",")?{invalid:!0,message:"Comma not allowed"}:!1}return{buyNotValid:e}}var ge=[{inputs:[{internalType:"address",name:"_knsRetirerAddress",type:"address"},{internalType:"address",name:"_tldAddress",type:"address"},{internalType:"address",name:"_usdcAddress",type:"address"},{internalType:"uint256",name:"_price",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"address",name:"addr",type:"address"}],name:"AddedToWhitelist",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"price_",type:"uint256"}],name:"PriceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"referral_",type:"uint256"}],name:"ReferralChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"address",name:"addr",type:"address"}],name:"RemovedFromWhitelist",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"address",name:"oldAddress",type:"address"},{indexed:!1,internalType:"address",name:"newAddress",type:"address"}],name:"RetirerAddressChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"royalty_",type:"uint256"}],name:"RoyaltyChanged",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"MAX_BPS",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"TLD_NAME",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"addAddressToWhitelist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newKnsRetirerAddr",type:"address"}],name:"changeKnsRetirerAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxLength",type:"uint256"}],name:"changeMaxDomainNameLength",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_price",type:"uint256"}],name:"changePrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_referral",type:"uint256"}],name:"changeReferralFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_royalty",type:"uint256"}],name:"changeRoyaltyFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_description",type:"string"}],name:"changeTldDescription",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"knsRetirerAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_domainName",type:"string"},{internalType:"address",name:"_domainHolder",type:"address"},{internalType:"address",name:"_referrer",type:"address"},{internalType:"string",name:"_retireMessage",type:"string"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenAddress_",type:"address"},{internalType:"uint256",name:"tokenAmount_",type:"uint256"},{internalType:"address",name:"recipient_",type:"address"}],name:"recoverERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenAddress_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"},{internalType:"address",name:"recipient_",type:"address"}],name:"recoverERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"referralFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"removeAddressFromWhitelist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"royaltyFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tldContract",outputs:[{internalType:"contract IPunkTLD",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"togglePaused",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newTldOwner",type:"address"}],name:"transferTldOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdc",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whitelisted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],ae=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];const wn={name:"Home",data(){return{chosenDomainName:null,domainPrice:null,loading:!1,paused:!0,tldAddr:"0xe8b97542A433e7eCc7bB791872af04DF02A1a6E4",tldContract:null,usdcAddr:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",usdcContract:null,usdcAllowance:0,usdcBalance:0,waiting:!1,wrapperAddr:"0xf7E89ED8106cBa1335e04837E59a28ae1A3D580c",wrapperContract:null}},components:{Referral:be},created(){this.setContracts()},computed:x(m({},b("network",["getBlockExplorerBaseUrl","getFallbackProvider"])),{domainLowerCase(){return this.chosenDomainName.toLowerCase()},hasUserEnoughUsdc(){return!!(this.address&&this.price>0&&this.usdcBalance>0&&this.usdcBalance>=this.price)},isNetworkSupported(){return!!(this.isActivated&&this.chainId===137)}}),methods:x(m({},G("user",["addDomainManually"])),{async buyDomain(){this.waiting=!0;const e=this.domainLowerCase+".klima",s=new w(ge),n=new g(this.wrapperAddr,s,this.signer);if(this.tldContract&&await this.tldContract.getDomainHolder(this.domainLowerCase)!==R){this.toast("Sorry, but this domain name is already taken...",{type:p.ERROR}),this.waiting=!1;return}try{let i=localStorage.getItem("referral");(!i||!W(i))&&(i=R);const a=await n.mint(this.domainLowerCase,i,{value:me(this.domainPrice)}),o=this.toast({component:X,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:p.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),r=await a.wait();r.status===1?(this.toast.dismiss(o),this.toast("You have successfully bought the domain!",{type:p.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),this.setContracts(),this.addDomainManually(e),this.waiting=!1):(this.toast.dismiss(o),this.toast("Transaction has failed.",{type:p.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),console.log(r),this.waiting=!1)}catch(i){console.log(i),this.waiting=!1,this.toast(i.message,{type:p.ERROR})}this.waiting=!1},changeNetwork(e){const s=this.switchNetwork(e);window.ethereum.request({method:s.method,params:s.params})},async setContracts(){this.loading=!0;let e=this.getFallbackProvider(137);if(!this.tldContract){const s=new w(F);this.tldContract=new g(this.tldAddr,s,e)}if(!this.usdcContract){const s=new w(ae);this.usdcContract=new g(this.usdcAddr,s,e)}if(this.usdcContract&&this.address){const s=await this.usdcContract.allowance(this.address,this.wrapperAddr);this.usdcAllowance=Z(s,"mwei"),console.log("Allowance: "+this.usdcAllowance+" USDC");const n=await this.usdcContract.balanceOf(this.address);this.usdcBalance=Z(n,"mwei"),console.log("User balance: "+this.usdcBalance+" USDC")}if(!this.wrapperContract){const s=new w(ge);this.wrapperContract=new g(this.wrapperAddr,s,e),this.paused=await this.wrapperContract.paused(),console.log("Paused: "+this.paused);const n=await this.wrapperContract.price();this.domainPrice=Z(n,"mwei"),console.log("Domain price: "+this.domainPrice+" USDC")}this.loading=!1}}),setup(){const{open:e}=de(),{address:s,chainId:n,isActivated:i,signer:a}=$(),o=O(),{buyNotValid:r}=vn(),{switchNetwork:l}=te();return{address:s,buyNotValid:r,chainId:n,isActivated:i,open:e,signer:a,switchNetwork:l,toast:o}},watch:{address(){this.setContracts()},chainId(){this.setContracts()}}},ve=e=>(S("data-v-7d38fc14"),e=e(),A(),e),kn={class:"container text-center"},Tn=ve(()=>t("h1",{class:"mt-5"},"Mint Your .klima Domain!",-1)),Dn={class:"d-flex justify-content-center domain-input-container"},Nn={class:"input-group mb-3 domain-input input-group-lg"},xn={class:"input-group-text tld-addon"},Cn={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},Sn=ve(()=>t("span",null,".klima",-1)),An={class:"error"},In={key:0},$n={class:"mt-3"},En=["disabled"],Un={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},Mn={key:1},Bn={key:2},Rn={key:1,class:"mt-4 buy-button"},On={key:2,class:"mt-4 buy-button"};function Fn(e,s,n,i,a,o){const r=v("Referral");return d(),c(I,null,[t("div",kn,[Tn,t("div",Dn,[t("div",Nn,[E(t("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>a.chosenDomainName=l),placeholder:"enter domain name",type:"text",class:"form-control text-end","aria-label":"Text input with dropdown button"},null,512),[[U,a.chosenDomainName]]),t("span",xn,[a.loading?(d(),c("span",Cn)):y("",!0),Sn])])]),t("p",An,[i.buyNotValid(a.chosenDomainName).invalid?(d(),c("small",In,[t("em",null,u(i.buyNotValid(a.chosenDomainName).message),1)])):y("",!0)]),t("p",$n," Domain price: "+u(a.domainPrice)+" USDC ",1),i.isActivated&&o.isNetworkSupported?(d(),c("button",{key:0,class:"btn btn-primary btn-lg mt-3 buy-button",onClick:s[1]||(s[1]=(...l)=>o.buyDomain&&o.buyDomain(...l)),disabled:a.waiting||i.buyNotValid(a.chosenDomainName).invalid||a.paused||!o.hasUserEnoughUsdc},[a.waiting?(d(),c("span",Un)):y("",!0),a.paused?(d(),c("span",Mn,"Buying paused")):y("",!0),a.paused?y("",!0):(d(),c("span",Bn,"Buy domain"))],8,En)):y("",!0),i.isActivated?y("",!0):(d(),c("div",Rn,[t("button",{class:"btn btn-primary btn-lg",onClick:s[2]||(s[2]=(...l)=>i.open&&i.open(...l))},"Connect wallet")])),i.isActivated&&!o.isNetworkSupported?(d(),c("div",On,[t("button",{class:"btn btn-primary btn-lg",onClick:s[3]||(s[3]=l=>o.changeNetwork("Polygon"))},"Switch to Polygon")])):y("",!0),t("p",null,[t("small",null,u(a.usdcBalance)+" USDC",1)])]),i.isActivated?(d(),ce(r,{key:0})):y("",!0)],64)}var Pn=T(wn,[["render",Fn],["__scopeId","data-v-7d38fc14"]]);const Kn={name:"HowItWorks"},we=e=>(S("data-v-7f275dd4"),e=e(),A(),e),Ln={class:"container"},Hn=we(()=>t("h1",{class:"text-center"},"How it works",-1)),Vn=we(()=>t("div",{class:"row mt-3"},[t("div",{class:"col-md-8 offset-md-2"})],-1)),Wn=[Hn,Vn];function jn(e,s,n,i,a,o){return d(),c("div",Ln,Wn)}var qn=T(Kn,[["render",jn],["__scopeId","data-v-7f275dd4"]]);const Jn={name:"MyDomain",props:["domain"],computed:m(m({},b("network",["getChainId"])),b("user",["getUserSelectedName"])),methods:x(m(m({},ee("user",["fetchSelectedNameData"])),G("user",["setSelectedName"])),{setAsMainName(){this.setSelectedName(this.domain),this.fetchSelectedNameData()}})},Yn=e=>(S("data-v-50d96b92"),e=e(),A(),e),Gn={key:0},Xn=Yn(()=>t("i",{class:"bi bi-check2-circle"},null,-1)),Qn=_(" Default "),zn=[Xn,Qn];function Zn(e,s,n,i,a,o){return d(),c(I,null,[t("td",null,[t("span",null,u(n.domain),1)]),t("td",null,[t("span",{class:"text-click",onClick:s[0]||(s[0]=r=>this.$router.push({name:"DomainDetails",params:{domainChain:e.getChainId,tld:n.domain.split(".")[1],domainName:n.domain.split(".")[0]}}))}," Edit domain data ")]),t("td",null,[t("span",{class:"text-click",onClick:s[1]||(s[1]=r=>this.$router.push({name:"TransferDomain",params:{tld:n.domain.split(".")[1],domainName:n.domain.split(".")[0]}}))}," Transfer domain ")]),t("td",null,[e.getUserSelectedName===n.domain?(d(),c("span",Gn,zn)):(d(),c("span",{key:1,class:"text-click",onClick:s[2]||(s[2]=(...r)=>o.setAsMainName&&o.setAsMainName(...r))}," Set as main name "))])],64)}var ea=T(Jn,[["render",Zn],["__scopeId","data-v-50d96b92"]]);const ta={name:"Profile",data(){return{existingDomain:null}},components:{MyDomain:ea,Referral:be,Sidebar:q},computed:x(m(m(m({},b("user",["getUserAddress","getUserBalance","getUserAllDomainNames","getUserSelectedNameData"])),b("network",["getNetworkCurrency"])),b("klima",["getKlimaTldAddress"])),{customData(){if(this.getUserSelectedNameData)try{return JSON.parse(this.getUserSelectedNameData.data)}catch{return null}return null},domainNotValid(){if(this.existingDomain==="")return!0;if(this.existingDomain===null)return!0;if(this.existingDomain.split(".").length!=2)return!0;if(this.existingDomain.includes(" "))return!0;if(this.existingDomain.includes("%"))return!0;if(this.existingDomain.includes("&"))return!0;if(this.existingDomain.includes("?"))return!0;if(this.existingDomain.includes("#"))return!0;if(!this.existingDomain.includes(".klima"))return!0}}),methods:x(m({},G("user",["addDomainManually"])),{async addExistingDomain(){const e=this.existingDomain.toLowerCase(),s=e.split("."),n=new w(F),a=await new g(this.getKlimaTldAddress,n,this.signer).getDomainHolder(s[0]);String(a)===String(this.address)?(this.addDomainManually(e),this.toast("Domain successfully added.",{type:p.SUCCESS})):this.toast("This domain is not owned by your currently connected address.",{type:p.ERROR})}}),setup(){const{address:e,isActivated:s,signer:n}=$(),i=O();return{address:e,isActivated:s,signer:n,toast:i}}},P=e=>(S("data-v-5b3f1c67"),e=e(),A(),e),sa={class:"row"},na={class:"col-md-3",id:"sidebar-container"},aa={class:"col-md-9"},ia={key:0,class:"row"},oa=ue('<div class="col-md-12 mb-3" data-v-5b3f1c67><div class="container text-center" data-v-5b3f1c67><h3 data-v-5b3f1c67><i class="bi bi-exclamation-triangle" data-v-5b3f1c67></i> Not connected <i class="bi bi-exclamation-triangle" data-v-5b3f1c67></i></h3><p class="text-break" data-v-5b3f1c67> Please connect with your wallet to see your profile data. </p></div></div>',1),ra=[oa],la={key:1,class:"row"},da={class:"col-md-6 mb-3"},ca={class:"container text-center"},ua=P(()=>t("h3",null,"Address",-1)),ma={class:"text-break"},pa={class:"col-md-6 mb-3"},ha={class:"container text-center"},ya=P(()=>t("h3",null,"Balance",-1)),fa={class:"text-break"},_a={class:"row"},ba={class:"col-md-12"},ga={class:"container"},va=P(()=>t("h3",null,"Domains",-1)),wa={class:"table table-hover mt-4 mb-4"},ka={key:0},Ta=P(()=>t("small",null,[t("em",null,[_(" Don't see your domain here? "),t("span",{class:"span-link","data-bs-toggle":"modal","data-bs-target":"#addDomainModal"}," Add it manually"),_(". ")])],-1)),Da=[Ta],Na={key:1},xa=_(" No domain? No worries, "),Ca=_("buy yourself one here!"),Sa={class:"modal fade",id:"addDomainModal",tabindex:"-1","aria-labelledby":"addDomainModalLabel","aria-hidden":"true","modal-dialog-centered":""},Aa={class:"modal-dialog"},Ia={class:"modal-content"},$a=P(()=>t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"addDomainModalLabel"},"Add your existing domain"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Ea={class:"modal-body"},Ua={class:"mb-3"},Ma=P(()=>t("label",{for:"recipient-name",class:"col-form-label"},"Enter your existing domain:",-1)),Ba=P(()=>t("small",null,[t("em",null,"No transaction will be made, this is a free query.")],-1)),Ra={class:"modal-footer"},Oa=["disabled"],Fa=P(()=>t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1));function Pa(e,s,n,i,a,o){const r=v("Sidebar"),l=v("MyDomain"),f=v("router-link"),D=v("Referral");return d(),c(I,null,[t("div",sa,[t("div",na,[h(r)]),t("div",aa,[i.isActivated?y("",!0):(d(),c("div",ia,ra)),i.isActivated?(d(),c("div",la,[t("div",da,[t("div",ca,[ua,t("p",ma,u(e.getUserAddress),1)])]),t("div",pa,[t("div",ha,[ya,t("p",fa,u(e.getUserBalance)+" "+u(e.getNetworkCurrency),1)])])])):y("",!0),t("div",_a,[t("div",ba,[t("div",ga,[va,t("table",wa,[t("tbody",null,[(d(!0),c(I,null,Y(e.getUserAllDomainNames,N=>(d(),c("tr",null,[h(l,{domain:N},null,8,["domain"])]))),256))])]),e.getUserSelectedNameData?(d(),c("p",ka,Da)):(d(),c("p",Na,[xa,h(f,{to:"/"},{default:k(()=>[Ca]),_:1})]))])])]),h(D)])]),t("div",Sa,[t("div",Aa,[t("div",Ia,[$a,t("div",Ea,[t("div",Ua,[Ma,E(t("input",{type:"text",class:"form-control",id:"recipient-name","onUpdate:modelValue":s[0]||(s[0]=N=>a.existingDomain=N)},null,512),[[U,a.existingDomain]]),Ba])]),t("div",Ra,[t("button",{type:"button",onClick:s[1]||(s[1]=(...N)=>o.addExistingDomain&&o.addExistingDomain(...N)),class:"btn btn-secondary",disabled:o.domainNotValid},"Add domain",8,Oa),Fa])])])])],64)}var Ka=T(ta,[["render",Pa],["__scopeId","data-v-5b3f1c67"]]);const La={name:"SearchDomains",components:{Sidebar:q},data(){return{query:null,waiting:!1}},computed:x(m({},b("network",["getFallbackProvider"])),{domainLowerCase(){return this.query.toLowerCase()},notValid(){if(this.query)if(this.query.includes(".")){if(this.query.includes(" "))return!0;if(this.query.includes("%"))return!0;if(this.query.includes("&"))return!0;if(this.query.includes("?"))return!0;if(this.query.includes("#"))return!0;if(this.query.includes("/"))return!0}else return!0;else return!0;return!1}}),methods:{async findDomain(){this.waiting=!0;const e=new w(F);if(this.domainLowerCase&&this.domainLowerCase.split(".").length===2){const s=this.domainLowerCase.split(".");for(let n in C)if(C[n]["."+s[1]]){const i=this.getFallbackProvider(Number(n));if(await new g(C[n]["."+s[1]],e,i).getDomainHolder(s[0])!==R){this.$router.push({name:"DomainDetails",params:{domainChain:n,tld:s[1],domainName:s[0]}});return}else{this.toast("This domain name has not been registered yet.",{type:p.INFO}),this.waiting=!1;return}}this.toast("Top-level domain ."+s[1]+" does not exist (if this is a mistake, contact us on Discord).",{type:p.ERROR}),this.waiting=!1;return}else{this.toast("This is not a valid domain.",{type:p.ERROR}),this.waiting=!1;return}}},setup(){return{toast:O()}}},Ha={class:"row"},Va={class:"col-md-3",id:"sidebar-container"},Wa={class:"col-md-9"},ja={class:"row"},qa={class:"col-md-12 mb-3"},Ja={class:"container text-center"},Ya=t("h3",null,"Find an existing domain",-1),Ga={class:"row mt-5"},Xa={class:"col-md-6 offset-md-3"},Qa=["disabled"],za={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Za=_(" Search ");function ei(e,s,n,i,a,o){const r=v("Sidebar");return d(),c("div",Ha,[t("div",Va,[h(r)]),t("div",Wa,[t("div",ja,[t("div",qa,[t("div",Ja,[Ya,t("div",Ga,[t("div",Xa,[E(t("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>a.query=l),class:"form-control text-center",placeholder:"Enter a domain name"},null,512),[[U,a.query]])])]),t("button",{class:"btn btn-primary mt-3 mb-5",onClick:s[1]||(s[1]=(...l)=>o.findDomain&&o.findDomain(...l)),disabled:a.waiting||o.notValid},[a.waiting?(d(),c("span",za)):y("",!0),Za],8,Qa)])])])])])}var ti=T(La,[["render",ei]]);const si={name:"SendTokens",components:{Sidebar:q},data(){return{domainError:null,filterTokens:null,receiver:null,receiverAddress:null,tokenBalance:0,selectedToken:null,selectedTokenDecimals:null,tokenAmount:null,waiting:!1,validating:!1}},created(){this.getChainId>=1&&(this.selectedToken=Object.keys(this.getTokens)[0],this.tokenBalance=pe(this.balance))},computed:x(m(m({},b("network",["getBlockExplorerBaseUrl","getChainId","getFallbackProvider","getNetworkName","getTokens"])),b("user",["getUserBalance"])),{domainLowerCase(){return this.receiver?this.receiver.toLowerCase():null},formatTokenBalance(){return this.tokenBalance>100?Number(this.tokenBalance).toFixed(2):Number(this.tokenBalance).toFixed(4)},getTokenNames(){if(this.getTokens&&!this.filterTokens)return Object.keys(this.getTokens);if(this.getTokens&&this.filterTokens)return Object.keys(this.getTokens).filter(e=>e.includes(this.filterTokens.toUpperCase()))},notValid(){if(this.receiver)if(this.receiver.includes(".")){if(this.receiver.includes(" "))return!0;if(this.receiver.includes("%"))return!0;if(this.receiver.includes("&"))return!0;if(this.receiver.includes("?"))return!0;if(this.receiver.includes("#"))return!0;if(this.receiver.includes("/"))return!0;if(this.tokenAmount){if(isNaN(this.tokenAmount))return!0;if(Number(this.tokenAmount)<=0)return!0;if(Number(this.tokenAmount)>Number(this.tokenBalance))return!0}else return!0}else return!0;else return!0;return!1}}),methods:{async getTokenBalance(e){const s=this.getTokens[e];if(s==="0x0")this.tokenBalance=pe(this.balance);else{const n=new w(ae),i=new g(s,n,this.signer),a=await i.balanceOf(this.address);if(Number(a)>0){const o=await i.decimals();this.selectedTokenDecimals=Number(o),this.tokenBalance=Z(a,this.selectedTokenDecimals)}else this.tokenBalance=0}},selectToken(e){this.selectedToken=e,this.getTokenBalance(e)},send(){this.getTokens[this.selectedToken]==="0x0"?this.sendNativeTokens():this.sendErc20Tokens()},async sendErc20Tokens(){this.waiting=!0;try{const e=this.selectedToken,s=this.tokenAmount,n=this.domainLowerCase,i=Ae(s,this.selectedTokenDecimals),a=this.getTokens[e],o=new w(ae),l=await new g(a,o,this.signer).transfer(this.receiverAddress,i);document.getElementById("closeSendModal").click();const f=this.toast({component:X,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:p.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),D=await l.wait();D.status===1?(this.toast.dismiss(f),this.toast("You have successfully sent "+s+" "+e+" to "+n+"!",{type:p.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),this.waiting=!1,this.getTokenBalance(e)):(this.toast.dismiss(f),this.toast("Transaction has failed.",{type:p.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),console.log(D),this.waiting=!1)}catch(e){this.waiting=!1,console.log(e),this.toast(e.message,{type:p.ERROR})}},async sendNativeTokens(){this.waiting=!0;try{const e=this.selectedToken,s=this.tokenAmount,n=this.domainLowerCase,i=me(s),a=await this.signer.sendTransaction({to:this.receiverAddress,value:i});document.getElementById("closeSendModal").click();const o=this.toast({component:X,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:p.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),r=await a.wait();r.status===1?(this.toast.dismiss(o),this.toast("You have successfully sent "+s+" "+e+" to "+n+"!",{type:p.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),this.waiting=!1,this.getTokenBalance(e)):(this.toast.dismiss(o),this.toast("Transaction has failed.",{type:p.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),console.log(r),this.waiting=!1)}catch(e){this.waiting=!1,console.log(e),this.toast(e.message,{type:p.ERROR})}},async validateDomainName(){this.validating=!0,this.domainError=null,this.receiverAddress=null;const e=new w(F);try{if(this.domainLowerCase&&this.domainLowerCase.split(".").length===2){const s=this.domainLowerCase.split(".");for(let n in C)if(C[n]["."+s[1]]){const i=this.getFallbackProvider(Number(n)),o=await new g(C[n]["."+s[1]],e,i).getDomainHolder(s[0]);if(o!==R){this.receiverAddress=o,this.validating=!1;return}else{this.domainError="This domain name has not been registered yet.",this.validating=!1;return}break}if(!W(this.recipient)){this.domainError="This TLD does not exist.",this.validating=!1;return}}}catch{this.domainError="You have entered an incorrect domain.",this.validating=!1;return}}},setup(){const{address:e,balance:s,signer:n}=$(),i=O();return{address:e,balance:s,signer:n,toast:i}},watch:{getChainId(){this.getChainId>=1&&(this.selectedToken=Object.keys(this.getTokens)[0],this.tokenBalance=this.getUserBalance)},address(){this.getTokenBalance(this.selectedToken)}}},K=e=>(S("data-v-2aafc502"),e=e(),A(),e),ni={class:"row"},ai={class:"col-md-3",id:"sidebar-container"},ii={class:"col-md-9"},oi={class:"row"},ri={class:"col-md-12 mb-3"},li={class:"container text-center"},di=K(()=>t("h3",null,"Send tokens to a domain",-1)),ci={class:"row mt-5"},ui={class:"col-md-6 offset-md-3"},mi={class:"row mt-4"},pi={class:"col-md-4 offset-md-4"},hi={class:"input-group"},yi={class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},fi={class:"dropdown-menu p-2"},_i={class:"mb-3"},bi=["onClick"],gi=_(" Balance: "),vi=["disabled"],wi={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},ki=_(" Send tokens "),Ti={class:"modal fade text-start",id:"sendTokensModal",tabindex:"-1","aria-labelledby":"sendTokensModalLabel","aria-hidden":"true"},Di={class:"modal-dialog modal-dialog-centered"},Ni={class:"modal-content"},xi={class:"modal-header"},Ci={class:"modal-title",id:"sendTokensModalLabel"},Si=K(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),Ai={class:"modal-body"},Ii={class:"row mb-3 mt-4"},$i=K(()=>t("div",{class:"col-sm-3"},[t("strong",null,"Recipient")],-1)),Ei={class:"col-sm-9"},Ui={key:0,class:"domain-error"},Mi={key:0,class:"row mb-3 mt-2"},Bi=K(()=>t("div",{class:"col-sm-3"},[t("strong",null,"Recipient address")],-1)),Ri={class:"col-sm-9"},Oi={class:"text-break"},Fi={key:0,class:"domain-error"},Pi={class:"row mb-3 mt-2"},Ki=K(()=>t("div",{class:"col-sm-3"},[t("strong",null,"Amount")],-1)),Li={class:"col-sm-9"},Hi={class:"text-break"},Vi={key:1,class:"row mb-3 mt-2"},Wi=K(()=>t("div",{class:"col-sm-3"},[t("strong",null,"Token address")],-1)),ji={class:"col-sm-9"},qi={class:"text-break"},Ji={class:"row mb-3 mt-2"},Yi=K(()=>t("div",{class:"col-sm-3"},[t("strong",null,"Network")],-1)),Gi={class:"col-sm-9"},Xi={class:"text-break"},Qi={class:"modal-footer"},zi=["disabled"],Zi={key:0},eo={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},to={key:2},so=K(()=>t("button",{id:"closeSendModal",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1));function no(e,s,n,i,a,o){const r=v("Sidebar");return d(),c(I,null,[t("div",ni,[t("div",ai,[h(r)]),t("div",ii,[t("div",oi,[t("div",ri,[t("div",li,[di,t("div",ci,[t("div",ui,[E(t("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>a.receiver=l),class:"form-control text-center",placeholder:"Enter the receiver's domain name"},null,512),[[U,a.receiver]])])]),t("div",mi,[t("div",pi,[t("div",hi,[E(t("input",{type:"text",class:"form-control text-end","onUpdate:modelValue":s[1]||(s[1]=l=>a.tokenAmount=l),placeholder:"0.0"},null,512),[[U,a.tokenAmount]]),t("button",yi,u(a.selectedToken),1),t("div",fi,[t("div",_i,[E(t("input",{class:"form-control mb-2",placeholder:"Filter tokens","onUpdate:modelValue":s[2]||(s[2]=l=>a.filterTokens=l)},null,512),[[U,a.filterTokens]]),t("li",null,[(d(!0),c(I,null,Y(o.getTokenNames,l=>(d(),c("button",{class:"dropdown-item",type:"button",onClick:f=>o.selectToken(l)},u(l),9,bi))),256))])])])]),t("small",null,[gi,t("span",{id:"balance",onClick:s[3]||(s[3]=l=>a.tokenAmount=a.tokenBalance)},u(o.formatTokenBalance)+" "+u(a.selectedToken),1)])])]),t("button",{class:"btn btn-primary mt-4 mb-5",disabled:o.notValid||a.waiting,onClick:s[4]||(s[4]=(...l)=>o.validateDomainName&&o.validateDomainName(...l)),"data-bs-toggle":"modal","data-bs-target":"#sendTokensModal"},[a.waiting?(d(),c("span",wi)):y("",!0),ki],8,vi)])])])])]),t("div",Ti,[t("div",Di,[t("div",Ni,[t("div",xi,[t("h5",Ci,"Confirm sending "+u(a.selectedToken),1),Si]),t("div",Ai,[t("p",null," Please review the data before you send "+u(a.selectedToken)+" to "+u(o.domainLowerCase)+". ",1),t("div",Ii,[$i,t("div",Ei,[t("span",null,u(o.domainLowerCase),1),a.domainError?(d(),c("span",Ui,"Error: "+u(a.domainError),1)):y("",!0)])]),a.receiverAddress?(d(),c("div",Mi,[Bi,t("div",Ri,[t("span",Oi,u(a.receiverAddress),1),a.receiverAddress==i.address?(d(),c("span",Fi,"Error: You are sending tokens to yourself.")):y("",!0)])])):y("",!0),t("div",Pi,[Ki,t("div",Li,[t("span",Hi,u(a.tokenAmount)+" "+u(a.selectedToken),1)])]),e.getTokens[a.selectedToken]!=="0x0"?(d(),c("div",Vi,[Wi,t("div",ji,[t("span",qi,u(e.getTokens[a.selectedToken]),1)])])):y("",!0),t("div",Ji,[Yi,t("div",Gi,[t("span",Xi,u(e.getNetworkName),1)])])]),t("div",Qi,[t("button",{type:"button",class:"btn btn-secondary",onClick:s[5]||(s[5]=(...l)=>o.send&&o.send(...l)),disabled:a.waiting||a.domainError||a.validating},[a.validating?(d(),c("span",Zi,"Validating...")):y("",!0),a.validating?(d(),c("span",eo)):y("",!0),a.validating?y("",!0):(d(),c("span",to,"Send "+u(a.selectedToken),1))],8,zi),so])])])])],64)}var ao=T(si,[["render",no],["__scopeId","data-v-2aafc502"]]);const io={name:"TransferDomain",props:["tld","domainName"],components:{Sidebar:q},data(){return{recipient:null,recipientDomain:null,selectedDomain:this.domainName+"."+this.tld,waiting:!1}},computed:m(m({},b("network",["getBlockExplorerBaseUrl","getFallbackProvider"])),b("user",["getUserSelectedName"])),methods:x(m({},ee("user",["removeDomainFromUserDomains"])),{async transfer(){this.waiting=!0;const e=new w(F);if(this.recipient&&this.recipient.split(".").length===2){const s=this.recipient.split(".");for(let n in C)if(C[n]["."+s[1]]){const i=this.getFallbackProvider(Number(n)),o=await new g(C[n]["."+s[1]],e,i).getDomainHolder(s[0]);o!==R?(this.recipientDomain=this.recipient,this.recipient=o):(this.toast("The recipient's domain name "+this.recipient+" does not exist.",{type:p.ERROR}),this.waiting=!1);break}W(this.recipient)||(this.toast("Top-level domain ."+s[1]+" does not exist (if this is a mistake, contact us on Discord).",{type:p.ERROR}),this.waiting=!1)}else this.recipient?W(this.recipient)||(this.toast("This is not a valid recipient address.",{type:p.ERROR}),this.waiting=!1):(this.toast("This is not a valid recipient address or domain name.",{type:p.ERROR}),this.waiting=!1);if(this.recipient&&W(this.recipient)){const s=new g(C[this.chainId]["."+this.tld],e,this.signer),n=await s.domains(this.domainName);try{const i=await s.transferFrom(this.address,this.recipient,n.tokenId.toNumber());if(i){const a=this.toast({component:X,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:p.INFO,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+i.hash,"_blank").focus()}),o=await i.wait();o.status===1?(this.toast.dismiss(a),this.toast("You have successfully transferred the domain!",{type:p.SUCCESS,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+i.hash,"_blank").focus()}),this.removeDomainFromUserDomains(this.domainName+"."+this.tld),this.waiting=!1):(this.toast.dismiss(a),this.toast("Transaction has failed.",{type:p.ERROR,onClick:()=>window.open(this.getBlockExplorerBaseUrl+"/tx/"+i.hash,"_blank").focus()}),console.log(o),this.waiting=!1)}}catch(i){console.log(i),this.waiting=!1,this.toast(i.message,{type:p.ERROR})}}}}),setup(){const{address:e,chainId:s,signer:n}=$(),i=O();return{address:e,chainId:s,signer:n,toast:i}}},oo={class:"row"},ro={class:"col-md-3",id:"sidebar-container"},lo={class:"col-md-9"},co={class:"row"},uo={class:"col-md-12"},mo={class:"container text-center"},po=t("h3",null,"Transfer domain",-1),ho={class:"row mt-5"},yo={class:"col-md-6 offset-md-3"},fo=["value"],_o={class:"row mt-3"},bo={class:"col-md-6 offset-md-3"},go=["disabled"],vo={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},wo=_(" Transfer ");function ko(e,s,n,i,a,o){const r=v("Sidebar");return d(),c("div",oo,[t("div",ro,[h(r)]),t("div",lo,[t("div",co,[t("div",uo,[t("div",mo,[po,t("div",ho,[t("div",yo,[t("input",{value:n.domainName+"."+n.tld,class:"form-control text-center",readonly:""},null,8,fo)])]),t("div",_o,[t("div",bo,[E(t("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>a.recipient=l),class:"form-control text-center",placeholder:"Enter recipient address"},null,512),[[U,a.recipient]])])]),t("button",{class:"btn btn-primary mt-3 mb-5",onClick:s[1]||(s[1]=(...l)=>o.transfer&&o.transfer(...l)),disabled:a.waiting},[a.waiting?(d(),c("span",vo)):y("",!0),wo],8,go)])])])])])}var To=T(io,[["render",ko]]);const Do=[{path:"/",name:"Home",component:Pn},{path:"/about",name:"About",component:Pt},{path:"/browser",name:"BrowserExtension",component:cs},{path:"/domain/:domainChain/:tld/:domainName",name:"DomainDetails",component:dn,props:!0},{path:"/how",name:"HowItWorks",component:qn},{path:"/profile",name:"Profile",component:Ka},{path:"/search-domain",name:"SearchDomains",component:ti},{path:"/send-tokens",name:"SendTokens",component:ao},{path:"/transfer/:tld/:domainName",name:"TransferDomain",component:To,props:!0},{path:"/:pathMatch(.*)*",name:"404",component:()=>$t(()=>import("./Error404.799a1996.js"),["assets/Error404.799a1996.js","assets/Error404.cd7e448d.css","assets/vendor.133078cc.js"])}],No=Ie({history:$e(),routes:Do});var xo={"137":{MATIC:"0x0",ETH:"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619",DAI:"0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063",USDC:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"},"80001":{MATIC:"0x0",AAVE:"0x2b03FB8443A3a338f772C1EE29ACB4AeaA0Bc2ab",DAI:"0xFeBBF3F530A4fB3F0FBBAb9Ce72E4988972f2a08"}};const{chainId:L}=$();var Co={namespaced:!0,state:()=>({networkCurrency:"MATIC",networkName:"Unsupported Network",supportedNetworks:{137:"Polygon"}}),getters:{getBlockExplorerBaseUrl(){if(L.value===137)return"https://polygonscan.com";if(L.value===80001)return"https://mumbai.polygonscan.com"},getChainId(){return L.value},getFallbackProvider:e=>s=>{let n;if(s===137?n=["https://polygon-rpc.com/","https://polygon-mainnet.g.alchemy.com/v2/nRv9l5eQT_J9m7c5PsEkdM7d6awIcijw"]:s===80001?n=["https://matic-mumbai.chainstacklabs.com"]:s===10?n=["https://mainnet.optimism.io"]:s===100?n=["https://rpc.xdaichain.com","https://rpc.gnosischain.com"]:s===42161&&(n=["https://arb1.arbitrum.io/rpc"]),n){const i=n.map(a=>new Ee(a));return new Ue(i,1)}else return null},getNetworkCurrency(e){return e.networkCurrency},getNetworkName(e){const s=Object.keys(e.supportedNetworks);return s&&s.includes(String(L.value))?e.networkName:"Unsupported Network"},getSupportedNetworks(e){return e.supportedNetworks},getSupportedNetworkIds(e){return Object.keys(e.supportedNetworks)},getSupportedNetworkNames(e){return Object.values(e.supportedNetworks)},getTokens(e){return xo[String(L.value)]},isNetworkSupported(e){const s=Object.keys(e.supportedNetworks);return!!(s&&s.includes(String(L.value)))}},mutations:{setNetworkData(e){L.value===137?(e.networkName="Polygon",e.networkCurrency="MATIC"):L.value===80001&&(e.networkName="Polygon Testnet",e.networkCurrency="MATIC")}}};const{address:M,balance:ke,chainId:B,signer:ie}=$();var So={namespaced:!0,state:()=>({selectedName:null,selectedNameData:null,selectedNameImageSvg:null,selectedNameKey:null,userAddress:null,userAllDomainNames:[],userDomainNamesKey:null,userShortAddress:null,userBalanceWei:0,userBalance:0}),getters:{getUserAddress(e){return e.userAddress},getUserBalance(e){return e.userBalance},getUserBalanceWei(e){return e.userBalanceWei},getUserAllDomainNames(e){return e.userAllDomainNames},getUserSelectedName(e){return e.selectedName},getUserSelectedNameData(e){return e.selectedNameData},getUserSelectedNameImageSvg(e){return e.selectedNameImageSvg},getUserShortAddress(e){return e.userShortAddress}},mutations:{addDomainManually(e,s){let n=[];if(B.value){this.userDomainNamesKey="userDomainNames"+String(B.value)+String(H(M.value)),this.selectedNameKey="selectedName"+String(B.value)+String(H(M.value)),localStorage.getItem(this.userDomainNamesKey)&&(n=JSON.parse(localStorage.getItem(this.userDomainNamesKey))),n.includes(s)||n.push(s);for(let i of n)e.userAllDomainNames.includes(i)||e.userAllDomainNames.push(i);localStorage.setItem(this.userDomainNamesKey,JSON.stringify(n))}},setUserData(e){e.userAddress=M.value,e.userShortAddress=H(M.value),e.userBalanceWei=ke.value,e.userBalance=Me(ke.value)},setDefaultName(e,s){e.userAllDomainNames.includes(s)||e.userAllDomainNames.push(s)},setSelectedName(e,s){e.selectedName=s,localStorage.setItem(this.selectedNameKey,e.selectedName),localStorage.setItem("connected","metamask")},setSelectedNameData(e,s){e.selectedNameData=s},setSelectedNameImageSvg(e,s){e.selectedNameImageSvg=s},setUserAllDomainNames(e,s){e.userAllDomainNames=s}},actions:{async fetchUserDomainNames({dispatch:e,commit:s,state:n,rootState:i,rootGetters:a},o){let r=[];B.value&&(this.userDomainNamesKey="userDomainNames"+String(B.value)+String(H(M.value)),this.selectedNameKey="selectedName"+String(B.value)+String(H(M.value))),o&&(localStorage.getItem(this.selectedNameKey)&&localStorage.getItem(this.selectedNameKey)!==String(null)?s("setSelectedName",localStorage.getItem(this.selectedNameKey)):(s("setSelectedName",null),s("setSelectedNameData",null),s("setSelectedNameImageSvg",null)),s("setUserAllDomainNames",[])),localStorage.getItem(this.userDomainNamesKey)&&(r=JSON.parse(localStorage.getItem(this.userDomainNamesKey)));for(let N of r)s("setDefaultName",N);const l=new w(a["punk/getTldAbi"]),D=await new g(a["klima/getKlimaTldAddress"],l,ie.value).defaultNames(M.value);D&&(s("setDefaultName",D+i.klima.klimaTldName),r.includes(D+i.klima.klimaTldName)||r.push(D+i.klima.klimaTldName),n.selectedName||s("setSelectedName",D+i.klima.klimaTldName)),localStorage.getItem(this.selectedNameKey)&&localStorage.getItem(this.selectedNameKey)!==String(null)?s("setSelectedName",localStorage.getItem(this.selectedNameKey)):localStorage.setItem(this.selectedNameKey,n.selectedName),localStorage.setItem(this.userDomainNamesKey,JSON.stringify(r)),e("fetchSelectedNameData")},async fetchSelectedNameData({commit:e,state:s,rootGetters:n}){if(s.selectedName){const a=s.selectedName.split(".")[0];if(a){const o=new w(n["punk/getTldAbi"]),r=new g(n["klima/getKlimaTldAddress"],o,ie.value),l=await r.domains(a);e("setSelectedNameData",l);let f=await r.tokenURI(l.tokenId),D=!1;if(l.data){const N=JSON.parse(l.data);if(N.imgAddress&&!N.imgAddress.startsWith("0x"))e("setSelectedNameImageSvg",N.imgAddress.replace("ipfs://","https://ipfs.io/ipfs/")),D=!0;else if(N.imgAddress){const V=new w(["function tokenURI(uint256 tokenId) public view returns (string memory)"]);f=await new g(N.imgAddress,V,ie.value).tokenURI(N.imgTokenId)}if(f.includes("ipfs://")&&(f=f.replace("ipfs://","https://ipfs.io/ipfs/")),f.includes("http")){const z=await(await fetch(f)).json();z&&z.image?(e("setSelectedNameImageSvg",z.image.replace("ipfs://","https://ipfs.io/ipfs/")),D=!0):e("setSelectedNameImageSvg",null)}}if(f&&!D){const N=atob(f.substring(29)),V=JSON.parse(N);V&&V.image?e("setSelectedNameImageSvg",V.image):e("setSelectedNameImageSvg",null)}}}},async removeDomainFromUserDomains({commit:e,state:s},n){if(B.value&&(this.userDomainNamesKey="userDomainNames"+String(B.value)+String(H(M.value)),this.selectedNameKey="selectedName"+String(B.value)+String(H(M.value)),localStorage.getItem(this.userDomainNamesKey))){const i=JSON.parse(localStorage.getItem(this.userDomainNamesKey));s.userAllDomainNames=[];let a=[];for(let o of i)o!=n&&(a.push(o),s.userAllDomainNames.push(o));localStorage.setItem(this.userDomainNamesKey,JSON.stringify(a)),localStorage.getItem(this.selectedNameKey)&&localStorage.getItem(this.selectedNameKey)==n&&(a.length>0&&e("setSelectedName",a[0]),e("setSelectedName",null))}}}},Ao={namespaced:!0,getters:{getTldAbi(){return F}}},Io={namespaced:!0,state:()=>({klimaTldAddress:C["137"][".klima"],klimaTldName:".klima"}),getters:{getKlimaTldAddress(e){return e.klimaTldAddress},getKlimaTldName(e){return e.klimaTldName}}};const $o=Be({modules:{network:Co,user:So,punk:Ao,klima:Io}});const Q=Re(St),Eo={timeout:5e3,hideProgressBar:!0,closeButton:"button",position:Oe.TOP_LEFT,toastClassName:"punk-toast-class",closeOnClick:!1,toastDefaults:{[p.INFO]:{timeout:!1,icon:!1}}};Q.use(No);Q.use($o);Q.use(Fe,{infuraId:""});Q.use(Pe,Eo);Q.mount("#app");export{T as _};
